const __vite__mapDeps = (
  i,
  m = __vite__mapDeps,
  d = m.f ||
    (m.f = [
      "assets/cmf04dh7i1msjij3.js",
      "assets/lip667d8t42poxum.js",
      "assets/hgyrt6j47bbfyjrt.js",
      "assets/root-nsehtib5.css",
      "assets/nbz4aahqzuixvvgr.js",
      "assets/kj3wube4rfsfjz3o.js",
      "assets/bek4a02po1hapmml.js",
      "assets/conversation-small-k5k9c71c.css",
      "assets/accwyue32xah1z1m.js",
      "assets/gzhfufyiohn83kuo.js",
      "assets/mrja6mbtdpn27l02.js",
      "assets/gfnsbm99dy8f9dle.js",
      "assets/gkp5860wafdf24mv.js",
      "assets/jwvxkjptpstk4ej7.js",
      "assets/lug0xrczrlz6hmcb.js",
      "assets/b3f39kp9psoxk5co.js",
      "assets/niorjy0w991q2jfl.js",
      "assets/hzzn4jce92ayb7my.js",
      "assets/buuh44fq2yjidyvi.js",
      "assets/inxios5wlw78xwe7.js",
      "assets/g4tl5lt9yqf20m4s.js",
    ]),
) => i.map((i) => d[i]);
import {
  m as R,
  dh as ns,
  l as ee,
  k as B,
  b as O,
  W as te,
  dE as jo,
  dF as Gs,
  c6 as _e,
  c7 as Le,
  b1 as at,
  b9 as yo,
  cc as ya,
  B as N,
  dj as vo,
  bL as So,
  ae as Ce,
  cU as va,
  aj as T,
  at as le,
  d1 as Sa,
  F as se,
  as as gt,
  eh as ko,
  eR as ct,
  g as Pe,
  t as ka,
  ai as wa,
  ak as Je,
  aH as Na,
  aE as _a,
  aO as Dt,
  eq as wo,
  c as qe,
  b2 as ke,
  ac as No,
  ao as st,
  hN as Us,
  hO as et,
  am as Q,
  q as E,
  gn as _o,
  v as Lo,
  s as os,
  hi as Po,
  aI as Eo,
  d9 as To,
  p as It,
  e as Ao,
  a as is,
  ho as Do,
  hP as Io,
  f8 as tt,
  g2 as Ws,
  fS as Oo,
  fR as Ro,
  fT as Bo,
  h4 as Fo,
  cd as ne,
  hQ as Go,
  eY as Uo,
  a_ as La,
  f as Wo,
  al as Ho,
  cZ as Hs,
  c_ as Vs,
  b3 as Vo,
  cT as Ks,
  e9 as Pa,
  hR as Ko,
  hS as zs,
  X as rs,
  _ as ls,
} from "./hgyrt6j47bbfyjrt.js";
import {
  f as k,
  r as d,
  j as e,
  M as r,
  u as Ee,
  a as fe,
  a6 as Ea,
  b as de,
  a5 as zo,
  g as D,
  h as ft,
  L as Ge,
  R as qo,
  d as Te,
  c as ht,
  o as Yo,
  ae as Ot,
  p as Ta,
} from "./lip667d8t42poxum.js";
import {
  e as pt,
  U as oe,
  dF as Zo,
  I as Lt,
  bd as lt,
  bJ as Rt,
  x8 as $o,
  an as we,
  ky as Qo,
  af as dt,
  eR as Xo,
  fO as Jo,
  eP as ei,
  eQ as ti,
  G as cs,
  ag as qt,
  g0 as si,
  ia as ai,
  ip as ni,
  bv as oi,
  P as ii,
  xR as ri,
  y as ut,
  H as ce,
  cy as ds,
  cm as Pt,
  iA as li,
  xS as ci,
  xT as di,
  fL as es,
  xU as ui,
  ba as Aa,
  bb as mi,
  c5 as gi,
  xV as qs,
  cR as us,
  rm as fi,
  xW as hi,
  ru as Da,
  b8 as pi,
  xX as Ia,
  xY as xi,
  b_ as ms,
  d6 as Ci,
  xZ as We,
  rZ as K,
  rT as Ys,
  rS as Mt,
  B as Mi,
  c4 as Oa,
  x_ as bi,
  x$ as Ra,
  pH as Ba,
  y0 as ji,
  y1 as Fa,
  y2 as gs,
  y3 as ts,
  y4 as yi,
  y5 as vi,
  y6 as Si,
  y7 as ki,
  f7 as _,
  jA as wi,
  y8 as Ga,
  y9 as Ua,
  jz as Wa,
  ya as Ha,
  g4 as Ye,
  yb as Ni,
  yc as Va,
  gd as _i,
  uj as Li,
  yd as Pi,
  ye as Ei,
  yf as Ti,
  yg as Ai,
  yh as Di,
  yi as Ii,
  yj as Oi,
  yk as Ri,
  jg as Ka,
  yl as Bi,
  ym as Fi,
  yn as Gi,
  ad as Ui,
  cr as za,
  g7 as qa,
  cq as Wi,
  yo as Hi,
  yp as Vi,
  yq as Ki,
  g8 as Bt,
  ec as xt,
  e8 as fs,
  yr as Ya,
  lu as hs,
  ys as zi,
  pT as Za,
  eu as J,
  yt as qi,
  fz as Et,
  k as Yi,
  g5 as Zi,
  ce as $i,
  ci as Qi,
  cj as Xi,
  ei as Ji,
  hE as er,
  cw as tr,
  ah as $a,
  is as sr,
  b6 as ar,
  yu as wt,
  hT as nr,
  cK as or,
  bG as ir,
  f4 as je,
  f5 as F,
  dz as rr,
  k4 as lr,
  lJ as cr,
  pc as mt,
  s3 as Zs,
  bz as $s,
  by as dr,
  nn as ur,
  rP as mr,
  rR as gr,
  eH as Qa,
  fB as fr,
  rV as Tt,
  sJ as hr,
  fP as pr,
  rY as xr,
  rX as Cr,
  lH as Mr,
  lL as br,
  hN as jr,
  yv as yr,
  ju as Xa,
  c3 as ps,
  nk as vr,
  K as b,
  yw as me,
  rs as Sr,
  ae as kr,
  eF as xs,
  eG as wr,
  u$ as Ct,
  eJ as Ja,
  yx as Nr,
  fQ as _r,
  yy as Lr,
  yz as Yt,
  yA as Pr,
  yB as Er,
  yC as Tr,
  dg as Ar,
  js as A,
  kr as ss,
  eL as en,
  pD as Dr,
  ew as tn,
  yD as Ir,
  jp as Or,
  fJ as Rr,
  bf as Cs,
  jr as Br,
  jn as Fr,
  yE as sn,
  yF as an,
  fw as Gr,
  yG as Ur,
  yH as nn,
  yI as on,
  yJ as rn,
  fM as Wr,
  al as Hr,
  bg as Ue,
  bm as ln,
  aF as Vr,
  dM as Kr,
  aQ as zr,
  g_ as qr,
  i5 as Yr,
  i6 as Zr,
  be as Nt,
  A as $r,
  X as Qs,
  eM as Qr,
  bc as _t,
  yK as cn,
  i7 as X,
  j0 as Xr,
  fT as Jr,
  fU as el,
  bI as tl,
  eK as sl,
  yL as al,
  f6 as pe,
  yM as nl,
  ac as Me,
  yN as ol,
  z as il,
  mG as rl,
  bx as ll,
  yO as cl,
  j2 as dl,
} from "./bek4a02po1hapmml.js";
import { R as ul } from "./n0zy5hihoru8ixzo.js";
import { s as Xs, B as ml } from "./n5wgei6jvns1qnny.js";
import { c as gl } from "./kj3wube4rfsfjz3o.js";
import {
  P as dn,
  g as fl,
  a as hl,
  h as pl,
  b as xl,
  c as Cl,
  T as Ml,
  d as bl,
  e as jl,
  A as yl,
} from "./kswzrx27uwqy05k6.js";
import { u as vl, a as Sl, b as kl } from "./hxt6ipx4btplutlt.js";
import { u as wl, T as Nl, a as _l } from "./fwkkw36pcqc34uk8.js";
import { a as Ll } from "./fk5wemdfypmbezuh.js";
import { F as un, a as mn, b as gn } from "./k0g5mx2a360e3t03.js";
import { u as fn, a as Pl } from "./cn79txudvd0dt8pj.js";
import {
  e as nt,
  c as El,
  b as Tl,
  C as Al,
  G as Se,
  f as Ft,
  g as Gt,
  h as Ms,
  i as bs,
  p as Js,
  j as Dl,
  k as Il,
  l as hn,
  m as pn,
  n as Ol,
} from "./dh1349twprpizmeg.js";
import { I as ea } from "./e6pyvx0upv7c38ck.js";
import { u as Rl } from "./c2c6ge712gxzthdq.js";
import { S as Bl } from "./sh55tdaqi3q0eftk.js";
import { S as Fl } from "./on1lyzh70pwcvrke.js";
import { S as ta } from "./abdc4q71tykmepri.js";
import { g as Gl } from "./accwyue32xah1z1m.js";
import { M as Ul } from "./g4tl5lt9yqf20m4s.js";
import { G as Wl } from "./iamkd7uovamzrioo.js";
import "./jlt66buw1zajk9of.js";
import { u as Hl, M as Vl, a as Kl } from "./f9v02mlso09nmzyv.js";
import { g as zl } from "./bk8slwxjkdlmxjxm.js";
import "./e5qbxqli4yfx49qs.js";
import "./gfnsbm99dy8f9dle.js";
import "./gkp5860wafdf24mv.js";
import "./jwvxkjptpstk4ej7.js";
import "./pb0xfopp3f7joxj4.js";
import "./nbz4aahqzuixvvgr.js";
import "./h9gpyfg2x09960z7.js";
import "./enyrqi1ktf2s54c0.js";
import "./lrf6ki1gmwd89v2w.js";
import "./lzxg3bwvl23h3e8o.js";
import "./b2i1na1bcl7a79k3.js";
import "./jy5dxk25zw6hpymq.js";
import "./lt5u077njj9ud9u7.js";
import "./e59f7y6b0ew7ftb0.js";
import "./kweqtgafphozzl00.js";
import "./gzhfufyiohn83kuo.js";
import "./mrja6mbtdpn27l02.js";
function ql(t) {
  return Ee({
    queryKey: ["workspace", t, "owner_count"],
    queryFn: async () =>
      await O.safeGet("/accounts/{account_id}/users/owner_count", {
        parameters: { path: { account_id: t } },
      }),
  });
}
function Yl({ workspace: t }) {
  const s = k(),
    a = R(),
    n = pt(),
    [o, i] = d.useState(""),
    c = t.isOwnerOfAccount(),
    l = ql(t.id),
    { data: u } = ns(),
    [m, h] = d.useState(!1),
    [g, f] = d.useState(!1);
  if (!u) return null;
  const y = u.accountItems.find((P) => P.id != t.id),
    M = () => {
      oe.setLeaveWorkspaceData(null);
    },
    j = async () => {
      if (n != null) {
        f(!0);
        try {
          await O.safeDelete("/accounts/{account_id}/users/{user_id}", {
            parameters: { path: { account_id: t.id, user_id: n.id } },
          }),
            h(!0);
        } catch {
          a.danger(
            s.formatMessage({
              id: "leaveWorkspaceModal.leaveFailed",
              defaultMessage: "Failed to leave workspace",
            }),
          );
        }
        f(!1);
      }
    };
  if (m) return e.jsx(Ql, { workspace: t, fallbackWorkspace: y, onClose: M });
  if (!l.data) return e.jsx(Zl, { onClose: M });
  const w = l.data.total_count,
    x = l.data.owner_count;
  if (c && x < 2) return e.jsx($l, { workspace: t, onClose: M });
  const v = e.jsx(ee.Button, {
      onClick: () => {
        oe.setLeaveWorkspaceData(null);
      },
      title: s.formatMessage({
        id: "leaveWorkspaceModal.cancel",
        defaultMessage: "Cancel",
      }),
    }),
    S = e.jsx(ee.Button, {
      color: "danger",
      disabled:
        n == null || g || o == "" || o.toLowerCase() != n?.email?.toLowerCase(),
      title: s.formatMessage({
        id: "leaveWorkspaceModal.leaveButton",
        defaultMessage: "Leave workspace",
      }),
      onClick: () => {
        j();
      },
    }),
    L = s.formatMessage({
      id: "leaveWorkspaceModal.enterEmailToConfirm",
      defaultMessage: "Leave Workspace - Enter your email to confirm",
    });
  return e.jsx(B, {
    testId: "modal-leave-workspace",
    isOpen: !0,
    onClose: M,
    showCloseButton: !0,
    type: "danger",
    title: s.formatMessage(
      {
        id: "leaveWorkspaceModal.leaveWorkspace",
        defaultMessage: "Leave the {workspaceName} workspace",
      },
      { workspaceName: t.data.name },
    ),
    primaryButton: S,
    secondaryButton: v,
    children: e.jsxs("div", {
      className: "flex flex-col gap-5",
      children: [
        e.jsxs("div", {
          className: "flex flex-row gap-3",
          children: [
            e.jsx(Zo, { size: "large", src: t.data.profilePictureUrl }),
            e.jsxs("div", {
              className: "flex flex-col justify-around",
              children: [
                e.jsx("div", {
                  className: "text-base font-semibold",
                  children: t.data.name,
                }),
                e.jsx("div", {
                  className: "text-token-text-tertiary text-sm",
                  children: e.jsx(r, {
                    id: "leaveWorkspaceModal.memberCount",
                    defaultMessage: `{memberCount, plural,
                  one {1 member}
                  other {{memberCount} members}
                }`,
                    values: { memberCount: w },
                  }),
                }),
              ],
            }),
          ],
        }),
        e.jsxs("div", {
          children: [
            e.jsx("h3", {
              className: "mb-2 text-base font-semibold",
              children: e.jsx(r, {
                id: "leaveWorkspaceModal.leaveAreYouSure",
                defaultMessage: "Are you sure?",
              }),
            }),
            e.jsxs("ul", {
              className: "text-token-text-secondary ms-3 list-disc text-sm",
              children: [
                e.jsx("li", {
                  className: "mb-2",
                  children: e.jsx(r, {
                    id: "leaveWorkspaceModal.leaveWorkspaceWarning1",
                    defaultMessage:
                      "This will remove you from your workspace and you won't be able to access all data, including profile, settings, and chat history.",
                  }),
                }),
                e.jsx("li", {
                  children: e.jsx(r, {
                    id: "leaveWorkspaceModal.leaveWorkspaceWarning2",
                    defaultMessage:
                      "You will lose access to all channels and messages in this workspace.",
                  }),
                }),
              ],
            }),
          ],
        }),
        e.jsxs("div", {
          children: [
            e.jsx("h3", {
              className: "mb-2 text-base font-semibold",
              children: L,
            }),
            e.jsx(Lt, {
              ariaLabel: L,
              name: "typeEmailConfirm",
              placeholder: "abcd@acme.com",
              value: o,
              onChange: (P) => {
                i(P.target.value);
              },
            }),
          ],
        }),
      ],
    }),
  });
}
function Zl({ onClose: t }) {
  return e.jsx(B, {
    testId: "modal-empty-loading",
    isOpen: !0,
    onClose: t,
    showCloseButton: !0,
    type: "warning",
    children: e.jsx("div", {
      className: "flex flex-row justify-center",
      children: e.jsx(te, {}),
    }),
  });
}
function $l({ workspace: t, onClose: s }) {
  const a = k(),
    n = e.jsx(ee.Button, {
      onClick: () => {
        oe.setLeaveWorkspaceData(null);
      },
      title: a.formatMessage({
        id: "leaveWorkspaceModal.ok",
        defaultMessage: "OK",
      }),
    });
  return e.jsx(B, {
    testId: "modal-cant-leave-workspace",
    isOpen: !0,
    onClose: s,
    showCloseButton: !0,
    type: "danger",
    title: a.formatMessage(
      {
        id: "leaveWorkspaceModal.cantLeaveWorkspace",
        defaultMessage: "Couldn't leave the {workspaceName} workspace",
      },
      { workspaceName: t.data.name },
    ),
    secondaryButton: n,
    children: e.jsx(r, {
      id: "leaveWorkspaceModal.lastOwnerWarning",
      defaultMessage:
        "Because you're the only owner in the {workspaceName} workspace, assign the owner role to another member before leaving.",
      values: { workspaceName: t.data.name },
    }),
  });
}
function Ql({ workspace: t, fallbackWorkspace: s, onClose: a }) {
  const n = fe(),
    o = k(),
    i = R(),
    c = lt((h) => h.currentWorkspace),
    l = Rt(),
    u = () => {
      if (s != null && c)
        if ((oe.setLeaveWorkspaceData(null), c.id == t.id)) {
          const { willRedirect: h } = jo(n, s.id, l, o, i);
          h || Gs();
        } else n.invalidateQueries({ queryKey: ["account-status"] });
      else
        oe.setLeaveWorkspaceData(null),
          _e.deleteCookie(Le.Workspace),
          _e.deleteCookie(Le.WorkspaceResidencyRegion),
          Gs();
      a();
    },
    m =
      s != null
        ? e.jsx(ee.Button, {
            color: "primary",
            onClick: u,
            title: o.formatMessage({
              id: "leaveWorkspaceModal.done",
              defaultMessage: "Done",
            }),
          })
        : e.jsx(ee.Button, {
            color: "primary",
            onClick: u,
            title: o.formatMessage({
              id: "leaveWorkspaceModal.startPersonalAccount",
              defaultMessage: "Start using ChatGPT for free",
            }),
          });
  return e.jsx(B, {
    testId: "modal-left-workspace",
    isOpen: !0,
    onClose: u,
    primaryButton: m,
    type: "success",
    title: o.formatMessage(
      {
        id: "leaveWorkspaceModal.leftWorkspaceTitle",
        defaultMessage: "Successfully left the {workspaceName} workspace",
      },
      { workspaceName: t.data.name },
    ),
    children: e.jsx("div", {
      className: "flex flex-col gap-5",
      children: e.jsx("p", {
        children:
          s != null
            ? e.jsx(r, {
                id: "leaveWorkspaceModal.leftWorkspaceDescription",
                defaultMessage:
                  "You have successfully left the {workspaceName} workspace.",
                values: { workspaceName: t.data.name },
              })
            : e.jsx(r, {
                id: "leaveWorkspaceModal.leftWorkspaceDescriptionNoOtherWorkspaces",
                defaultMessage:
                  "You have successfully left the {workspaceName} workspace. This will create your personal workspace automatically.",
                values: { workspaceName: t.data.name },
              }),
      }),
    }),
  });
}
function xn(t) {
  return !t ||
    !t.attachments ||
    t.attachments.length === 0 ||
    t.attachments[0].kind !== "deep_research"
    ? null
    : {
        permissions: t.permissions.share_setting ?? "public",
        postId: t.id,
        messages: t.attachments[0].messages,
      };
}
const Xl = "https://chatgpt.com/s/";
function Zt(t) {
  return `${Xl}${t}`;
}
function rt(t) {
  return ["research", "result", "share", t];
}
const Jl = "https://chatgpt.com/post/...";
function ec({
  taskId: t,
  isLoading: s,
  sharedResearchResult: a,
  title: n,
  serverThreadId: o,
}) {
  const [i, c] = d.useState(!1),
    l = (x, v) => {
      x &&
        cs(x, void 0, v)
          .then(() => {
            c(!0),
              setTimeout(() => {
                c(!1);
              }, 1500);
          })
          .catch(() => {});
    },
    u = fe(),
    m = R(),
    { mutate: h, isPending: g } = de({
      scope: { id: t },
      mutationFn: async (x) => {
        const v = await O.safePost("/share/post", {
          requestBody: {
            attachments_to_create: [
              { kind: "deep_research", conversation_id: o, task_id: x },
            ],
          },
        });
        return xn(v.post);
      },
      onSuccess: (x) => {
        if (!x) {
          m.danger("Failed to create share link");
          return;
        }
        u.setQueryData(rt(t), x), l(Zt(x.postId));
      },
    }),
    { mutate: f } = de({
      scope: { id: a?.postId ?? "" },
      mutationFn: async ({ sharedResearchResultId: x, access: v }) =>
        (
          await O.safePost("/share/post/update_access", {
            requestBody: { post_id: x, share_settings: v },
          })
        ).share_setting,
      onMutate: ({ access: x }) => {
        const v = rt(t),
          S = u.getQueryData(v);
        return (
          u.setQueryData(v, S && { ...S, permissions: x }),
          { previousAccess: S?.permissions }
        );
      },
      onSuccess: (x) => {
        const v = rt(t),
          S = u.getQueryData(v);
        S && u.setQueryData(v, { ...S, permissions: x });
      },
      onError: (x, v, S) => {
        const L = rt(t),
          P = u.getQueryData(L);
        u.setQueryData(
          L,
          P && { ...P, permissions: S?.previousAccess ?? "public" },
        );
      },
    }),
    p = d.useRef(null),
    y = (x) => {
      p.current?.focus(), a ? l(Zt(a.postId), x) : h(t);
    },
    M = (x) => {
      a && f({ sharedResearchResultId: a.postId, access: x });
    },
    j = a ? Zt(a.postId) : void 0,
    w = (x) => {
      switch (x) {
        case "public":
          return qt.PUBLIC;
        case "private":
          return qt.PRIVATE;
        case "workspace":
          return qt.WORKSPACE;
      }
    };
  return e.jsx(ml, {
    inputRef: p,
    isLoading: s,
    isPublishedVersionLatest: !0,
    sharedObject: a && { id: a.postId, title: n, access: w(a.permissions) },
    title: n,
    shareTextPlaceholder: Jl,
    shareUrl: j,
    isCopySuccessful: i,
    isCreateLinkRequestInProgress: g,
    handlePrivacyChange: M,
    handlePrimaryButtonClick: y,
  });
}
function tc({ taskId: t, isDisabled: s, title: a, threadId: n }) {
  const o = at(),
    i = k(),
    c = yo(n),
    { data: l, isLoading: u } = Ee({
      enabled: !!t && !s,
      queryKey: rt(t),
      queryFn: async () => {
        if (!c) return null;
        const M = await O.safeGet("/share/post/by_research_task/{task_id}", {
          parameters: { path: { task_id: t } },
        });
        return M.post ? xn(M.post) : null;
      },
    }),
    [m, h] = d.useState(!1),
    { triggerRef: g, container: f } = $o({ isOpen: m, onClose: () => h(!1) }),
    p =
      o?.isWorkspaceAccount() && !o?.features.includes(ya.WorkspaceShareLinks);
  if (s || p || !c)
    return e.jsx(we, {
      label: p
        ? i.formatMessage(Xs.workspaceSharingDisabled)
        : i.formatMessage(Xs.share),
      children: e.jsx(Qo, { disabled: !0, icon: dt }),
    });
  const y = ({ className: M }) =>
    e.jsxs("div", {
      className: "relative h-fit w-fit",
      children: [
        e.jsx(dt, { className: M }),
        l &&
          e.jsx("div", {
            className: "absolute end-0 top-[1px] flex items-center gap-1.5",
            children: e.jsx("div", { className: "h-1.5 w-1.5 rounded-full" }),
          }),
      ],
    });
  return e.jsxs(Xo, {
    open: m,
    onOpenChange: h,
    children: [
      e.jsx(Jo, {
        ref: g,
        asChild: !0,
        children: e.jsxs(N, {
          children: [
            e.jsx(y, { className: "me-1 h-4 w-4" }),
            e.jsx(r, { id: "vaZOk/", defaultMessage: "Share Link" }),
          ],
        }),
      }),
      e.jsx(Ea, {
        children:
          m &&
          e.jsx(ei, {
            forceMount: !0,
            container: f,
            children: e.jsx(ti, {
              align: "end",
              className: "z-50",
              sideOffset: 8,
              collisionPadding: 8,
              children: e.jsx(ec, {
                title: a,
                taskId: t,
                sharedResearchResult: l,
                isLoading: u,
                serverThreadId: c,
              }),
            }),
          }),
      }),
    ],
  });
}
function sc(t) {
  if (!t) return null;
  let s = t.match(/filename\*\s*=\s*([^;]+)/i);
  if (s && s[1]) {
    const a = s[1].trim(),
      n = a.split("''");
    if (n.length === 2)
      try {
        return decodeURIComponent(n[1]);
      } catch {
        return n[1];
      }
    return a;
  }
  return (s = t.match(/filename="?([^"]+)"?/)), s && s[1] ? s[1] : null;
}
const ac = ({ messages: t, threadId: s, taskId: a }) => {
  const [n, o] = d.useState(!0),
    i = d.useRef(null),
    c = vo(s),
    l = So(t),
    [u, m] = d.useState(!1),
    h = R(),
    { value: g } = Ce("3930843960"),
    f = async () => {
      if (l) {
        if (!c) {
          h.warning("Failed to download PDF. Please try refreshing the page."),
            T.logEventWithStatsig(
              "Deep Research Export Missing serverThreadId",
              "deep_research_export_missing_serverthreadid",
            );
          return;
        }
        m(!0);
        try {
          const j = await O.safePost("/export_doc/deep_research", {
            requestBody: { conversation_id: c, message_id: l.id },
            skipJsonTransform: !0,
          });
          if (!j.ok)
            throw (
              (j.status >= 400 &&
                j.status < 600 &&
                h.danger("Failed to download PDF. Please try again later."),
              new Error("Failed to download PDF"))
            );
          const w = await j.blob(),
            x = j.headers.get("Content-Disposition"),
            v = sc(x) ?? "ChatGPT Deep Research.pdf",
            S = window.URL.createObjectURL(w),
            L = document.createElement("a");
          (L.href = S),
            L.setAttribute("download", v),
            document.body.appendChild(L),
            L.click(),
            document.body.removeChild(L),
            window.URL.revokeObjectURL(S);
        } catch (j) {
          le.addError(j);
        } finally {
          m(!1);
        }
      }
    },
    p = () => {
      o(!1),
        (i.current = setTimeout(() => {
          ri.setResearchShareIntent(null);
        }, 400));
    },
    y = l?.metadata?.async_task_title,
    M = si();
  return y
    ? e.jsx(Ea, {
        children: e.jsx(ee.Root, {
          isOpen: n,
          onClose: p,
          className: "container",
          testId: "modal-deep-research-share",
          children: e.jsx(ee.Overlay, {
            showBackground: !0,
            children: e.jsx(ee.Content, {
              size: "normal",
              className:
                "flex max-w-4xl flex-col bg-transparent focus:outline-hidden",
              children: e.jsxs(zo.div, {
                initial: { y: "100%", opacity: 0 },
                animate: { y: 0, opacity: 1 },
                exit: { y: "100%", opacity: 0 },
                transition: M ? ai : ni,
                className:
                  "bg-token-main-surface-primary flex max-w-4xl flex-col overflow-x-scroll rounded-lg focus:outline-hidden",
                children: [
                  e.jsx(ee.Header, {
                    type: "success",
                    title: e.jsx("p", {
                      className: "text-token-text-primary ps-2",
                      children: e.jsx(r, {
                        id: "pV8JSS",
                        defaultMessage: "Preview",
                      }),
                    }),
                    closeButtonSide: "left",
                    accessory: e.jsxs(e.Fragment, {
                      children: [
                        g &&
                          c !== void 0 &&
                          e.jsx(N, {
                            onClick: f,
                            disabled: u,
                            loading: u,
                            color: "secondary",
                            icon: oi,
                            children: e.jsx(r, {
                              id: "deep-research.generate-pdf",
                              defaultMessage: "Download PDF",
                            }),
                          }),
                        e.jsx(tc, {
                          taskId: a,
                          isDisabled: !1,
                          title: y,
                          threadId: s,
                        }),
                      ],
                    }),
                    closeButton: e.jsx(va, { onClick: p, iconSize: "lg" }),
                  }),
                  e.jsx("div", {
                    className:
                      "@container/thread flex min-w-0 flex-col gap-4 px-12 py-8",
                    children: e.jsx(ii, {
                      clientThreadId: s,
                      children: e.jsx(ul, { messages: t, threadId: s }),
                    }),
                  }),
                ],
              }),
            }),
          }),
        }),
      })
    : null;
};
function nc() {
  const t = k(),
    s = ut((n) => n.activeModals.has(ce.AgeVerificationInterstitial));
  return e.jsxs(B, {
    testId: "modal-age-verification-interstitial",
    type: "success",
    isOpen: s,
    onClose: Sa,
    title: t.formatMessage(be.title),
    children: [
      e.jsxs("div", {
        className: "text-token-text-secondary",
        children: [
          e.jsx("p", {
            className: "mb-4",
            children: e.jsx(r, { ...be.description0 }),
          }),
          e.jsx(sa, { children: e.jsx(r, { ...be.subtitle1 }) }),
          e.jsxs("ol", {
            className: "ms-4 mb-4 list-decimal",
            children: [
              e.jsx("li", {
                className: "",
                children: e.jsx(r, { ...be.description1Bullet1 }),
              }),
              e.jsx("li", {
                children: e.jsx(r, { ...be.description1Bullet2 }),
              }),
            ],
          }),
          e.jsx("p", {
            className: "mb-4 font-semibold",
            children: e.jsx(r, { ...be.description1a }),
          }),
          e.jsx("p", {
            className: "mb-4",
            children: e.jsx(r, { ...be.description1b }),
          }),
          e.jsx(sa, { children: e.jsx(r, { ...be.subtitle2 }) }),
          e.jsx("p", {
            className: "mb-4",
            children: e.jsx(r, {
              ...be.description2,
              values: {
                learnMoreLink: (n) =>
                  e.jsx("a", {
                    href: "https://help.openai.com/en/articles/8411987-why-am-i-being-asked-to-verify-my-age",
                    target: "_blank",
                    rel: "noreferrer",
                    className: "cursor-pointer font-normal underline",
                    children: n,
                  }),
              },
            }),
          }),
        ],
      }),
      e.jsx("div", {
        className: "mt-4 flex justify-center",
        children: e.jsx(N, {
          color: "primary",
          as: "link",
          to: "https://platform.openai.com/verify-age",
          openNewTab: !0,
          onClick: () => oe.closeModal(ce.AgeVerificationInterstitial),
          icon: ds,
          children: e.jsx(r, { ...be.redirect }),
        }),
      }),
    ],
  });
}
const sa = se.h3`text-token-text-primary text-base mb-1`,
  be = D({
    title: {
      id: "AgeVerificationInterstitial.title",
      defaultMessage: "Please verify your age",
    },
    redirect: {
      id: "AgeVerificationInterstitial.redirect",
      defaultMessage: "Sign in on platform.openai.com",
    },
    description0: {
      id: "AgeVerificationInterstitial.description0",
      defaultMessage:
        "To continue using ChatGPT, you need to complete a brief age verification check",
    },
    subtitle1: {
      id: "AgeVerificationInterstitial.title1",
      defaultMessage: "What will happen next?",
    },
    description1Bullet1: {
      id: "AgeVerificationInterstitial.description1",
      defaultMessage:
        "You will be redirected to platform.openai.com where you will need to sign in.",
    },
    description1Bullet2: {
      id: "AgeVerificationInterstitial.description2",
      defaultMessage:
        "You will then be redirected to Yoti, our age verification provider, to verify your age.",
    },
    description1a: {
      id: "AgeVerificationInterstitial.description1a",
      defaultMessage:
        "If you are between the ages of 13 and 17, your parent or guardian must complete the age verification check on your behalf.",
    },
    description1b: {
      id: "AgeVerificationInterstitial.description1b",
      defaultMessage: "The process is quick and secure.",
    },
    subtitle2: {
      id: "AgeVerificationInterstitial.title2",
      defaultMessage: "Why do I need to do this?",
    },
    description2: {
      id: "AgeVerificationInterstitial.description2-v3",
      defaultMessage:
        "We are required to verify that our users in Italy are old enough to use ChatGPT. <learnMoreLink>Learn more</learnMoreLink>.",
    },
  });
function oc() {
  return Pt(ce.CookieManagement)
    ? e.jsx(ic, {
        onClose: () => {
          oe.closeModal(ce.CookieManagement);
        },
      })
    : null;
}
function ic({ onClose: t }) {
  const s = k(),
    a = R(),
    { isUnauthenticated: n } = gt(),
    { data: o } = li(),
    i = o?.serverPrimedAllowBrowserStorageValue ?? !1,
    c = o?.isStorageComplianceEnabled ?? !1,
    l = ci({ serverPrimedAllowBrowserStorageValue: i, enabled: c && !n }),
    [u, m] = d.useState(i),
    h = n ? u : l,
    g = (p) => {
      _e.setBooleanCookie(Le.AllowNonessential, p, { maxAge: ui, domain: ko }),
        n
          ? m(p)
          : f.mutateAsync(
              { analytics_cookies_accepted: p },
              {
                onSuccess() {
                  a.success(s.formatMessage(ue.updateSuccess));
                },
                onError() {
                  a.danger(s.formatMessage(ue.updateFailure));
                },
              },
            );
    };
  d.useEffect(() => {
    if (n) {
      const p = _e.getBooleanCookie(Le.AllowNonessential) ?? i;
      m(p);
    }
  }, [n, i]),
    d.useEffect(() => {
      le.addAction("privacy_policy.show_manage_cookies_modal");
    }, []);
  const f = di();
  return e.jsx(B, {
    testId: "modal-manage-cookies",
    type: "success",
    isOpen: !0,
    onClose: t,
    title: s.formatMessage(ue.title),
    showCloseButton: !0,
    children: e.jsxs("div", {
      className: "text-token-text-secondary text-sm",
      children: [
        e.jsx(r, {
          ...ue.description,
          values: {
            cookiePolicy: (p) =>
              e.jsx("a", {
                className: "underline",
                href: "https://openai.com/policies/privacy-policy",
                children: p,
              }),
          },
        }),
        e.jsxs(aa, {
          children: [
            e.jsxs(na, {
              children: [
                e.jsx(oa, { children: s.formatMessage(ue.preference1title) }),
                e.jsx(ia, { children: s.formatMessage(ue.preference1desc) }),
              ],
            }),
            e.jsx(es, {
              onChange: Sa,
              enabled: !0,
              disabled: !0,
              label: s.formatMessage(ue.preference1toggle),
            }),
          ],
        }),
        e.jsxs(aa, {
          children: [
            e.jsxs(na, {
              children: [
                e.jsx(oa, { children: s.formatMessage(ue.preference2title) }),
                e.jsx(ia, { children: s.formatMessage(ue.preference2desc) }),
              ],
            }),
            e.jsx(es, {
              onChange: g,
              enabled: !!h,
              label: s.formatMessage(ue.preference2toggle),
            }),
          ],
        }),
        e.jsxs("div", {
          className:
            "flex justify-end gap-3 border-t border-black/10 pt-4 dark:border-white/10",
          children: [
            e.jsx(N, {
              color: "secondary",
              onClick: () => g(!1),
              children: e.jsx(r, { ...ue.reject }),
            }),
            e.jsx(N, {
              color: "secondary",
              onClick: () => g(!0),
              children: e.jsx(r, { ...ue.accept }),
            }),
          ],
        }),
      ],
    }),
  });
}
const aa = se.div`flex gap-4 border-t last:border-b border-black/10 dark:border-white/10 py-4 mt-4 text-token-text-secondary`,
  na = se.div`flex gap-2 flex-col `,
  oa = se.p`font-semibold text-sm text-token-text-primary`,
  ia = se.p`text-xs`,
  ue = D({
    title: { id: "ManageCookiesModal.title", defaultMessage: "Manage cookies" },
    description: {
      id: "ManageCookiesModal.description",
      defaultMessage:
        "OpenAI uses cookies to improve your experience and analyze site traffic. For more information, read our <cookiePolicy>cookie policy</cookiePolicy>.",
    },
    preference1title: {
      id: "ManageCookiesModal.preference1title",
      defaultMessage: "Essential",
    },
    preference1desc: {
      id: "ManageCookiesModal.preference1desc.0",
      defaultMessage:
        "These cookies are required to operate our Services. For example, they allow us to authenticate users or enable specific features within the Services, including for security purposes.",
    },
    preference1toggle: {
      id: "ManageCookiesModal.preference1toggle",
      defaultMessage: "Allow essential cookies",
    },
    preference2title: {
      id: "ManageCookiesModal.preference2title",
      defaultMessage: "Analytics",
    },
    preference2desc: {
      id: "ManageCookiesModal.preference2desc.0",
      defaultMessage:
        "These cookies help us analyze and understand how our Services perform and are used, such as the number of users, how they interact with our Services, and time spent using the Services.",
    },
    preference2toggle: {
      id: "ManageCookiesModal.preference2toggle",
      defaultMessage: "Allow analytics cookies",
    },
    reject: { id: "ManageCookiesModal.reject", defaultMessage: "Reject all" },
    accept: { id: "ManageCookiesModal.accept", defaultMessage: "Accept all" },
    updateSuccess: {
      id: "ManageCookiesModal.updateSuccess",
      defaultMessage: "Your cookie preferences were updated successfully",
    },
    updateFailure: {
      id: "ManageCookiesModal.updateFailure",
      defaultMessage: "Unable to update cookie preferences. Try again later.",
    },
  }),
  rc = () => {
    const t = pt(),
      s = t?.email ?? t?.phone_number,
      a = ut((o) => o.activeModals.has(ce.LogoutConfirm)),
      n = () => {
        oe.closeModal(ce.LogoutConfirm);
      };
    return e.jsx(B, {
      testId: "modal-logout-confirm",
      isOpen: a,
      onClose: n,
      showCloseButton: !1,
      type: "warning",
      noPadding: !0,
      size: "custom",
      className: "max-w-[373px] sm:max-w-[400px]",
      position: "center",
      children: e.jsxs("div", {
        className:
          "flex flex-col items-center justify-center px-6 py-8 sm:p-10",
        children: [
          e.jsx("p", {
            className: "text-center text-2xl font-semibold text-balance",
            children: e.jsx(r, { ...bt.logoutTitle }),
          }),
          e.jsx("p", {
            className:
              "text-token-text-secondary mt-4 mb-6 text-center text-lg",
            children:
              s &&
              e.jsx(r, { ...bt.logoutConfirm, values: { emailOrPhone: s } }),
          }),
          e.jsx(N, {
            as: "button",
            size: "large",
            color: "primary",
            fullWidth: !0,
            className: "mb-2 sm:mb-3",
            "data-testid": "logout-confirm-button",
            onClick: ct,
            children: e.jsx(r, { ...bt.logoutConfirmButton }),
          }),
          e.jsx(N, {
            as: "button",
            size: "large",
            color: "secondary",
            fullWidth: !0,
            onClick: n,
            children: e.jsx(r, { ...bt.cancel }),
          }),
        ],
      }),
    });
  },
  bt = D({
    logoutTitle: {
      id: "biVnvR",
      defaultMessage: "Are you sure you want to log out?",
    },
    logoutConfirm: {
      id: "2aSIBu",
      defaultMessage: "Log out of ChatGPT as {emailOrPhone}?",
    },
    logoutConfirmButton: { id: "NeO/CC", defaultMessage: "Log out" },
    cancel: { id: "EORcAJ", defaultMessage: "Cancel" },
  }),
  lc = "https://cdn.oaistatic.com/assets/team-upsell-mjqpjoww.webp",
  cc = { src: lc },
  Cn = (t) =>
    d.createElement(
      "svg",
      {
        width: 24,
        height: 24,
        viewBox: "0 0 24 24",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        ...t,
      },
      d.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M2 7C2 5.34315 3.34315 4 5 4H19C20.6569 4 22 5.34315 22 7V17C22 18.6569 20.6569 20 19 20H5C3.34315 20 2 18.6569 2 17V7ZM4.26834 6.31832L11.4233 11.3689C11.769 11.6129 12.231 11.6129 12.5767 11.3689L19.7317 6.31832C19.5491 6.12247 19.2889 6 19 6H5C4.71114 6 4.45089 6.12247 4.26834 6.31832ZM20 8.57698L13.7301 13.0028C12.6929 13.735 11.3071 13.735 10.2699 13.0028L4 8.57698V17C4 17.5523 4.44772 18 5 18H19C19.5523 18 20 17.5523 20 17V8.57698Z",
        fill: "currentColor",
      }),
    ),
  dc = (t) =>
    d.createElement(
      "svg",
      {
        width: 24,
        height: 24,
        viewBox: "0 0 25 24",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        ...t,
      },
      d.createElement("path", {
        d: "M20.5909 7.2368C19.8969 7.66168 19.3221 8.25568 18.9202 8.96321C18.5183 9.67075 18.3025 10.4687 18.2929 11.2823C18.2957 12.1981 18.567 13.0929 19.0733 13.856C19.5796 14.6191 20.2986 15.2169 21.1413 15.5754C20.809 16.6474 20.3173 17.6632 19.6827 18.5888C18.7746 19.8961 17.825 21.2032 16.3803 21.2032C14.9355 21.2032 14.564 20.3638 12.899 20.3638C11.2753 20.3638 10.6974 21.2308 9.37637 21.2308C8.0554 21.2308 7.13358 20.0198 6.074 18.5338C4.67437 16.452 3.90515 14.0106 3.85864 11.5024C3.85864 7.37443 6.5419 5.18665 9.18372 5.18665C10.5873 5.18665 11.7569 6.10847 12.6376 6.10847C13.4769 6.10847 14.7842 5.1315 16.3803 5.1315C17.2009 5.11032 18.0142 5.29127 18.7485 5.6584C19.4827 6.02553 20.1154 6.56757 20.5909 7.2368ZM15.6235 3.38405C16.3271 2.55637 16.7254 1.51233 16.7519 0.426336C16.7531 0.28317 16.7392 0.140275 16.7106 0C15.502 0.11806 14.3844 0.694096 13.587 1.60995C12.8766 2.40465 12.4633 3.42081 12.4174 4.48573C12.4179 4.61524 12.4317 4.74435 12.4587 4.87103C12.5539 4.88904 12.6507 4.89827 12.7476 4.89861C13.3046 4.85429 13.8468 4.69717 14.3412 4.4368C14.8356 4.17644 15.2719 3.81826 15.6235 3.38405Z",
        fill: "currentColor",
      }),
    ),
  uc = (t) =>
    d.createElement(
      "svg",
      {
        width: 25,
        height: 24,
        viewBox: "0 0 25 24",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        ...t,
      },
      d.createElement("path", {
        d: "M21.5461 12.2099C21.5461 11.5553 21.4874 10.926 21.3783 10.3218H12.6846V13.8966H17.6524C17.4342 15.0463 16.7797 16.0197 15.7979 16.6742V18.9987H18.7937C20.5391 17.3875 21.5461 15.0211 21.5461 12.2099Z",
        fill: "#4285F4",
      }),
      d.createElement("path", {
        d: "M12.6847 21.2307C15.177 21.2307 17.2665 20.4084 18.7938 18.9986L15.798 16.6741C14.9756 17.2279 13.9266 17.5636 12.6847 17.5636C10.2847 17.5636 8.24549 15.944 7.51542 13.7622H4.44409V16.1454C5.96297 19.158 9.07626 21.2307 12.6847 21.2307Z",
        fill: "#34A853",
      }),
      d.createElement("path", {
        d: "M7.5154 13.754C7.33078 13.2001 7.22169 12.6127 7.22169 12.0001C7.22169 11.3875 7.33078 10.8001 7.5154 10.2463V7.86304H4.44407C3.8147 9.105 3.45386 10.5064 3.45386 12.0001C3.45386 13.4938 3.8147 14.8952 4.44407 16.1372L6.83568 14.2742L7.5154 13.754Z",
        fill: "#FBBC05",
      }),
      d.createElement("path", {
        d: "M12.6847 6.44482C14.0441 6.44482 15.2525 6.91475 16.2175 7.82104L18.8609 5.17768C17.2581 3.68397 15.177 2.76929 12.6847 2.76929C9.07626 2.76929 5.96297 4.84202 4.44409 7.863L7.51542 10.2462C8.24549 8.0644 10.2847 6.44482 12.6847 6.44482Z",
        fill: "#EA4335",
      }),
    ),
  mc = (t) =>
    d.createElement(
      "svg",
      {
        width: 24,
        height: 24,
        viewBox: "0 0 24 24",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        ...t,
      },
      d.createElement("path", {
        d: "M3.25 3.25H11.25V11.25H3.25V3.25Z",
        fill: "#F35325",
      }),
      d.createElement("path", {
        d: "M12.75 3.25H20.75V11.25H12.75V3.25Z",
        fill: "#81BC06",
      }),
      d.createElement("path", {
        d: "M3.25 12.75H11.25V20.75H3.25V12.75Z",
        fill: "#05A6F0",
      }),
      d.createElement("path", {
        d: "M12.75 12.75H20.75V20.75H12.75V12.75Z",
        fill: "#FFBA08",
      }),
    ),
  gc = (t) =>
    d.createElement(
      "svg",
      {
        width: 20,
        height: 20,
        viewBox: "0 0 20 20",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        ...t,
      },
      d.createElement("path", {
        d: "M12.0394 5.92117C12.451 6.12699 12.6179 6.62755 12.412 7.0392L9.07871 13.7059C8.87289 14.1175 8.37232 14.2844 7.96068 14.0785C7.54903 13.8727 7.38217 13.3722 7.588 12.9605L10.9213 6.29385C11.1272 5.8822 11.6277 5.71534 12.0394 5.92117ZM5.50002 5.99986C5.86821 6.276 5.94283 6.79833 5.66669 7.16652L3.54169 9.99986L5.66669 12.8332C5.94283 13.2014 5.86821 13.7237 5.50002 13.9999C5.13183 14.276 4.6095 14.2014 4.33335 13.8332L1.83335 10.4999C1.61113 10.2036 1.61113 9.79615 1.83335 9.49986L4.33335 6.16652C4.6095 5.79833 5.13183 5.72371 5.50002 5.99986ZM14.5 5.99986C14.8682 5.72371 15.3905 5.79833 15.6667 6.16652L18.1667 9.49986C18.3889 9.79615 18.3889 10.2036 18.1667 10.4999L15.6667 13.8332C15.3905 14.2014 14.8682 14.276 14.5 13.9999C14.1318 13.7237 14.0572 13.2014 14.3334 12.8332L16.4584 9.99986L14.3334 7.16652C14.0572 6.79833 14.1318 6.276 14.5 5.99986Z",
        fill: "currentColor",
      }),
    ),
  fc = (t) =>
    d.createElement(
      "svg",
      {
        width: 20,
        height: 20,
        viewBox: "0 0 20 20",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        ...t,
      },
      d.createElement("path", {
        d: "M10 5.83366C9.30964 5.83366 8.75 6.3933 8.75 7.08366C8.75 7.77401 9.30964 8.33366 10 8.33366C10.6904 8.33366 11.25 7.77401 11.25 7.08366C11.25 6.3933 10.6904 5.83366 10 5.83366ZM7.08333 7.08366C7.08333 5.47283 8.38917 4.16699 10 4.16699C11.6108 4.16699 12.9167 5.47283 12.9167 7.08366C12.9167 8.69449 11.6108 10.0003 10 10.0003C8.38917 10.0003 7.08333 8.69449 7.08333 7.08366ZM3.33333 7.08366C2.8731 7.08366 2.5 7.45675 2.5 7.91699C2.5 8.37723 2.8731 8.75033 3.33333 8.75033C3.79357 8.75033 4.16667 8.37723 4.16667 7.91699C4.16667 7.45675 3.79357 7.08366 3.33333 7.08366ZM0.833333 7.91699C0.833333 6.53628 1.95262 5.41699 3.33333 5.41699C4.71405 5.41699 5.83333 6.53628 5.83333 7.91699C5.83333 9.2977 4.71405 10.417 3.33333 10.417C1.95262 10.417 0.833333 9.2977 0.833333 7.91699ZM16.6667 7.08366C16.2064 7.08366 15.8333 7.45675 15.8333 7.91699C15.8333 8.37723 16.2064 8.75033 16.6667 8.75033C17.1269 8.75033 17.5 8.37723 17.5 7.91699C17.5 7.45675 17.1269 7.08366 16.6667 7.08366ZM14.1667 7.91699C14.1667 6.53628 15.286 5.41699 16.6667 5.41699C18.0474 5.41699 19.1667 6.53628 19.1667 7.91699C19.1667 9.2977 18.0474 10.417 16.6667 10.417C15.286 10.417 14.1667 9.2977 14.1667 7.91699ZM7.61835 13.1795C7.03179 13.5966 6.66667 14.1884 6.66667 15.0003C6.66667 15.4606 6.29357 15.8337 5.83333 15.8337C5.3731 15.8337 5 15.4606 5 15.0003C5 13.59 5.67655 12.5152 6.65248 11.8212C7.60363 11.1448 8.82436 10.8337 10 10.8337C11.1756 10.8337 12.3964 11.1448 13.3475 11.8212C14.3235 12.5152 15 13.59 15 15.0003C15 15.4606 14.6269 15.8337 14.1667 15.8337C13.7064 15.8337 13.3333 15.4606 13.3333 15.0003C13.3333 14.1884 12.9682 13.5966 12.3816 13.1795C11.7703 12.7447 10.9077 12.5003 10 12.5003C9.0923 12.5003 8.2297 12.7447 7.61835 13.1795ZM4.15374 11.9375C4.23449 12.3906 3.93263 12.8233 3.47953 12.9041C2.32437 13.1099 1.66667 13.7389 1.66667 14.5837C1.66667 15.0439 1.29357 15.417 0.833333 15.417C0.373096 15.417 0 15.0439 0 14.5837C0 12.5752 1.6483 11.5375 3.18713 11.2633C3.64023 11.1825 4.073 11.4844 4.15374 11.9375ZM15.8463 11.9375C15.927 11.4844 16.3598 11.1825 16.8129 11.2633C18.3517 11.5375 20 12.5752 20 14.5837C20 15.0439 19.6269 15.417 19.1667 15.417C18.7064 15.417 18.3333 15.0439 18.3333 14.5837C18.3333 13.7389 17.6756 13.1099 16.5205 12.9041C16.0674 12.8233 15.7655 12.3906 15.8463 11.9375Z",
        fill: "currentColor",
      }),
    ),
  hc = (t) =>
    d.createElement(
      "svg",
      {
        width: 20,
        height: 20,
        viewBox: "0 0 20 20",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        ...t,
      },
      d.createElement("path", {
        d: "M5.00526 4.58366C5.01932 4.61132 5.05866 4.67004 5.16269 4.75787C5.3538 4.91925 5.67975 5.10211 6.15547 5.27201C7.09965 5.60922 8.45881 5.83366 9.99998 5.83366C11.5411 5.83366 12.9003 5.60922 13.8445 5.27201C14.3202 5.10211 14.6462 4.91925 14.8373 4.75787C14.9413 4.67004 14.9806 4.61132 14.9947 4.58366C14.9806 4.556 14.9413 4.49728 14.8373 4.40944C14.6462 4.24807 14.3202 4.0652 13.8445 3.8953C12.9003 3.5581 11.5411 3.33366 9.99998 3.33366C8.45881 3.33366 7.09965 3.5581 6.15547 3.8953C5.67975 4.0652 5.3538 4.24807 5.16269 4.40944C5.05866 4.49728 5.01932 4.556 5.00526 4.58366ZM15 6.59804C14.8105 6.68702 14.611 6.76802 14.405 6.84158C13.238 7.25839 11.6805 7.50033 9.99998 7.50033C8.31949 7.50033 6.76198 7.25839 5.59491 6.84158C5.38893 6.76802 5.18947 6.68702 4.99998 6.59804V9.98919C5.00675 10.0064 5.03274 10.0554 5.1188 10.1357C5.26645 10.2734 5.52649 10.438 5.92172 10.5994C6.70695 10.9202 7.85854 11.1613 9.20916 11.2303C9.6688 11.2538 10.0224 11.6454 9.99889 12.1051C9.97541 12.5647 9.58377 12.9183 9.12413 12.8948C7.64784 12.8194 6.29943 12.5541 5.29139 12.1423C5.19246 12.1019 5.09514 12.0594 4.99998 12.0147V15.4059C5.00675 15.4231 5.03274 15.472 5.1188 15.5523C5.26645 15.6901 5.52649 15.8546 5.92172 16.0161C6.70695 16.3369 7.85854 16.578 9.20916 16.647C9.6688 16.6705 10.0224 17.0621 9.99889 17.5217C9.97541 17.9814 9.58377 18.335 9.12413 18.3115C7.64784 18.2361 6.29943 17.9708 5.29139 17.559C4.78999 17.3541 4.33007 17.0958 3.98192 16.771C3.63288 16.4454 3.33331 15.9892 3.33331 15.417V4.58366C3.33331 3.95559 3.69204 3.46988 4.08743 3.13602C4.48669 2.7989 5.015 2.53285 5.59491 2.32573C6.76198 1.90892 8.31949 1.66699 9.99998 1.66699C11.6805 1.66699 13.238 1.90892 14.405 2.32573C14.985 2.53285 15.5133 2.7989 15.9125 3.13602C16.3079 3.46988 16.6666 3.95559 16.6666 4.58366V8.33366C16.6666 8.7939 16.2936 9.16699 15.8333 9.16699C15.3731 9.16699 15 8.7939 15 8.33366V6.59804Z",
        fill: "currentColor",
      }),
      d.createElement("path", {
        d: "M14.5529 10.8337H15.447C15.6837 10.8337 15.9001 10.9674 16.006 11.1792L16.4513 12.0698L17.4453 12.0101C17.6816 11.9959 17.9056 12.1165 18.024 12.3215L18.4711 13.0958C18.5894 13.3008 18.5818 13.5551 18.4514 13.7527L17.9027 14.5836L18.4514 15.4146C18.5818 15.6122 18.5895 15.8665 18.4711 16.0715L18.024 16.8458C17.9057 17.0508 17.6816 17.1714 17.4453 17.1572L16.4513 17.0975L16.006 17.9882C15.9001 18.1999 15.6837 18.3337 15.447 18.3337H14.5529C14.3161 18.3337 14.0997 18.1999 13.9939 17.9882L13.5485 17.0975L12.5546 17.1572C12.3183 17.1714 12.0943 17.0508 11.9759 16.8458L11.5288 16.0715C11.4105 15.8665 11.4181 15.6122 11.5485 15.4146L12.0972 14.5836L11.5485 13.7527C11.4181 13.5551 11.4105 13.3008 11.5288 13.0958L11.9759 12.3215C12.0943 12.1165 12.3183 11.9959 12.5546 12.0101L13.5485 12.0698L13.9939 11.1792C14.0997 10.9674 14.3161 10.8337 14.5529 10.8337ZM14.9999 15.8337C15.6903 15.8337 16.2499 15.274 16.2499 14.5837C16.2499 13.8933 15.6903 13.3337 14.9999 13.3337C14.3096 13.3337 13.7499 13.8933 13.7499 14.5837C13.7499 15.274 14.3096 15.8337 14.9999 15.8337Z",
        fill: "currentColor",
      }),
    ),
  pc = (t) =>
    d.createElement(
      "svg",
      {
        width: 20,
        height: 20,
        viewBox: "0 0 20 20",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        ...t,
      },
      d.createElement("path", {
        d: "M15 12.5C15 13.8807 13.8807 15 12.5 15H11.6666V17.5H5.83331C5.83331 15.3965 5.94556 13.6788 4.57425 11.9307C3.79685 10.9396 3.33331 9.69058 3.33331 8.33333C3.33331 5.11168 5.94499 2.5 9.16665 2.5C11.5416 2.5 13.7281 3.63987 14.6296 5.94399C15.2611 7.55853 15.6985 8.96442 16.6666 10.4167L15 11.25V12.5Z",
        stroke: "currentColor",
        strokeWidth: 1.66667,
        strokeLinecap: "square",
        strokeLinejoin: "round",
      }),
      d.createElement("path", {
        d: "M9.5129 6.14222C9.49297 5.96623 9.34417 5.83319 9.16704 5.83301C8.98992 5.83283 8.84084 5.96556 8.82055 6.14152C8.4524 7.26158 8.09526 7.61872 6.9752 7.98687C6.79924 8.00717 6.66651 8.15624 6.66669 8.33336C6.66687 8.51049 6.7999 8.65929 6.9759 8.67923C8.09526 9.04729 8.4524 9.40444 8.81962 10.5154C8.8356 10.6953 8.98644 10.8332 9.16708 10.833C9.34772 10.8328 9.49824 10.6946 9.51382 10.5146C9.88097 9.40444 10.2381 9.04729 11.3483 8.68014C11.5283 8.66456 11.6665 8.51404 11.6667 8.3334C11.6669 8.15276 11.529 8.00193 11.3491 7.98594C10.2381 7.61872 9.88097 7.26158 9.5129 6.14222Z",
        fill: "currentColor",
      }),
    ),
  xc = (t) =>
    d.createElement(
      "svg",
      {
        width: 20,
        height: 20,
        viewBox: "0 0 20 20",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        ...t,
      },
      d.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M14.853 4.03815C14.7819 3.81929 14.5469 3.69952 14.328 3.77063L13.5355 4.02814C13.0978 4.17037 12.8582 4.64049 13.0004 5.0782L14.288 9.04094C14.4302 9.47865 14.9003 9.71819 15.3381 9.57597L16.1306 9.31846C16.3495 9.24735 16.4692 9.01228 16.3981 8.79343L14.853 4.03815ZM13.813 2.18554C14.9073 1.82998 16.0826 2.42884 16.4381 3.52312L17.9832 8.2784C18.3388 9.37268 17.7399 10.548 16.6456 10.9036L15.8531 11.1611C15.1467 11.3906 14.4122 11.2887 13.8177 10.9411L12.7901 11.2301C12.8725 11.5 12.9168 11.7864 12.9168 12.0832C12.9168 12.9692 12.5218 13.7629 11.8982 14.2978L13.6235 17.0582C13.8674 17.4485 13.7488 17.9626 13.3585 18.2066C12.9682 18.4505 12.4541 18.3318 12.2101 17.9416L10.358 14.9782C10.2407 14.9925 10.1213 14.9999 10.0001 14.9999C9.87899 14.9999 9.75955 14.9925 9.64227 14.9782L7.79014 17.9416C7.54622 18.3318 7.03209 18.4505 6.64181 18.2066C6.25153 17.9626 6.13289 17.4485 6.37681 17.0582L8.10206 14.2978C7.65499 13.9143 7.32539 13.3978 7.17463 12.8095L5.48031 13.2861C4.18859 13.6494 2.84042 12.9282 2.42577 11.652L2.10851 10.6756C1.70574 9.43599 2.32292 8.09494 3.52647 7.59459L11.3377 4.34724C11.5051 3.48343 12.1244 2.7342 13.0204 2.44305L13.813 2.18554ZM11.5661 6.05726L4.16626 9.13357C3.76508 9.30035 3.55935 9.74737 3.69361 10.1606L4.01087 11.137C4.14908 11.5624 4.59847 11.8028 5.02905 11.6817L7.2714 11.051C7.68825 9.94963 8.75275 9.16657 10.0001 9.16657C10.6747 9.16657 11.2958 9.39558 11.7899 9.7801L12.6932 9.52604L11.5661 6.05726ZM10.0001 10.8332C9.30979 10.8332 8.75015 11.3929 8.75015 12.0832C8.75015 12.7736 9.30979 13.3332 10.0001 13.3332C10.6905 13.3332 11.2501 12.7736 11.2501 12.0832C11.2501 11.3929 10.6905 10.8332 10.0001 10.8332Z",
        fill: "currentColor",
      }),
    ),
  Cc = (t) =>
    d.createElement(
      "svg",
      {
        width: 20,
        height: 20,
        viewBox: "0 0 20 20",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        ...t,
      },
      d.createElement("path", {
        d: "M15.3652 2.09459C16.1095 1.70899 16.9898 1.88279 17.5535 2.44656C18.1173 3.01033 18.2911 3.89064 17.9055 4.63487C17.1905 6.01499 16.3425 7.22391 15.3222 8.31078C16.348 9.58643 17.1189 10.9079 17.4446 12.1514C17.8241 13.6007 17.6113 15.0618 16.3542 16.0675C15.3445 16.8753 14.2098 16.7663 13.3037 16.3919C12.4217 16.0276 11.6394 15.376 11.1024 14.8573C10.7714 14.5376 10.7622 14.01 11.082 13.679C11.4017 13.3479 11.9293 13.3388 12.2603 13.6585C12.744 14.1257 13.3466 14.6064 13.94 14.8515C14.5092 15.0867 14.9404 15.0642 15.313 14.7661C15.9011 14.2955 16.1018 13.603 15.8323 12.5737C15.5948 11.6669 15.0042 10.5975 14.1154 9.4708C13.6316 9.89166 13.1147 10.2942 12.5621 10.6822C12.5376 10.6994 12.5125 10.7151 12.4868 10.7293C12.4352 11.3354 12.2313 11.854 11.8723 12.2673C11.4637 12.7379 10.9248 12.9901 10.4098 13.1305C9.58889 13.3542 8.60627 13.3399 7.88928 13.3294C7.7513 13.3274 7.62315 13.3255 7.50789 13.3255C7.04765 13.3255 6.67456 12.9524 6.67456 12.4922C6.67456 12.3769 6.67269 12.2488 6.67068 12.1108C6.66023 11.3938 6.64591 10.4112 6.86964 9.59029C7.00998 9.07531 7.26222 8.53644 7.73277 8.12778C8.14611 7.76881 8.66473 7.56492 9.27079 7.51327C9.28501 7.48764 9.30072 7.46251 9.31793 7.43799C9.6492 6.96607 9.99115 6.52028 10.346 6.0988C7.9373 4.77674 5.62102 4.88484 4.41967 6.08619C3.61321 6.89265 3.2947 8.16577 3.58074 9.69129C3.86588 11.212 4.74485 12.8932 6.18744 14.3358C7.03913 15.1875 7.95938 15.7822 8.71211 16.1622C9.08805 16.352 9.41535 16.4848 9.66275 16.5681C9.84796 16.6305 9.95411 16.6535 9.99306 16.6619C10.0137 16.6664 10.0155 16.6668 10.0002 16.6668C10.4605 16.6668 10.8336 17.0399 10.8336 17.5001C10.8335 17.9604 10.4604 18.3335 10.0002 18.3334C9.74781 18.3334 9.42292 18.246 9.13072 18.1476C8.80267 18.0371 8.40229 17.8729 7.961 17.6501C7.07926 17.2049 6.00681 16.5122 5.00893 15.5143C3.35986 13.8652 2.29728 11.89 1.94262 9.99844C1.58884 8.11165 1.93228 6.21655 3.24116 4.90768C5.28565 2.86318 8.67703 3.16039 11.5117 4.84723C12.6442 3.75094 13.9095 2.84885 15.3652 2.09459ZM11.0479 7.89226C11.4868 8.14712 11.853 8.51332 12.1078 8.95219C13.9945 7.53119 15.3672 5.91112 16.4257 3.86814C16.4586 3.80467 16.4545 3.70454 16.375 3.62507C16.2956 3.54561 16.1954 3.54153 16.132 3.57442C14.089 4.63293 12.4689 6.00557 11.0479 7.89226ZM8.33454 11.6656C8.92965 11.6687 9.49137 11.6533 9.97157 11.5224C10.2951 11.4343 10.4943 11.3123 10.614 11.1745C10.7223 11.0497 10.8333 10.8348 10.8333 10.4128C10.8333 9.72465 10.2755 9.16677 9.58728 9.16677C9.16526 9.16677 8.95039 9.27778 8.82561 9.38615C8.68779 9.50584 8.56584 9.70495 8.47765 10.0285C8.34678 10.5087 8.3314 11.0705 8.33454 11.6656Z",
        fill: "currentColor",
      }),
    ),
  Z = D({
    title: {
      id: "teamPurchaseInterstitialModal.title",
      defaultMessage:
        "Supercharge your teams work with a secure, collaborative workspace",
    },
    email: {
      id: "teamPurchaseInterstitialModal.email",
      defaultMessage: "Continue with Email",
    },
    google: {
      id: "teamPurchaseInterstitialModal.google",
      defaultMessage: "Continue with Google",
    },
    microsoft: {
      id: "teamPurchaseInterstitialModal.microsoft",
      defaultMessage: "Continue with Microsoft",
    },
    apple: {
      id: "teamPurchaseInterstitialModal.apple",
      defaultMessage: "Continue with Apple",
    },
    alreadyHaveAccount: {
      id: "teamPurchaseInterstitialModal.alreadyHaveAccount",
      defaultMessage: "Already have an account? <login>Login</login>",
    },
    termsOfUse: {
      id: "teamPurchaseInterstitialModal.termsOfUse",
      defaultMessage: "Terms of Use",
    },
    privacyPolicy: {
      id: "teamPurchaseInterstitialModal.privacyPolicy",
      defaultMessage: "Privacy Policy",
    },
    valueTitle: {
      id: "teamPurchaseInterstitialModal.valueTitle",
      defaultMessage: "Team",
    },
    perMonth: {
      id: "teamPurchaseInterstitialModal.perMonth",
      defaultMessage: "per user/month",
    },
    billedAnnually: {
      id: "teamPurchaseInterstitialModal.billedAnnually",
      defaultMessage: "billed annually",
    },
    value1: {
      id: "teamPurchaseInterstitialModal.value1",
      defaultMessage: "More GPT-4o powerhigher limits, faster output",
    },
    value2: {
      id: "teamPurchaseInterstitialModal.value2",
      defaultMessage:
        "Tailor ChatGPT to your work with file uploads, projects, GPTs and persistent memory",
    },
    value3: {
      id: "teamPurchaseInterstitialModal.value3",
      defaultMessage:
        "Offload busywork with tasks, tackle tough problems with deep research",
    },
    value4: {
      id: "teamPurchaseInterstitialModal.value4",
      defaultMessage:
        "Create with cutting-edge AIvideo, images, code, canvas, and more",
    },
    value5: {
      id: "teamPurchaseInterstitialModal.value5",
      defaultMessage:
        "Keep your data safe with MFA, encryption, and no training on your content by default. <link>Learn More</link>",
    },
    value6: {
      id: "teamPurchaseInterstitialModal.value6",
      defaultMessage:
        "Collaborate seamlessly with shared GPTs and bulk admin controls",
    },
  }),
  Mc = (t) =>
    e.jsx("a", {
      href: "https://openai.com/enterprise-privacy/",
      target: "_blank",
      className: "whitespace-nowrap underline",
      rel: "noreferrer",
      children: t,
    }),
  ra = [
    { icon: pc, message: Z.value1 },
    { icon: Cc, message: Z.value2 },
    { icon: xc, message: Z.value3 },
    { icon: gc, message: Z.value4 },
    { icon: hc, message: Z.value5, link: Mc },
    { icon: fc, message: Z.value6 },
  ],
  jt = se.button`text-base rounded-xl justify-center gap-1 flex items-center bg-token-main-surface-primary border w-full p-3`,
  bc = se.div`flex h-[1px] w-full border-b border-token-surface-tertiary`,
  jc = se.div`relative z-10 max-w-[402px] w-full flex flex-col items-start p-6 pb-3 border-box bg-token-main-surface-primary border border-token-surface-tertiary shadow-elevation-01 rounded-xl`,
  yc = se.div`flex w-full border-dotted border-b border-token-surface-tertiary`,
  vc = se.div`text-base text-sm tracking-[-0.18px]`,
  Sc = se.div`flex gap-3 py-3 items-center`,
  kc = se.div`w-5 h-5`,
  wc = () => {
    const t = ft(),
      s = Aa(t),
      a = Pe(),
      n = ka(a),
      o = mi(t);
    return {
      shouldShowTeamSignupLanding: !n && s,
      shouldShowTeamSignupDirectPurchase: o && n,
    };
  },
  Nc = () => {
    const t = k(),
      s = vl(null, !0),
      a = Rt(),
      n = gi(s.initialBillingDetails.currency).annualBillingPlan;
    d.useEffect(() => {
      T.logEvent("Account Pay: Interstitial Page Impression");
    }, []);
    const o = window.location.href + "-direct",
      i = (l) => {
        if (!o.includes(qs)) {
          le.addError(
            "TeamPurchaseInterstitialModal: Missing team pricing hash.",
          );
          return;
        }
        if (l === "email") {
          a({ authType: "signup", callbackUrl: o });
          return;
        }
        a({
          authType: "login",
          callbackUrl: o,
          additionalAuthParams: { connection: l },
        });
      },
      c = () => {
        if (!o.includes(qs)) {
          le.addError(
            "TeamPurchaseInterstitialModal: Missing team pricing hash.",
          );
          return;
        }
        a({ authType: "login", callbackUrl: o });
      };
    return e.jsx(B, {
      testId: "modal-team-purchase-interstitial",
      size: "fullscreen",
      isOpen: !0,
      onClose: () => {},
      type: "success",
      className: "flex h-screen flex-col",
      removePopoverStyling: !0,
      children: e.jsxs("div", {
        className: "flex h-screen w-full gap-8",
        children: [
          e.jsxs("div", {
            className:
              "flex h-screen min-w-[320px] flex-1 flex-col items-center p-9 px-4",
            children: [
              e.jsxs("div", {
                className:
                  "flex w-full max-w-[360px] grow flex-col items-center justify-center gap-3",
                children: [
                  e.jsx(wa, {
                    className:
                      "mb-6 h-8 w-8 md:fixed md:start-4 md:top-4 md:h-6 md:w-6",
                  }),
                  e.jsx("div", {
                    className: "mb-5 text-center text-3xl",
                    children: t.formatMessage(Z.title),
                  }),
                  e.jsxs(jt, {
                    onClick: () => i("email"),
                    children: [
                      e.jsx(Cn, { className: "h-6 w-6" }),
                      t.formatMessage(Z.email),
                    ],
                  }),
                  e.jsxs("div", {
                    className: "relative my-12 w-full",
                    children: [
                      e.jsx(bc, {}),
                      e.jsx("span", {
                        className:
                          "bg-token-main-surface-primary text-token-text-secondary absolute start-1/2 -top-2 -translate-x-1/2 transform px-2 text-xs font-medium",
                        children: t.formatMessage({
                          id: "teamPurchaseInterstitialModal.or",
                          defaultMessage: "OR",
                        }),
                      }),
                    ],
                  }),
                  e.jsxs(jt, {
                    onClick: () => i("google-oauth2"),
                    children: [
                      e.jsx(uc, { className: "h-6 w-6" }),
                      e.jsx("div", { children: t.formatMessage(Z.google) }),
                    ],
                  }),
                  e.jsxs(jt, {
                    onClick: () => i("windowslive"),
                    children: [
                      e.jsx(mc, { className: "h-6 w-6" }),
                      e.jsx("div", { children: t.formatMessage(Z.microsoft) }),
                    ],
                  }),
                  e.jsxs(jt, {
                    onClick: () => i("apple"),
                    children: [
                      e.jsx(dc, { className: "h-6 w-6" }),
                      e.jsx("div", { children: t.formatMessage(Z.apple) }),
                    ],
                  }),
                  e.jsx("div", {
                    className:
                      "flex items-center gap-1 py-1.5 text-sm font-medium",
                    children: e.jsx("div", {
                      className: "text-token-text-secondary",
                      children: t.formatMessage(Z.alreadyHaveAccount, {
                        login: (l) =>
                          e.jsx("span", {
                            className: "cursor-pointer text-green-600",
                            onClick: c,
                            children: l,
                          }),
                      }),
                    }),
                  }),
                ],
              }),
              e.jsxs("div", {
                className:
                  "flex h-8 items-center gap-2 text-sm font-medium text-green-600",
                children: [
                  e.jsx(Ge, {
                    target: "_blank",
                    to: "https://openai.com/policies/terms-of-use",
                    children: t.formatMessage(Z.termsOfUse),
                  }),
                  e.jsx("div", {
                    className:
                      "border-token-text-primary mx-2 h-[18px] border-s",
                  }),
                  e.jsx(Ge, {
                    target: "_blank",
                    to: "https://openai.com/policies/privacy-policy",
                    children: t.formatMessage(Z.privacyPolicy),
                  }),
                ],
              }),
            ],
          }),
          e.jsxs("div", {
            className:
              "hidden min-h-[560px] overflow-y-auto md:relative md:flex md:h-full md:flex-1 md:items-center md:justify-center md:p-4",
            children: [
              e.jsxs(jc, {
                children: [
                  e.jsxs("div", {
                    className: "mb-2 flex flex-col",
                    children: [
                      e.jsx("div", {
                        className: "mb-2 text-xl font-medium",
                        children: t.formatMessage(Z.valueTitle),
                      }),
                      e.jsx("div", {
                        className: "flex h-10 flex-col items-center",
                        children: e.jsxs("div", {
                          className: "mb-2 flex text-[34px]",
                          children: [
                            e.jsx("div", {
                              className:
                                "text-token-text-secondary me-0.5 flex self-start text-xl",
                              children: e.jsx(r, { ...n.currencySign }),
                            }),
                            e.jsx("div", {
                              className: "me-1 leading-none",
                              children: n.discountedMonthlyCost,
                            }),
                            e.jsxs("div", {
                              className:
                                "text-token-text-secondary flex flex-col self-end text-xs",
                              children: [
                                e.jsx("div", {
                                  children: t.formatMessage(Z.perMonth),
                                }),
                                e.jsxs("div", {
                                  children: [
                                    t.formatMessage(Z.billedAnnually),
                                    " ",
                                  ],
                                }),
                              ],
                            }),
                          ],
                        }),
                      }),
                    ],
                  }),
                  ra.map(({ icon: l, message: u, link: m }, h) =>
                    e.jsxs(
                      qo.Fragment,
                      {
                        children: [
                          e.jsxs(Sc, {
                            children: [
                              e.jsx(kc, { children: e.jsx(l, {}) }),
                              e.jsx(vc, {
                                children: t.formatMessage(
                                  u,
                                  m ? { link: m } : void 0,
                                ),
                              }),
                            ],
                          }),
                          h < ra.length - 1 && e.jsx(yc, {}),
                        ],
                      },
                      u.id,
                    ),
                  ),
                ],
              }),
              e.jsx("img", {
                alt: "",
                src: cc.src,
                className: "absolute inset-0 z-0 h-full w-full object-cover",
              }),
            ],
          }),
        ],
      }),
    });
  },
  _c = () => {
    const t = us(),
      s = at(),
      { hash: a } = ft();
    return fi() ||
      !(a === "#ca-google-drive-oauth") ||
      !s ||
      s?.isPersonalAccount() ||
      !t
      ? null
      : e.jsx(Lc, {});
  },
  Lc = () => {
    const { gDriveOAuthConnectionId: t, isLoading: s, refetch: a } = hi();
    return (
      d.useEffect(() => {
        !t &&
          !s &&
          window.history.replaceState(
            null,
            "",
            window.location.pathname + window.location.search,
          );
      }, [t, s]),
      t
        ? e.jsx(Da, {
            connectionId: t,
            isAdminFlow: !1,
            location: "url_hash",
            onClose: () => {
              window.location.hash = "#settings/ConnectorSettings";
            },
            onSuccess: a,
          })
        : null
    );
  };
function js({
  testId: t = "modal-generic-ineligible",
  title: s,
  message: a,
  buttonTitle: n,
  isOpen: o,
  onClose: i,
}) {
  return e.jsx(B, {
    testId: t,
    type: "success",
    isOpen: o,
    onClose: i,
    showCloseButton: !0,
    title: s,
    children: e.jsxs("div", {
      className: "",
      children: [
        e.jsx("p", { children: a }),
        e.jsx("div", {
          className: "mt-4 flex justify-end",
          children: e.jsx(Je, {
            title: n,
            color: "secondary",
            onClick: i,
            size: "large",
          }),
        }),
      ],
    }),
  });
}
const Pc = ({ currentAccount: t, promotionData: s }) => {
    const { eligible: a, isLoading: n } = pi(Ll),
      o = Te(),
      i = ft(),
      {
        isEligible: c,
        isPromoLoading: l,
        promoCode: u,
        promoError: m,
        promoMetadata: h,
      } = s,
      g = d.useCallback(() => {
        const f = new URLSearchParams(i.search);
        f.delete(Ia);
        const p = f.toString();
        o({ pathname: i.pathname, search: p ? `?${p}` : "", hash: i.hash });
      }, [o, i]);
    return (
      d.useEffect(() => {
        a && h && (Na.setItem(_a.PromoCode, u), g());
      }, [n, h, a, u, g]),
      d.useEffect(() => {
        l ||
          (c &&
            h == null &&
            le.addError("User is eligible for promo but metadata is missing", {
              promoCode: u,
            }));
      }, [u, c, h, l]),
      a || n
        ? null
        : c && h != null
          ? e.jsx(Ec, {
              currentAccount: t,
              onClose: g,
              promoCode: u,
              promoMetadata: h,
            })
          : !c && m
            ? e.jsx(Tc, { onClose: g, promoCode: u, promoError: m })
            : null
    );
  },
  Ec = ({ currentAccount: t, onClose: s, promoCode: a, promoMetadata: n }) => {
    const [o, i] = d.useState(null),
      { country: c } = Sl(),
      l = kl({ country: c, currentAccount: t, location: "PromoEligibleModal" });
    return (
      d.useEffect(() => {
        T.logEvent("Promo Eligible Modal Shown", {
          promoCode: a,
          promoMetadata: n,
        }),
          Dt.logEvent("chatgpt_promo_eligible_modal_shown");
      }, [a, n]),
      e.jsx(B, {
        testId: "modal-promo-eligible",
        size: "fullscreen",
        isOpen: !0,
        onClose: s,
        type: "success",
        className:
          "flex h-full flex-col items-center justify-center bg-white/70 dark:bg-gray-800/70",
        removePopoverStyling: !0,
        showOverlayBackground: !1,
        children: e.jsx("div", {
          className: "flex h-full items-center justify-center",
          children: e.jsx("div", {
            className:
              "flex flex-col justify-center gap-4 px-3 py-6 md:min-h-[30rem] md:flex-row md:gap-0 md:py-0",
            children: e.jsx(dn, {
              billingDetails: l,
              currentAccount: t,
              handlePromoModalClose: s,
              isPromoLoading: !1,
              planLoading: o,
              promoCode: a,
              promoMetadata: n,
              setPlanLoading: i,
            }),
          }),
        }),
      })
    );
  },
  Tc = ({ onClose: t, promoError: s, promoCode: a }) => {
    const n = k();
    return (
      d.useEffect(() => {
        T.logEvent("Promo Ineligible Modal Shown", {
          promoCode: a,
          ineligibleReason: s.code,
        }),
          Dt.logEvent("chatgpt_promo_ineligible_modal_shown");
      }, [a, s.code]),
      e.jsx(js, {
        testId: "modal-promo-ineligible",
        title: s.title,
        message: s.message,
        buttonTitle: n.formatMessage({
          id: "promoIneligibleModal.close",
          defaultMessage: "Close",
        }),
        isOpen: !0,
        onClose: t,
      })
    );
  };
function Ac() {
  const t = Pe(),
    s = ka(t),
    a = ft(),
    n = Te(),
    o = xi(a),
    i = Aa(a),
    l = !!((o || i) && s),
    u = Dc({ isModalOpen: l, isTeamPricingRoute: i });
  return (
    d.useEffect(() => {
      s &&
        _e.getBooleanCookie(Le.ShowPaymentModal) &&
        (_e.deleteCookie(Le.ShowPaymentModal),
        ms(n, "Show payment modal cookie"));
    }, [s, n]),
    d.useEffect(() => {
      l
        ? (oe.closeAllActiveModals(), oe.openModal(ce.AccountPayment))
        : oe.closeModal(ce.AccountPayment);
    }, [l]),
    { isOpen: l, defaultTab: u }
  );
}
function Dc({ isModalOpen: t, isTeamPricingRoute: s }) {
  const a = at(),
    n = pt(),
    o = Ci(),
    i = wo("954359911");
  return !a || !n || !t
    ? "personal"
    : s ||
        a.isWorkspaceAccount() ||
        ((n?.email_domain_type === "professional" ||
          n?.email_domain_type === "unknown") &&
          (!o || i.config.get("enabled", !1)))
      ? "business"
      : "personal";
}
function ys({ className: t }) {
  return e.jsx("div", {
    className: qe("flex h-full w-full items-center justify-center", t),
    children: e.jsx(te, {}),
  });
}
const Mn = se.div`p-6`;
function Ic({
  emailAddress: t,
  setEmailAddress: s,
  emailTemplate: a,
  validateEmailPending: n,
  errorMessage: o,
  onClickValidateEmail: i,
  onClickCancel: c,
  title: l,
  description: u,
}) {
  return e.jsx(Mn, {
    children: e.jsxs("div", {
      className: "flex flex-col",
      children: [
        e.jsx("div", {
          className: "text-center text-2xl font-medium",
          children:
            l ??
            e.jsx(r, {
              id: "XSITb5",
              defaultMessage: "Verify you are a student",
            }),
        }),
        e.jsx("div", {
          className: "text-token-text-tertiary mt-2 text-center text-base",
          children:
            u ??
            e.jsx(r, {
              id: "x1DjYV",
              defaultMessage:
                "To claim the student discount, verify your university email address. This email will not be linked to your ChatGPT account.",
            }),
        }),
        e.jsxs("form", {
          className: "mt-8 flex flex-col",
          onSubmit: (m) => {
            m.preventDefault(), i();
          },
          children: [
            e.jsxs(un, {
              className: "mb-8",
              children: [
                e.jsx(mn, {
                  label: e.jsx(r, {
                    id: "jqIBGr",
                    defaultMessage: "University email address",
                  }),
                }),
                e.jsx(gn, {
                  className: qe(o && "border-red-500"),
                  placeholder: a,
                  onChange: (m) => {
                    s(m.target.value);
                  },
                }),
                o
                  ? e.jsx("div", {
                      className: "text-danger mt-2 text-sm",
                      children: o,
                    })
                  : null,
              ],
            }),
            e.jsx(N, {
              type: "submit",
              disabled: t.length === 0,
              loading: n,
              children: e.jsx(r, {
                id: "aDh6He",
                defaultMessage: "Send verification code",
              }),
            }),
            e.jsx(N, {
              type: "button",
              color: "secondary",
              className: "mt-3",
              onClick: c,
              children: e.jsx(r, { id: "/7nqLd", defaultMessage: "Cancel" }),
            }),
          ],
        }),
      ],
    }),
  });
}
function bn({
  programName: t,
  onContinue: s,
  onCancel: a,
  validDomain: n,
  description: o,
}) {
  const i = k(),
    [c, l] = d.useState(""),
    [u, m] = d.useState(null),
    { mutate: h, isPending: g } = de({
      mutationFn: () => We.validateEmail(c, t),
      onSuccess: (f) => {
        m(null), K.logValidateEmailSuccess(), s(f.transaction_id);
      },
      onError: (f) => {
        const p =
          f.detail?.user_error_message ??
          i.formatMessage({
            id: "9wITlN",
            defaultMessage: "Something went wrong",
          });
        K.logValidateEmailFailure(), m(p);
      },
    });
  return e.jsx(Ic, {
    emailAddress: c,
    setEmailAddress: l,
    emailTemplate: n ? `name@university.${n}` : "",
    validateEmailPending: g,
    errorMessage: u,
    onClickValidateEmail: () => {
      h(), K.logClickValidateEmail();
    },
    onClickCancel: () => {
      K.logClose("add-email"), a();
    },
    title: n
      ? e.jsx(r, {
          id: "referral.addEmail.title",
          defaultMessage: "Verify {domain} email address",
          values: { domain: n },
        })
      : void 0,
    description: o,
  });
}
function Oc({
  currentAccount: t,
  hasPaidSubscription: s = !1,
  referralMetadata: a,
  checkoutDetails: n,
  onContinue: o,
  onClose: i,
}) {
  const [c, l] = d.useState(null);
  d.useEffect(() => {
    K.logShowReferralDiscount(a.program_name, !1);
  }, [a]);
  const u = Bc(a);
  if (!t) return null;
  const m = Rc(t);
  return e.jsxs("div", {
    className: qe(
      "relative flex h-full items-center justify-center",
      u ? "overflow-auto" : "overflow-hidden",
    ),
    children: [
      e.jsx(dn, {
        analyticsParams: n.plusAnalyticsParams,
        plusPricingPlanProduce: m,
        currentAccount: t,
        setPlanLoading: l,
        planLoading: c,
        onSubmit: () => {
          K.logClickUpgradeButton(s);
        },
        billingDetails: n.billingDetails,
        promoMetadata: u,
        onCustomUpgradeClick: () => {
          l(ke.PLUS), o();
        },
        handlePromoModalClose: () => {
          i();
        },
        disableForMobile: !0,
      }),
      e.jsx("div", {
        className: qe(
          "absolute inset-0 flex items-center justify-center",
          u ? "invisible" : "visible",
        ),
        children: e.jsx(ys, {}),
      }),
    ],
  });
}
function Rc(t) {
  const s = fl({ currentAccount: t });
  return (
    (s.callToAction.inactive = Ys.plusInactiveProduce),
    (s.callToAction.inactiveUnauthenticated = Ys.plusInactiveUnauthenticated),
    (s.advertisedFeatures = [
      Mt.studentAdvertisedFeatures1,
      Mt.studentAdvertisedFeatures2,
      Mt.studentAdvertisedFeatures3,
      Mt.studentAdvertisedFeatures4,
    ]),
    s
  );
}
function Bc(t) {
  const s = k();
  if (!t) return;
  const a = t?.duration?.period === "month" ? t?.duration?.num_periods : void 0,
    n = s.formatMessage(
      {
        id: "ofib91",
        defaultMessage:
          "Sign up for ChatGPT, and get your {months, plural, one {first month} other {first # months}} of Plus for free. Offer valid for new users after verifying you are a student.",
      },
      { months: a },
    ),
    o = { value: t.discount.value, currency_code: t.discount.currency_code },
    i = { num_periods: t.duration.num_periods, period: t.duration.period },
    c = s.formatMessage({
      id: "referral.promotionTypeLabel",
      defaultMessage: "STUDENT DISCOUNT",
    });
  return {
    plan_name: t.plan_names[0],
    summary: n,
    discount: o,
    duration: i,
    promotion_type: "student_discount",
    promotion_type_label: c,
    referrer_name: t.referrer_name,
  };
}
function Fc({
  emailAddress: t,
  verificationCode: s,
  errorMessage: a,
  sendErrorMessage: n,
  validateVerificationCodeIsPending: o,
  isSendingVerificationCode: i,
  setVerificationCode: c,
  onValidateVerificationCode: l,
  onResendVerificationCode: u,
  onChangeEmailAddress: m,
  onCancel: h,
}) {
  return e.jsx(Mn, {
    children: e.jsxs("div", {
      className: "flex flex-col",
      children: [
        e.jsx("div", {
          className: "text-center text-2xl font-medium",
          children: e.jsx(r, {
            id: "PjHZX7",
            defaultMessage: "Check your email",
          }),
        }),
        e.jsx("div", {
          className: "text-token-text-tertiary mt-2 text-center text-base",
          children: e.jsx(r, {
            id: "AoOIN/",
            defaultMessage:
              "Enter the verification code we just sent to {emailAddress}",
            values: {
              emailAddress: e.jsx("span", {
                className: "font-medium",
                children: t,
              }),
            },
          }),
        }),
        n
          ? e.jsx("div", {
              className: "mt-8",
              children: e.jsx(Mi, {
                type: "error",
                icon: e.jsx(Oa, {}),
                content: n,
              }),
            })
          : null,
        e.jsxs("form", {
          className: "mt-8 flex flex-col",
          onSubmit: (g) => {
            g.preventDefault(), l();
          },
          children: [
            e.jsxs(un, {
              className: "mb-8",
              children: [
                e.jsx(mn, {
                  label: e.jsx(r, {
                    id: "kLJAa+",
                    defaultMessage: "Verification code",
                  }),
                }),
                e.jsx(gn, {
                  placeholder: "XXXXXX",
                  value: s,
                  onChange: (g) => {
                    c(g.target.value);
                  },
                }),
                a
                  ? e.jsx("div", {
                      className: "text-danger mt-2 text-sm",
                      children: a,
                    })
                  : null,
              ],
            }),
            e.jsx(N, {
              type: "submit",
              disabled: s.length === 0,
              loading: o,
              children: e.jsx(r, { id: "NRkiYA", defaultMessage: "Continue" }),
            }),
            e.jsx(N, {
              type: "button",
              className: "mt-3",
              color: "secondary",
              onClick: h,
              children: e.jsx(r, { id: "vyz3Kz", defaultMessage: "Cancel" }),
            }),
          ],
        }),
        e.jsx("div", {
          className: "mt-8 text-center text-sm",
          children: e.jsx(r, {
            id: "2NzblW",
            defaultMessage: "Didn't receive the code?",
          }),
        }),
        e.jsxs("div", {
          className: "mt-4 flex gap-3",
          children: [
            e.jsx(N, {
              loading: i,
              className: "flex-1",
              color: "secondary",
              onClick: u,
              children: e.jsx(r, {
                id: "L6pEyt",
                defaultMessage: "Resend code",
              }),
            }),
            e.jsx(N, {
              className: "flex-1",
              color: "secondary",
              onClick: m,
              children: e.jsx(r, {
                id: "V8M7cm",
                defaultMessage: "Change email",
              }),
            }),
          ],
        }),
      ],
    }),
  });
}
function jn({
  transactionId: t,
  onChangeEmailAddress: s,
  onContinue: a,
  onCancel: n,
}) {
  const o = k(),
    [i, c] = d.useState(""),
    [l, u] = d.useState(null),
    [m, h] = d.useState(null),
    [g, f] = d.useState(!1),
    p = o.formatMessage({
      id: "9wITlN",
      defaultMessage: "Something went wrong",
    }),
    { mutate: y, isPending: M } = de({
      mutationFn: () => We.sendVerificationCode(t),
      onError: (v) => {
        const S = v.detail?.user_error_message ?? p;
        h(S);
      },
    }),
    { mutate: j, isPending: w } = de({
      mutationFn: () => We.validateVerificationCode(t, i),
      onSuccess: () => {
        u(null), h(null), K.logValidateVerificationCodeSuccess();
        try {
          f(!0), a();
        } catch {
          f(!1), u(p);
        }
      },
      onError: (v) => {
        const S =
          v.detail?.user_error_message ??
          o.formatMessage({
            id: "9wITlN",
            defaultMessage: "Something went wrong",
          });
        K.logValidateVerificationCodeFailure(), u(S);
      },
    }),
    x = d.useRef(!1);
  return (
    d.useEffect(() => {
      x.current || (y(), K.logSendVerificationCode(), (x.current = !0));
    }, [y]),
    e.jsx(Fc, {
      emailAddress: "",
      verificationCode: i,
      errorMessage: l,
      sendErrorMessage: m,
      validateVerificationCodeIsPending: w || g,
      isSendingVerificationCode: M,
      setVerificationCode: c,
      onChangeEmailAddress: () => {
        K.logClickChangeEmailButton(), s();
      },
      onValidateVerificationCode: () => {
        K.logClickValidateVerificationCode(), j();
      },
      onResendVerificationCode: () => {
        K.logClickResendVerificationCodeButton(), y();
      },
      onCancel: () => {
        K.logClose("verify-email"), n();
      },
    })
  );
}
function yn(t) {
  const s = No("1682643554").config.value;
  if (!t || typeof s != "object" || !s) return;
  const a = s.school_configurations;
  if (!a) return;
  const n = a[t];
  if (!n) return;
  const i = n.domains[0];
  return { programConfiguration: n, validDomain: i };
}
function Gc({ referralCode: t, onClose: s }) {
  const a = Te(),
    { isUnauthenticated: n } = gt(),
    [o, i] = d.useState({ name: "loading" }),
    { value: c } = Ce("550432558"),
    { value: l } = Ce("3406933735"),
    {
      shouldForwardToCheckout: u,
      isReferrer: m,
      referralMetadata: h,
      programName: g,
      isReferralLoading: f,
    } = bi(t),
    { programConfiguration: p, validDomain: y } = yn(g) ?? {},
    M = Wc(p, h, f);
  return (
    d.useEffect(() => {
      c || s(), M && s();
    }, [M, s, c]),
    d.useEffect(() => {
      m && g && a(Ra(g)), n && l && We.trackReferralSignup(t);
    }, [m, g, a, n, t, l]),
    c
      ? e.jsx(B, {
          testId: "modal-referee",
          type: "success",
          isOpen: !0,
          onClose: s,
          className: `w-full max-w-[360px] ${o.name === "discount-intro" ? "bg-transparent shadow-none!" : ""}`,
          shouldIgnoreClickOutside: !0,
          removePopoverStyling: !0,
          noPadding: !0,
          children: e.jsx(Uc, {
            rootState: o,
            setRootState: i,
            referralCode: t,
            validDomain: y,
            shouldForwardToCheckout: u,
            referralMetadata: h,
            isReferralLoading: f,
            onClose: s,
          }),
        })
      : null
  );
}
function Uc({
  rootState: t,
  setRootState: s,
  referralCode: a,
  validDomain: n,
  shouldForwardToCheckout: o,
  referralMetadata: i,
  isReferralLoading: c,
  onClose: l,
}) {
  const u = fn(),
    m = at(),
    h = k(),
    g = Rt(),
    f = R(),
    { isUnauthenticated: p } = gt(),
    y = m?.hasPaidSubscription() ?? !1,
    M = de({
      mutationFn: () => {
        if (t.name === "verify-email")
          return We.redeemReferral(a, t.transactionId);
        throw new Error("Invalid state for redeeming referral");
      },
    }),
    j = d.useCallback(
      async (x) => {
        try {
          await Ba(
            m?.features ?? [],
            h,
            f,
            x.billingDetails,
            x.plusAnalyticsParams,
          );
        } catch {}
      },
      [m?.features, h, f],
    );
  d.useEffect(() => {
    if (!(c || t.name !== "loading")) {
      if (i) {
        s({ name: "discount-intro", referralMetadata: i });
        return;
      }
      s({ name: "error" });
    }
  }, [c, o, i, u, j, t.name, s]);
  const w = ji(a);
  switch (t.name) {
    case "loading":
      return e.jsx(ys, { className: "min-h-96" });
    case "discount-intro":
      return e.jsx(Oc, {
        currentAccount: m,
        hasPaidSubscription: y,
        referralMetadata: t.referralMetadata,
        checkoutDetails: u,
        onContinue: () => {
          K.logReferralDiscountContinue(),
            p
              ? g({
                  authType: "signup",
                  callback: (x) => {
                    T.logSignUpButtonClicked({
                      provider: x,
                      location: "Referral Discount Modal",
                    });
                  },
                  callbackUrl: w,
                })
              : o
                ? j(u)
                : s(la(t.referralMetadata));
        },
        onClose: () => {
          K.logClose("discount"),
            t.referralMetadata.discount &&
              t.referralMetadata.duration &&
              Na.setItem(_a.ReferralCode, a),
            l();
        },
      });
    case "add-email":
      return e.jsx(bn, {
        programName: t.referralMetadata.program_name,
        onContinue: (x) => {
          s(Hc(t.referralMetadata, x));
        },
        onCancel: l,
        validDomain: n,
        description: n
          ? e.jsx(r, {
              id: "referee.addEmail.description",
              defaultMessage:
                "To claim the student discount, you must have a valid {domain} email address. This email will not be linked to your ChatGPT account.",
              values: { domain: n },
            })
          : void 0,
      });
    case "verify-email":
      return e.jsx(jn, {
        transactionId: t.transactionId,
        onChangeEmailAddress: () => {
          s(la(t.referralMetadata));
        },
        onContinue: async () => {
          await M.mutateAsync(), j(u);
        },
        onCancel: l,
      });
    case "error":
      return e.jsx(js, {
        title: h.formatMessage({
          id: "referee.genericIneligibleModal.title",
          defaultMessage: "Promo Unavailable",
        }),
        message: e.jsx(r, {
          id: "referee.genericIneligibleModal.message",
          defaultMessage:
            "Looks like you dont meet the eligibility criteria for this promotion. Learn more about <link>ChatGPT plans.</link>",
          values: {
            link: (x) =>
              e.jsx("a", {
                href: "https://openai.com/chatgpt/pricing/",
                className: "underline",
                children: x,
              }),
          },
        }),
        buttonTitle: h.formatMessage({
          id: "referee.genericIneligibleModal.buttonTitle",
          defaultMessage: "Close",
        }),
        isOpen: !0,
        onClose: l,
      });
  }
}
function Wc(t, s, a) {
  return a ? !1 : s && !t ? !0 : s ? !s?.program_name : !1;
}
function la(t) {
  return { name: "add-email", referralMetadata: t };
}
function Hc(t, s) {
  return { name: "verify-email", referralMetadata: t, transactionId: s };
}
const Ke = D({
  referralLinkModalTitle: {
    id: "referralLinkModal.title",
    defaultMessage: "Refer classmates, earn rewards",
  },
  referralLinkModalMessage: {
    id: "referralLinkModal.message",
    defaultMessage:
      "Get a friend to sign up for ChatGPT, and youll both get a free month of Plus.",
  },
  referralLinkModalDisclaimer: {
    id: "referralLinkModal.disclaimer",
    defaultMessage:
      "For every ChatGPT user with a valid university email address you refer, you get {discount} your next billing cycle. You can refer up to 12 people, and discounts are automatically applied.",
  },
});
function vn({ referralMetadata: t, referralCode: s, onClose: a }) {
  const n = k(),
    o = R(),
    { discount: i } = t,
    c = Fa(i),
    l = gs(n, i.value || 0, i.currency_code);
  return e.jsxs("div", {
    className: "text-center",
    children: [
      e.jsxs("div", {
        className:
          "text-token-sidebar-surface mx-auto flex h-[64px] w-[104px] items-center justify-center rounded-md bg-[#AF52DE] px-4 py-2 text-[40px]",
        children: [
          e.jsx("span", {
            className: "text-[20px]",
            children: e.jsx(r, { ...c.sign }),
          }),
          i.value,
        ],
      }),
      e.jsx("p", {
        className: "text-token-text-primary mt-6 text-2xl font-semibold",
        children: e.jsx(r, { ...Ke.referralLinkModalTitle }),
      }),
      e.jsx("p", {
        className: "text-token-text-primary mt-2 text-base",
        children: e.jsx(r, { ...Ke.referralLinkModalMessage }),
      }),
      e.jsx("div", {
        className:
          "mt-6 flex w-full items-center justify-center rounded-md border-[1px] border-[#AF52DE] bg-[#8C43A00D] py-4 text-center",
        children: e.jsx("span", {
          className: "text-[15px] text-[#AF52DE]",
          children: s ? ts(s) : e.jsx(te, {}),
        }),
      }),
      e.jsxs("div", {
        className: "mt-6 flex w-full flex-col items-center space-y-3",
        children: [
          e.jsx(N, {
            color: "primary",
            onClick: () => {
              s &&
                cs(ts(s), o).then(() => {
                  K.logCopyReferralLink(),
                    o.success(
                      n.formatMessage({
                        id: "1TiBkD",
                        defaultMessage: "Copied referral link to clipboard",
                      }),
                    );
                });
            },
            size: "large",
            className: "w-full",
            children: e.jsx(r, {
              id: "1HBlf+",
              defaultMessage: "Copy referral link",
            }),
          }),
          e.jsx(N, {
            color: "secondary",
            onClick: a,
            size: "large",
            className: "w-full",
            children: e.jsx(r, { id: "6NQvfv", defaultMessage: "Close" }),
          }),
        ],
      }),
      e.jsx("p", {
        className: "text-token-text-tertiary mt-6 text-start text-xs",
        children: e.jsx(r, {
          ...Ke.referralLinkModalDisclaimer,
          values: { discount: l },
        }),
      }),
    ],
  });
}
function Vc({ referralMetadata: t, referralCode: s, onClose: a }) {
  return e.jsx(vn, { referralMetadata: t, referralCode: s, onClose: a });
}
function Kc({ referralMetadata: t, transactionId: s, onClose: a }) {
  const n = st(),
    [o, i] = d.useState(null),
    { mutate: c } = de({
      mutationFn: () => We.createReferralCode(s),
      onSuccess: (m) => {
        i(m.referral_code);
      },
      onError: (m) => {},
    }),
    l = d.useRef(!1);
  d.useEffect(() => {
    l.current || ((l.current = !0), c(), K.logShowReferrerConclusion());
  }, [c]);
  const { program_name: u } = t;
  return !n || !u
    ? null
    : e.jsx(vn, {
        referralMetadata: t,
        referralCode: o,
        onClose: () => {
          K.logClose("referrer-conclusion"), a();
        },
      });
}
function zc({ referralMetadata: t, onContinue: s, onClose: a }) {
  const n = k(),
    o = st();
  d.useEffect(() => {
    K.logShowReferralLinkGenerationModal(t.program_name);
  }, [t]);
  const { discount: i, program_name: c } = t;
  if (!o || !c) return null;
  const l = Fa(i),
    u = gs(n, i.value || 0, i.currency_code);
  return e.jsxs("div", {
    className: "text-center",
    children: [
      e.jsxs("div", {
        className:
          "text-token-sidebar-surface mx-auto flex h-[64px] w-[104px] items-center justify-center rounded-md bg-[#AF52DE] px-4 py-2 text-[40px]",
        children: [
          e.jsx("span", {
            className: "text-[20px]",
            children: e.jsx(r, { ...l.sign }),
          }),
          i.value,
        ],
      }),
      e.jsx("p", {
        className: "text-token-text-primary mt-6 text-2xl font-semibold",
        children: e.jsx(r, { ...Ke.referralLinkModalTitle }),
      }),
      e.jsx("p", {
        className: "text-token-text-primary mt-2 text-base",
        children: e.jsx(r, { ...Ke.referralLinkModalMessage }),
      }),
      e.jsxs("div", {
        className: "mt-6 flex w-full flex-col items-center space-y-3",
        children: [
          e.jsx(N, {
            color: "primary",
            onClick: s,
            size: "large",
            className: "w-full",
            children: e.jsx(r, {
              id: "aESB6r",
              defaultMessage: "Get my referral link",
            }),
          }),
          e.jsx(N, {
            color: "secondary",
            onClick: () => {
              K.logClickReferrerIntroNotNowButton(), a();
            },
            size: "large",
            className: "w-full",
            children: e.jsx(r, { id: "i1qUk7", defaultMessage: "Not Now" }),
          }),
        ],
      }),
      e.jsx("p", {
        className: "text-token-text-tertiary mt-6 text-start text-xs",
        children: e.jsx(r, {
          ...Ke.referralLinkModalDisclaimer,
          values: { discount: u },
        }),
      }),
    ],
  });
}
function qc({ program: t, onClose: s }) {
  const {
      referralMetadata: a,
      referralCode: n,
      transactionId: o,
      programName: i,
      isReferralLoading: c,
      referralError: l,
    } = yi(t),
    { programConfiguration: u, validDomain: m } = yn(i) ?? {},
    h = Zc(u, a, c),
    { value: g } = Ce("550432558");
  return (
    d.useEffect(() => {
      g || s(), h && s();
    }, [h, s, g]),
    g
      ? e.jsx(B, {
          testId: "modal-referrer",
          type: "success",
          isOpen: !0,
          onClose: s,
          showCloseButton: !0,
          className: "w-full max-w-[390px] pt-2",
          removePopoverStyling: !0,
          children: e.jsx(Yc, {
            referralMetadata: a,
            referralCode: n,
            transactionId: o,
            referralError: l,
            validDomain: m,
            isReferralLoading: c,
            shouldRedirect: h,
            onClose: s,
          }),
        })
      : null
  );
}
function Yc({
  referralMetadata: t,
  referralCode: s,
  transactionId: a,
  referralError: n,
  validDomain: o,
  shouldRedirect: i,
  isReferralLoading: c,
  onClose: l,
}) {
  const u = k(),
    m = Rt(),
    { isUnauthenticated: h } = gt(),
    [g, f] = d.useState({ name: "loading" });
  switch (
    (d.useEffect(() => {
      if (!c) {
        if (i) {
          l();
          return;
        }
        if (n) {
          f({ name: "error", title: n.title, message: n.message });
          return;
        }
        if (t) {
          f(
            s
              ? $c(t, s)
              : a
                ? da(t, a)
                : { name: "intro", referralMetadata: t },
          );
          return;
        }
        f({ name: "error" });
      }
    }, [c, n, t, s, a, i, l]),
    g.name)
  ) {
    case "loading":
      return e.jsx(ys, { className: "min-h-96" });
    case "already-enrolled":
      return e.jsx(Vc, {
        referralMetadata: g.referralMetadata,
        referralCode: g.referralCode,
        onClose: l,
      });
    case "intro":
      return e.jsx(zc, {
        referralMetadata: g.referralMetadata,
        onClose: l,
        onContinue: () => {
          h
            ? m({
                authType: "signup",
                callbackUrl: Ra(g.referralMetadata.program_name),
              })
            : f(ca(g.referralMetadata));
        },
      });
    case "add-email":
      return e.jsx(bn, {
        programName: g.referralMetadata.program_name,
        onContinue: (p) => {
          f(Qc(g.referralMetadata, p));
        },
        onCancel: l,
        validDomain: o,
        description: o
          ? e.jsx(r, {
              id: "referrer.addEmail.description",
              defaultMessage:
                "To generate a referral code, you must have a valid {domain} email address. This email will not be linked to your ChatGPT account.",
              values: { domain: o },
            })
          : void 0,
      });
    case "verify-email":
      return e.jsx(jn, {
        transactionId: g.transactionId,
        onChangeEmailAddress: () => {
          f(ca(g.referralMetadata));
        },
        onContinue: () => {
          f(da(g.referralMetadata, g.transactionId));
        },
        onCancel: l,
      });
    case "conclusion":
      return e.jsx(Kc, {
        referralMetadata: g.referralMetadata,
        transactionId: g.transactionId,
        onClose: l,
      });
    case "error":
      return e.jsx(js, {
        title: u.formatMessage({
          id: "referrer.genericIneligibleModal.title",
          defaultMessage: "Promo Unavailable",
        }),
        message: e.jsx(r, {
          id: "referrer.genericIneligibleModal.message",
          defaultMessage:
            "Looks like you don't meet the eligibility criteria for this promotion. Learn more about <link>ChatGPT plans.</link>",
          values: {
            link: (p) =>
              e.jsx("a", {
                href: "https://openai.com/chatgpt/pricing/",
                className: "underline",
                children: p,
              }),
          },
        }),
        buttonTitle: u.formatMessage({
          id: "referrer.genericIneligibleModal.buttonTitle",
          defaultMessage: "Close",
        }),
        isOpen: !0,
        onClose: l,
      });
  }
}
function Zc(t, s, a) {
  return a ? !1 : t ? (s ? !s?.program_name : !1) : !0;
}
function $c(t, s) {
  return { name: "already-enrolled", referralMetadata: t, referralCode: s };
}
function ca(t) {
  return { name: "add-email", referralMetadata: t };
}
function Qc(t, s) {
  return { name: "verify-email", referralMetadata: t, transactionId: s };
}
function da(t, s) {
  return { name: "conclusion", referralMetadata: t, transactionId: s };
}
function Xc() {
  const t = Te(),
    { isOpen: s, program: a } = vi(),
    { isOpen: n, referralCode: o } = Si();
  return s && a
    ? e.jsx(qc, { program: a, onClose: () => t({ hash: "" }) })
    : n && o
      ? e.jsx(Gc, { referralCode: o, onClose: () => t({ hash: "" }) })
      : null;
}
function Jc(t) {
  return t.type === Us.GDRIVE_SYNC_CONNECTOR ||
    t.type === Us.SLACK_SYNC_CONNECTOR
    ? `${window.location.origin}/ca/${t.id}/oauth/callback`
    : `${window.location.origin}/ccc/${t.id}/oauth/callback`;
}
const ed = ({
    isConnected: t,
    onDisconnect: s,
    onConnect: a,
    isDisabledByAdmin: n,
  }) =>
    e.jsx(vs, {
      isConnected: t,
      onConnect: a,
      onDisconnect: s,
      isDisabledByAdmin: n,
    }),
  td = ({
    entry: t,
    isConnected: s,
    onDisconnect: a,
    onConnect: n,
    redirectUri: o,
  }) =>
    e.jsx(vs, {
      isConnected: s,
      onConnect: () => n({ id: t.id }, "settings_connected_apps", Jc(t), o),
      onDisconnect: () => a(t?.type),
    }),
  vs = ({
    isConnected: t,
    isDisabledByAdmin: s,
    onDisconnect: a,
    onConnect: n,
  }) => {
    const o = k();
    return s
      ? e.jsx(we, {
          label: o.formatMessage(yt.disabledByAdmin),
          children: e.jsx(N, {
            onClick: a,
            color: "secondary",
            size: "small",
            disabled: s,
            children: e.jsx(r, { ...yt.connect }),
          }),
        })
      : t
        ? e.jsx(N, {
            onClick: a,
            color: "danger-outline",
            size: "small",
            children: e.jsx(r, { ...yt.disconnect }),
          })
        : e.jsx(N, {
            onClick: n,
            color: "secondary",
            size: "small",
            children: e.jsx(r, { ...yt.connect }),
          });
  },
  yt = D({
    connect: { id: "connectorSettings.connect", defaultMessage: "Connect" },
    disconnect: {
      id: "connectorSettings.disconnect",
      defaultMessage: "Disconnect",
    },
    disabledByAdmin: {
      id: "connectorSettings.disabledByAdmin",
      defaultMessage: "Disabled by workspace admin",
    },
  });
function $t({ type: t }) {
  let s,
    a = Xe.googleCalendarName,
    n = Xe.googleCalendarDesc;
  switch (t) {
    case et.GCAL_CONNECTOR:
      s = Ha;
      break;
    case et.GMAIL_CONNECTOR:
      (s = Wa), (a = Xe.gmailName), (n = Xe.gmailDesc);
      break;
    case et.GOOGLE_CONTACTS_CONNECTOR:
      (s = Ua), (a = Xe.googleContactsName), (n = Xe.googleContactsDesc);
      break;
  }
  const o = k(),
    { connectors: i } = ki([t]),
    c = i.get(t);
  if (!c) return null;
  const l = "#settings/ConnectorSettings";
  return e.jsx(_, {
    children: e.jsxs("div", {
      className: "flex flex-col gap-2 pt-3 pb-1",
      children: [
        e.jsxs("div", {
          className: "flex flex-row items-center gap-2",
          children: [
            e.jsx(s, { className: "icon-lg" }),
            e.jsx("p", {
              className: "text-md text-token-text-primary flex-1 font-semibold",
              children: o?.formatMessage(a),
            }),
            e.jsx(vs, {
              isConnected: !!c.access_token,
              onDisconnect: () => {
                Ga(c.type);
              },
              onConnect: () => {
                wi({ id: c.id }, l);
              },
            }),
          ],
        }),
        e.jsx("p", {
          className: "text-token-text-secondary",
          children: e.jsx(r, { ...n }),
        }),
      ],
    }),
  });
}
const Xe = D({
    googleCalendarDesc: {
      id: "connectorSettings.googleCalendarDesc.1",
      defaultMessage: "View your Google Calendar and schedule events.",
    },
    googleCalendarName: {
      id: "connectorSettings.googleCalendarName.1",
      defaultMessage: "Google Calendar",
    },
    gmailDesc: {
      id: "connectorSettings.gmailDesc.1",
      defaultMessage: "View and send emails from your Gmail account.",
    },
    gmailName: { id: "connectorSettings.gmailName.1", defaultMessage: "Gmail" },
    googleContactsDesc: {
      id: "connectorSettings.googleContactsDesc.1",
      defaultMessage: "View and manage your Google Contacts.",
    },
    googleContactsName: {
      id: "connectorSettings.googleContactsName.1",
      defaultMessage: "Google Contacts",
    },
  }),
  sd = (t) =>
    d.createElement(
      "svg",
      {
        width: 40,
        height: 40,
        viewBox: "0 0 40 40",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        ...t,
      },
      d.createElement("rect", { width: 40, height: 40, rx: 8, fill: "white" }),
      d.createElement("rect", {
        x: 0.5,
        y: 0.5,
        width: 39,
        height: 39,
        rx: 7.5,
        stroke: "black",
        strokeOpacity: 0.1,
      }),
      d.createElement("path", {
        d: "M23.3359 13.4346C23.5508 13.4346 23.917 13.4688 24.4346 13.5371C24.9521 13.6055 25.5186 13.8008 26.1338 14.123C26.7588 14.4355 27.3252 14.958 27.833 15.6904C27.8037 15.7197 27.6621 15.8271 27.4082 16.0127C27.1543 16.1885 26.8711 16.4521 26.5586 16.8037C26.2461 17.1455 25.9727 17.585 25.7383 18.1221C25.5039 18.6494 25.3867 19.2793 25.3867 20.0117C25.3867 20.8516 25.5332 21.5645 25.8262 22.1504C26.1289 22.7363 26.4756 23.21 26.8662 23.5713C27.2666 23.9229 27.6182 24.1816 27.9209 24.3477C28.2334 24.5137 28.3994 24.6016 28.4189 24.6113C28.4092 24.6504 28.2822 24.9971 28.0381 25.6514C27.8037 26.3057 27.4131 27.0332 26.8662 27.834C26.3877 28.5273 25.8701 29.167 25.3135 29.7529C24.7666 30.3389 24.1074 30.6318 23.3359 30.6318C22.8184 30.6318 22.3936 30.5586 22.0615 30.4121C21.7295 30.2559 21.3877 30.1045 21.0361 29.958C20.6846 29.8018 20.2109 29.7236 19.6152 29.7236C19.0391 29.7236 18.5557 29.8018 18.165 29.958C17.7842 30.1143 17.418 30.2705 17.0664 30.4268C16.7246 30.583 16.3193 30.6611 15.8506 30.6611C15.1377 30.6611 14.5127 30.3779 13.9756 29.8115C13.4385 29.2451 12.8867 28.5664 12.3203 27.7754C11.666 26.8379 11.1045 25.6953 10.6357 24.3477C10.1768 22.9902 9.94727 21.623 9.94727 20.2461C9.94727 18.7715 10.2256 17.5361 10.7822 16.54C11.3389 15.5342 12.0518 14.7773 12.9209 14.2695C13.7998 13.752 14.708 13.4932 15.6455 13.4932C16.1436 13.4932 16.6123 13.5762 17.0518 13.7422C17.4912 13.8984 17.9014 14.0596 18.2822 14.2256C18.6729 14.3916 19.0244 14.4746 19.3369 14.4746C19.6396 14.4746 19.9912 14.3867 20.3916 14.2109C20.792 14.0352 21.2412 13.8643 21.7393 13.6982C22.2373 13.5225 22.7695 13.4346 23.3359 13.4346ZM22.5303 11.5742C22.1494 12.0332 21.6709 12.4189 21.0947 12.7314C20.5186 13.0342 19.9717 13.1855 19.4541 13.1855C19.3467 13.1855 19.2441 13.1758 19.1465 13.1562C19.1367 13.127 19.127 13.0732 19.1172 12.9951C19.1074 12.917 19.1025 12.834 19.1025 12.7461C19.1025 12.1602 19.2295 11.5938 19.4834 11.0469C19.7373 10.4902 20.0254 10.0313 20.3477 9.66992C20.7578 9.18164 21.2754 8.77637 21.9004 8.4541C22.5254 8.13184 23.1211 7.96094 23.6875 7.94141C23.7168 8.06836 23.7314 8.21973 23.7314 8.39551C23.7314 8.98145 23.6191 9.55273 23.3945 10.1094C23.1699 10.6562 22.8818 11.1445 22.5303 11.5742Z",
        fill: "black",
      }),
    );
function ad({
  connectorType: t,
  description: s,
  linkId: a,
  customRedirectUrl: n,
  isDisabledByAdmin: o,
}) {
  const i = _i();
  let c, l;
  switch (t) {
    case E.GDRIVE_ACTION_CONNECTOR:
      (c = za), (l = "Google Drive (Deep Research)");
      break;
    case E.GITHUB_CONNECTOR:
      (c = Ui), (l = "GitHub");
      break;
    case E.DROPBOX_CONNECTOR:
      (c = Gi), (l = "Dropbox");
      break;
    case E.HUBSPOT_CONNECTOR:
      (c = Fi), (l = "Hubspot");
      break;
    case E.LINEAR_CONNECTOR:
      (c = Bi), (l = "Linear");
      break;
    case E.SHAREPOINT_CONNECTOR:
      (c = Ka), (l = "Microsoft OneDrive (work/school)");
      break;
    case E.GCAL_CONNECTOR:
      (c = Ha), (l = "Google Calendar");
      break;
    case E.GMAIL_CONNECTOR:
      (c = Wa), (l = "Gmail");
      break;
    case E.GOOGLE_CONTACTS_CONNECTOR:
      (c = Ua), (l = "Google Contacts");
      break;
    case E.OUTLOOK_EMAIL_CONNECTOR:
      (c = Ri), (l = "Outlook Email");
      break;
    case E.OUTLOOK_CALENDAR_CONNECTOR:
      (c = Oi), (l = "Outlook Calendar");
      break;
    case E.TEAMS_CONNECTOR:
      (c = Ii), (l = "Teams");
      break;
    case E.BOX_CONNECTOR:
      (c = Di), (l = "Box");
      break;
    case E.INTERCOM_CONNECTOR:
      (c = Ai), (l = "Intercom");
      break;
  }
  const u = Pe(),
    m = !!a;
  return e.jsx(_, {
    children: e.jsx("div", {
      className: "pt-3 pb-1",
      children: e.jsx(Ye, {
        icon: e.jsx(c, { className: "icon-lg" }),
        title: l,
        description: e.jsx(r, {
          ...s,
          values: {
            help_center_article: e.jsx("a", {
              href: "https://help.openai.com/en/articles/11145903",
              className: "underline",
              target: "_blank",
              rel: "noopener noreferrer",
              children: e.jsx(r, {
                id: "AM6qbf",
                defaultMessage: "help center article",
              }),
            }),
          },
        }),
        statusIndicator: e.jsx(ed, {
          isConnected: m,
          onDisconnect: () => {
            t === E.GITHUB_CONNECTOR && Pi(), Ei(qa[t]);
          },
          onConnect: () => {
            Li(t, u, n, i);
          },
          isDisabledByAdmin: o,
        }),
        showGitHubConfigure: t === E.GITHUB_CONNECTOR && m && !o,
      }),
    }),
  });
}
function Qt({ entry: t, description: s }) {
  let a;
  switch (t.type) {
    case Q.CONFLUENCE:
      a = Ki;
      break;
    case Q.GDRIVE:
      a = za;
      break;
    case Q.JIRA:
      a = Vi;
      break;
    case Q.NOTION_OPEN_CONNECTOR:
      a = Hi;
      break;
    case Q.O365:
    case Q.O365_PERSONAL:
    case Q.O365_BUSINESS:
      a = Ka;
      break;
    case Q.SLACK_OPEN_CONNECTOR:
      a = Wi;
      break;
  }
  const n = k();
  return e.jsx(_, {
    children: e.jsx("div", {
      className: "pt-3 pb-1",
      children: e.jsx(Ye, {
        icon: e.jsx(a, { className: "icon-lg" }),
        title: Ni(t.type, n),
        description: e.jsx(r, { ...s }),
        statusIndicator: e.jsx(td, {
          entry: t,
          isConnected: !!t.access_token,
          onDisconnect: Ga,
          onConnect: Va,
          redirectUri: "#settings/ConnectorSettings",
        }),
      }),
    }),
  });
}
function nd({ clientApplications: t }) {
  const { mutate: s, isPending: a } = Ti();
  return e.jsx(e.Fragment, {
    children: t.map((n) =>
      e.jsx(
        od,
        {
          clientApplication: n,
          disabled: a,
          onDisconnect: () => {
            T.logEventWithStatsig(
              "Connector Settings: Client Application Disconnect Button Clicked",
              "chatgpt_connector_settings_client_application_disconnect_button_clicked",
              { id: n.id, name: n.name, type: n.type },
            ),
              s(n.id);
          },
        },
        n.id,
      ),
    ),
  });
}
function od({ clientApplication: t, disabled: s, onDisconnect: a }) {
  return e.jsx(_, {
    children: e.jsx("div", {
      className: "pt-3 pb-1",
      children: e.jsx(Ye, {
        icon: e.jsx(sd, { className: "icon-lg" }),
        title: t.name,
        description: e.jsx(r, { ...ua.appleDesc }),
        statusIndicator: e.jsx(N, {
          onClick: a,
          color: "danger-outline",
          size: "small",
          disabled: s,
          children: e.jsx(r, { ...ua.disconnect }),
        }),
      }),
    }),
  });
}
const ua = D({
    appleDesc: {
      id: "P5OVxG",
      defaultMessage:
        "Get personalized ChatGPT responses and Plus benefits when using Siri and Writing Tools.",
    },
    disconnect: {
      id: "connectorSettings.disconnectButton",
      defaultMessage: "Disconnect",
    },
  }),
  id = () => {
    const {
        isGdriveEnabled: t,
        isO365Enabled: s,
        connectorConfig: a,
        isLoading: n,
      } = Bt(),
      { value: o } = Ce("4206189746"),
      i = a.get(Q.GDRIVE),
      c = a.get(Q.O365_PERSONAL),
      l = a.get(Q.O365_BUSINESS),
      u = t && !!i,
      m = s && !!c,
      h = s && !!l,
      g = u || m || h || o;
    return n
      ? e.jsx("div", {
          className: "flex justify-center",
          children: e.jsx(te, {}),
        })
      : !n && !g
        ? e.jsx(xt, {
            type: "info",
            children: e.jsx(r, { ...Be.noConnectorSettings }),
          })
        : e.jsx(e.Fragment, {
            children: e.jsxs("div", {
              className: "flex flex-col",
              children: [
                e.jsxs(_, {
                  children: [
                    e.jsxs("div", {
                      className:
                        "text-md text-token-text-primary mb-1 flex items-center gap-2 font-medium",
                      children: [
                        e.jsx(fs, { className: "icon-md" }),
                        e.jsx(r, { ...Be.fileUploadsTitle }),
                      ],
                    }),
                    e.jsx("div", {
                      children: e.jsx("p", {
                        className: "text-token-text-secondary",
                        children: e.jsx(r, { ...Be.fileUploadsDescription }),
                      }),
                    }),
                  ],
                }),
                e.jsxs("div", {
                  className: "border-b",
                  children: [
                    o &&
                      e.jsxs(e.Fragment, {
                        children: [
                          e.jsx($t, { type: et.GCAL_CONNECTOR }),
                          e.jsx($t, { type: et.GMAIL_CONNECTOR }),
                          e.jsx($t, { type: et.GOOGLE_CONTACTS_CONNECTOR }),
                        ],
                      }),
                    i &&
                      u &&
                      e.jsx(Qt, { entry: i, description: Be.googleDriveDesc }),
                    c && m && e.jsx(Qt, { entry: c, description: Be.o365Desc }),
                    l &&
                      h &&
                      e.jsx(Qt, { entry: l, description: Be.o365BusinessDesc }),
                  ],
                }),
              ],
            }),
          });
  },
  rd = new Set([
    E.GCAL_CONNECTOR,
    E.GMAIL_CONNECTOR,
    E.GOOGLE_CONTACTS_CONNECTOR,
  ]);
function ld(t, s, a) {
  return rd.has(a) ? t[a] || s : !!t[a];
}
const cd = () => {
    const {
        isConfluenceEnabled: t,
        isJiraEnabled: s,
        isNotionOpenConnectorEnabled: a,
        isSlackOpenConnectorEnabled: n,
        connectorConfig: o,
        isLoading: i,
      } = Bt(),
      c = o.get(Q.CONFLUENCE),
      l = o.get(Q.NOTION_OPEN_CONNECTOR),
      u = o.get(Q.JIRA),
      m = o.get(Q.SLACK_OPEN_CONNECTOR),
      h = t && !!c,
      g = s && !!u,
      f = a && !!l,
      p = n && !!m,
      { value: y } = Ce("4206189746"),
      { clientApplications: M } = Ya(),
      j = M?.filter(({ type: P }) => P === "apple"),
      { connectorLinks: w, isLoading: x } = nt(),
      v = El(),
      { enabled: S } = Tl(),
      L = h || g || f || p || Object.values(v).some(Boolean) || y || j?.length;
    return i || x
      ? e.jsx("div", {
          className: "flex justify-center",
          children: e.jsx(te, {}),
        })
      : !i && !L
        ? null
        : e.jsxs("div", {
            children: [
              e.jsxs(_, {
                children: [
                  e.jsxs("div", {
                    className:
                      "text-md text-token-text-primary mb-1 flex items-center gap-2 font-medium",
                    children: [
                      e.jsx(hs, { className: "icon-md" }),
                      e.jsx(r, { ...Be.connectorsTitle }),
                    ],
                  }),
                  e.jsx("div", {
                    children: e.jsx("p", {
                      className: "text-token-text-secondary",
                      children: e.jsx(r, {
                        ...Be.connectorsDescription,
                        values: {
                          learn_more_link: e.jsx("a", {
                            href: "https://help.openai.com/en/articles/11145903",
                            className: "underline",
                            target: "_blank",
                            rel: "noopener noreferrer",
                            children: e.jsx(r, {
                              id: "JX5fMM",
                              defaultMessage: "Learn more",
                            }),
                          }),
                        },
                      }),
                    }),
                  }),
                ],
              }),
              e.jsxs("div", {
                className: "border-b",
                children: [
                  !1,
                  !1,
                  !1,
                  !1,
                  Object.entries(v).map(([P, I]) =>
                    ld(v, y, P) && ma[P]
                      ? e.jsx(
                          "div",
                          {
                            id: zi[P],
                            children: e.jsx(ad, {
                              connectorType: P,
                              description: ma[P],
                              linkId: w.get(qa[P])?.[0]?.id,
                              isDisabledByAdmin: P === E.GITHUB_CONNECTOR && !S,
                            }),
                          },
                          P,
                        )
                      : null,
                  ),
                  j && e.jsx(nd, { clientApplications: j }),
                ],
              }),
            ],
          });
  },
  Be = D({
    fileUploadsTitle: {
      id: "connectorSettings.fileUploadsTitle",
      defaultMessage: "File uploads",
    },
    fileUploadsDescription: {
      id: "connectorSettings.fileUploadsDescription",
      defaultMessage:
        "These apps will allow you to add files to ChatGPT messages.",
    },
    connectorsTitle: {
      id: "connectorSettings.connectorsTitle",
      defaultMessage: "Connectors (Beta)",
    },
    connectorsDescription: {
      id: "connectorSettings.connectorsDescription",
      defaultMessage:
        "Connect these data sources so ChatGPT can access their information  based on what youre authorized to view. {learn_more_link}",
    },
    googleDriveDesc: {
      id: "connectorSettings.googleDriveDesc.1",
      defaultMessage: "Upload Google Docs, Sheets, Slides and other files.",
    },
    o365Desc: {
      id: "connectorSettings.o365Desc.1",
      defaultMessage:
        "Upload Microsoft Word, Excel, PowerPoint and other files.",
    },
    o365BusinessDesc: {
      id: "connectorSettings.o365BusinessDesc.1",
      defaultMessage:
        "Upload Microsoft Word, Excel, PowerPoint, and other files, including those from SharePoint sites.",
    },
    noConnectorSettings: {
      id: "connectorSettings.noConnectorSettings",
      defaultMessage: "Unable to get connected apps",
    },
  }),
  ma = {
    [E.GITHUB_CONNECTOR]: {
      id: "connectorSettings.githubDesc.1",
      defaultMessage:
        "Allow ChatGPT deep research to read your GitHub repositories.",
      description:
        "Shown in user settings. Lets users grant ChatGPT deep research read-only access to their GitHub repositories.",
    },
    [E.GDRIVE_ACTION_CONNECTOR]: {
      id: "connectorSettings.gdriveActionDesc.1",
      defaultMessage: "Allow ChatGPT deep research to read Google Drive files.",
      description:
        "Shown in user settings. Lets users grant ChatGPT deep research read-only access to their Google Drive content.",
    },
    [E.DROPBOX_CONNECTOR]: {
      id: "connectorSettings.dropboxDesc.1",
      defaultMessage: "Allow ChatGPT deep research to read Dropbox files.",
      description:
        "Shown in user settings. Lets users grant ChatGPT deep research read-only access to their Dropbox files.",
    },
    [E.HUBSPOT_CONNECTOR]: {
      id: "connectorSettings.hubspotDesc.1",
      defaultMessage: "Allow ChatGPT deep research to read Hubspot.",
      description:
        "Shown in user settings. Lets users grant ChatGPT deep research read-only access to their Hubspot.",
    },
    [E.LINEAR_CONNECTOR]: {
      id: "connectorSettings.linearDesc.1",
      defaultMessage: "Allow ChatGPT deep research to read Linear projects.",
      description:
        "Shown in user settings. Lets users grant ChatGPT deep research read-only access to their Linear projects.",
    },
    [E.SHAREPOINT_CONNECTOR]: {
      id: "connectorSettings.sharepointDesc.1",
      defaultMessage:
        "Allow ChatGPT deep research to read files, including those from Sharepoint.",
      description:
        "Shown in user settings. Lets users grant ChatGPT deep research read-only access to their SharePoint/OneDrive files.",
    },
    [E.GCAL_CONNECTOR]: {
      id: "connectorSettings.gcalDesc.1",
      defaultMessage:
        "Allow ChatGPT to read and create Google Calendar events.",
      description:
        "Shown in user settings. Lets users grant ChatGPT read-only access to their Google Calendar events.",
    },
    [E.GMAIL_CONNECTOR]: {
      id: "connectorSettings.gmailDesc.1",
      defaultMessage: "Allow ChatGPT to read and send Gmail emails.",
      description:
        "Shown in user settings. Lets users grant ChatGPT access to their Gmail emails.",
    },
    [E.GOOGLE_CONTACTS_CONNECTOR]: {
      id: "connectorSettings.googleContactsDesc.1",
      defaultMessage: "Allow ChatGPT to read Google Contacts.",
      description:
        "Shown in user settings. Lets users grant ChatGPT read-only access to their Google Contacts.",
    },
    [E.BOX_CONNECTOR]: {
      id: "connectorSettings.boxDesc.1",
      defaultMessage: "Allow ChatGPT deep research to read Box files.",
      description:
        "Shown in user settings. Lets users grant ChatGPT deep research read-only access to their Box files.",
    },
    [E.TEAMS_CONNECTOR]: {
      id: "connectorSettings.teamsDesc.1",
      defaultMessage:
        "Allow ChatGPT deep research to read Microsoft Teams chats.",
      description:
        "Shown in user settings. Lets users grant ChatGPT deep research read-only access to their Microsoft Teams chats.",
    },
    [E.OUTLOOK_EMAIL_CONNECTOR]: {
      id: "connectorSettings.outlookEmailDesc.1",
      defaultMessage: "Allow ChatGPT deep research to read Outlook emails.",
      description:
        "Shown in user settings. Lets users grant ChatGPT deep research read-only access to their Outlook emails.",
    },
    [E.OUTLOOK_CALENDAR_CONNECTOR]: {
      id: "connectorSettings.outlookCalendarDesc.1",
      defaultMessage:
        "Allow ChatGPT deep research to read Outlook Calendar events.",
      description:
        "Shown in user settings. Lets users grant ChatGPT deep research read-only access to their Outlook Calendar events.",
    },
    [E.INTERCOM_CONNECTOR]: {
      id: "connectorSettings.intercomDesc.1",
      defaultMessage:
        "Allow ChatGPT deep research to read Intercom conversations.",
      description:
        "Shown in user settings. Lets users grant ChatGPT deep research read-only access to their Intercom conversations.",
    },
  };
function Sn() {
  const t = us();
  return (
    d.useEffect(() => {
      if (window.location.hash) {
        const s = window.location.hash,
          a = s.indexOf("?");
        if (a !== -1) {
          const n = s.substring(a + 1),
            i = new URLSearchParams(n).get("scroll"),
            c = "githubConnectorPopupShown";
          if (
            (localStorage.getItem(c) ||
              (window.open(
                "https://github.com/apps/chatgpt-connector/installations/select_target",
                "_blank",
              ),
              localStorage.setItem(c, "true")),
            i)
          ) {
            let l = 0;
            const u = 3,
              m = () => {
                const h = document.getElementById(i);
                h
                  ? h.scrollIntoView({ behavior: "smooth" })
                  : l < u && ((l += 1), setTimeout(m, 100));
              };
            m();
          }
        }
      }
    }, []),
    e.jsxs("div", {
      className: "flex flex-col",
      children: [
        t && e.jsx("div", { className: "mb-8", children: e.jsx(Al, {}) }),
        e.jsx("div", { className: "mb-8", children: e.jsx(id, {}) }),
        e.jsx("div", { className: "mb-8", children: e.jsx(cd, {}) }),
      ],
    })
  );
}
const Ze = ({ connector: t, className: s }) =>
    t.logo_url
      ? e.jsx("img", { src: t.logo_url, alt: t.name, className: s })
      : e.jsx(hs, { className: s }),
  Ut = [
    { title: "Category", value: "Developer Tools" },
    { title: "Developer", value: "OpenAI" },
  ],
  Wt = ({
    connector: t,
    onBackClick: s,
    details: a,
    onConnectClick: n,
    onDisconnectClick: o,
    isConnecting: i,
  }) =>
    e.jsxs("div", {
      children: [
        e.jsxs(N, {
          color: "ghost",
          onClick: s,
          contentWrapperClassName: "gap-[6px]",
          children: [
            e.jsx(Za, { className: "icon-md" }),
            e.jsx(r, { ...it.backButton }),
          ],
        }),
        e.jsxs("div", {
          className: "flex gap-3 px-4 pt-4",
          children: [
            e.jsx("div", {
              className: "max-h-fit rounded-2xl border p-2 shadow-md",
              children: e.jsx(Ze, {
                connector: t,
                className: "h-[40px] w-[40px]",
              }),
            }),
            e.jsxs("div", {
              className: qe("flex-1", { "self-center": !t.description }),
              children: [
                e.jsx("div", {
                  className: "text-lg font-semibold",
                  children: t.name,
                }),
                e.jsx("span", {
                  className: "text-token-text-tertiary",
                  children: t.description,
                }),
              ],
            }),
            n &&
              e.jsx("div", {
                className: t.description ? void 0 : "self-center",
                children: e.jsx(N, {
                  onClick: n,
                  loading: i,
                  children: e.jsx(r, { ...it.connectButton }),
                }),
              }),
            o &&
              e.jsx("div", {
                className: t.description ? void 0 : "self-center",
                children: e.jsxs(J.Root, {
                  children: [
                    e.jsx(J.BasicTrigger, {
                      children: e.jsx(N, {
                        children: e.jsx(r, { ...it.manageDropdown }),
                      }),
                    }),
                    e.jsx(J.Portal, {
                      children: e.jsx(J.Content, {
                        size: "small",
                        align: "end",
                        children: e.jsxs(J.Item, {
                          onClick: o,
                          color: "danger",
                          children: [
                            e.jsx(qi, { className: "icon-md" }),
                            e.jsx(r, { ...it.disconnectButton }),
                          ],
                        }),
                      }),
                    }),
                  ],
                }),
              }),
          ],
        }),
        e.jsxs("div", {
          className: "px-4 pt-6",
          children: [
            e.jsx("div", {
              className: "pb-3 text-base font-medium",
              children: e.jsx(r, { ...it.information }),
            }),
            e.jsx("div", {
              className: "flex flex-col gap-2 rounded-2xl border p-3",
              children: a.map((c) =>
                e.jsxs(
                  "div",
                  {
                    className: "flex justify-between gap-3",
                    children: [
                      e.jsx("span", {
                        className: "text-token-text-tertiary",
                        children: c.title,
                      }),
                      e.jsx("span", {
                        className: "truncate",
                        children: c.value,
                      }),
                    ],
                  },
                  c.title,
                ),
              ),
            }),
          ],
        }),
      ],
    }),
  Ss = ({ connector: t, link: s, onBackClick: a, onDisconnectClick: n }) => {
    const o = [
      {
        title: "Connected on",
        value: new Date(s.created_at).toLocaleString([], {
          year: "numeric",
          month: "short",
          day: "numeric",
          hour: "numeric",
          minute: "2-digit",
        }),
      },
      ...Ut,
    ];
    return e.jsx(Wt, {
      connector: t,
      onBackClick: a,
      details: o,
      onDisconnectClick: n,
    });
  },
  dd = ({
    connector: t,
    onBackClick: s,
    onDisconnectClick: a,
    internalKnowledgeConfig: n,
  }) => {
    const o = [
      {
        title: "Auth status",
        value: n.user_connection_details.auth_status ?? "",
      },
      {
        title: "Activation status",
        value: n.user_connection_details.activation_status ?? "",
      },
      ...Ut,
    ];
    return e.jsx(Wt, {
      connector: t,
      onBackClick: s,
      details: o,
      onDisconnectClick: a,
    });
  },
  ud = ({
    connector: t,
    onBackClick: s,
    onDisconnectClick: a,
    fileUploadConfig: n,
  }) => {
    const o = [
      {
        title: "Expires at",
        value: new Date(n.expires_at ?? "").toLocaleString([], {
          year: "numeric",
          month: "short",
          day: "numeric",
          hour: "numeric",
          minute: "2-digit",
        }),
      },
      ...Ut,
    ];
    return e.jsx(Wt, {
      connector: t,
      onBackClick: s,
      details: o,
      onDisconnectClick: a,
    });
  },
  kn = ({ connector: t, onBackClick: s, onConnectClick: a, isConnecting: n }) =>
    e.jsx(Wt, {
      connector: t,
      onBackClick: s,
      details: Ut,
      onConnectClick: a,
      isConnecting: n,
    }),
  it = D({
    backButton: { id: "2XH9oW", defaultMessage: "Back" },
    information: { id: "izGFIV", defaultMessage: "Information" },
    connectButton: { id: "bQDuj2", defaultMessage: "Connect" },
    disconnectButton: { id: "eeZbkM", defaultMessage: "Disconnect" },
    manageDropdown: { id: "q/O9f7", defaultMessage: "Manage" },
  }),
  ks = ({ children: t }) =>
    e.jsx("span", {
      className:
        "bg-token-bg-tertiary text-token-text-secondary my-0.5 inline-block rounded-md px-1.5 py-0.5 text-xs",
      children: t,
    }),
  md = ({ internalKnowledgeConfig: t }) => {
    const s = k();
    return e.jsxs("div", {
      className: "flex items-center gap-1",
      children: [
        e.jsx(ks, { children: s.formatMessage(ze.sync) }),
        e.jsx(Zi, { connection: t, location: "user_settings" }),
      ],
    });
  },
  gd = () => {
    const t = k(),
      s = R(),
      { refetch: a } = Bt();
    return async () => {
      try {
        await O.safeDelete("/connectors/user_setting/{connector_name}", {
          parameters: { path: { connector_name: Q.GDRIVE } },
        });
      } catch {
        s.danger(t.formatMessage(ze.disconnectError));
      } finally {
        a();
      }
    };
  },
  fd = () => {
    const t = k(),
      s = R(),
      { refetch: a } = Dl();
    return async (n) => {
      try {
        await Yi.user_disconnect(n);
      } catch {
        s.danger(t.formatMessage(ze.disconnectError));
      } finally {
        a();
      }
    };
  },
  wn = ({
    connector: t,
    links: s,
    removeConnectorId: a,
    onLinkClick: n,
    onAddClick: o,
    additionalLinks: i,
  }) => {
    const c = k();
    return e.jsxs("div", {
      children: [
        e.jsxs("div", {
          className: "flex justify-between",
          children: [
            e.jsxs(N, {
              color: "ghost",
              onClick: a,
              contentWrapperClassName: "gap-1.5",
              children: [
                e.jsx(Za, { className: "icon-md" }),
                e.jsx(r, { ...ze.backButton }),
              ],
            }),
            e.jsx(N, {
              color: "secondary",
              onClick: o,
              children: e.jsx(r, { ...ze.addButton }),
            }),
          ],
        }),
        e.jsxs("div", {
          className: "pt-4",
          children: [
            s.map((l) =>
              e.jsx(
                _,
                {
                  children: e.jsx("button", {
                    className: "w-full",
                    onClick: () => n(l.id),
                    children: e.jsx("div", {
                      className: "px-3 pt-3 pb-1",
                      children: e.jsx(Ye, {
                        icon: e.jsx(Ze, { connector: t, className: "h-6 w-6" }),
                        title:
                          l.owner_profile?.email ??
                          l.owner_profile?.name ??
                          l.name,
                        description:
                          t.id === Se
                            ? e.jsx(ks, {
                                children: c.formatMessage(ze.deepResearch),
                              })
                            : void 0,
                        statusIndicator: e.jsx(Et, { className: "icon-md" }),
                      }),
                    }),
                  }),
                },
                l.id,
              ),
            ),
            i,
          ],
        }),
      ],
    });
  },
  hd = ({ connector: t, links: s, removeConnectorId: a, onAddClick: n }) => {
    const o = Ms(),
      [i, c] = d.useState(null),
      l = d.useMemo(() => s.find((m) => m.id === i), [s, i]);
    if (!l)
      return e.jsx(wn, {
        connector: t,
        links: s,
        removeConnectorId: a,
        onLinkClick: (m) => c(m),
        onAddClick: n,
      });
    const u = async () => {
      await o(l.id, () => c(null));
    };
    return e.jsx(Ss, {
      connector: t,
      onBackClick: () => c(null),
      link: l,
      onDisconnectClick: u,
    });
  },
  pd = ({ connector: t, link: s, removeConnectorId: a }) => {
    const n = Ms(),
      o = async () => {
        await n(s.id, () => a());
      };
    return e.jsx(Ss, {
      connector: t,
      onBackClick: () => a(),
      link: s,
      onDisconnectClick: o,
    });
  },
  xd = ({ onAddClick: t }) => {
    const s = k(),
      a = Ft(),
      n = nt(),
      o = a.platformConnectors.get(Se),
      i = n.connectorLinks.get(Se) ?? [],
      c = Gt(),
      l = Ms(),
      u = fd(),
      m = gd(),
      [h, g] = d.useState(null),
      { internalKnowledgeConfigs: f, fileUploadConfig: p, isLoading: y } = bs(),
      M = d.useMemo(
        () =>
          f?.filter(
            (w) => w.user_connection_details.auth_status !== "not_connected",
          ) ?? [],
        [f],
      ),
      j = !!p?.access_token || !!M.length || !!i.length;
    if (a.isFetching || n.isLoading || y)
      return e.jsx("div", {
        className: "flex justify-center",
        children: e.jsx(te, {}),
      });
    if (a.error || n.error || !o) return c(), null;
    if (!j)
      return e.jsx(kn, {
        connector: o,
        onBackClick: () => c(),
        onConnectClick: t,
        isConnecting: !1,
      });
    if (!h) {
      const w = (x) => {
        const v = i.find((S) => S.id === x);
        v && g({ type: "platform_connector", link: v });
      };
      return e.jsx(wn, {
        connector: o,
        links: i,
        removeConnectorId: () => c(),
        onLinkClick: w,
        onAddClick: t,
        additionalLinks: e.jsxs(e.Fragment, {
          children: [
            M.map((x) =>
              e.jsx(
                _,
                {
                  children: e.jsx("button", {
                    className: "w-full",
                    onClick: () => g({ type: "internal_knowledge", config: x }),
                    children: e.jsx("div", {
                      className: "px-3 pt-3 pb-1",
                      children: e.jsx(Ye, {
                        icon: e.jsx(Ze, { connector: o, className: "h-6 w-6" }),
                        title: x.connection_display_info.display_name,
                        description: e.jsx(md, { internalKnowledgeConfig: x }),
                        statusIndicator: e.jsx(Et, { className: "icon-md" }),
                      }),
                    }),
                  }),
                },
                x.user_connection_details.connection_instance_id,
              ),
            ),
            !!p?.access_token &&
              e.jsx(_, {
                children: e.jsx("button", {
                  className: "w-full",
                  onClick: () => g({ type: "file_uploads" }),
                  children: e.jsx("div", {
                    className: "px-3 pt-3 pb-1",
                    children: e.jsx(Ye, {
                      icon: e.jsx(Ze, { connector: o, className: "h-6 w-6" }),
                      title: p.name,
                      description: e.jsx(ks, {
                        children: s.formatMessage(ze.fileUploads),
                      }),
                      statusIndicator: e.jsx(Et, { className: "icon-md" }),
                    }),
                  }),
                }),
              }),
          ],
        }),
      });
    }
    switch (h.type) {
      case "platform_connector": {
        const w = async () => {
          await l(h.link.id, () => g(null));
        };
        return e.jsx(Ss, {
          connector: o,
          onBackClick: () => g(null),
          link: h.link,
          onDisconnectClick: w,
        });
      }
      case "internal_knowledge": {
        const w = async () => {
          await u(h.config.user_connection_details.connection_instance_id);
        };
        return e.jsx(dd, {
          connector: o,
          onBackClick: () => g(null),
          onDisconnectClick: w,
          internalKnowledgeConfig: h.config,
        });
      }
      case "file_uploads":
        return p
          ? e.jsx(ud, {
              connector: o,
              onBackClick: () => g(null),
              onDisconnectClick: m,
              fileUploadConfig: p,
            })
          : null;
    }
  },
  Cd = ({ connectorId: t, onAddOauthLinkClick: s }) => {
    const [a, n] = d.useState(!1),
      o = Ft(),
      i = nt(),
      c = o.platformConnectors.get(t),
      l = i.connectorLinks.get(t),
      u = l && l.length > 0,
      m = Gt();
    if (o.isFetching || i.isLoading)
      return e.jsx("div", {
        className: "flex justify-center",
        children: e.jsx(te, {}),
      });
    if (o.error || i.error || !c) return m(), null;
    const h = async () => {
      switch (Js(c)) {
        case "OAUTH": {
          s();
          return;
        }
        case "NONE": {
          try {
            n(!0), await Il(c), i.refetch();
          } catch {
            n(!1);
          }
          return;
        }
      }
    };
    return u
      ? Js(c) === "NONE"
        ? e.jsx(pd, { connector: c, link: l[0], removeConnectorId: () => m() })
        : e.jsx(hd, {
            connector: c,
            links: l,
            removeConnectorId: () => m(),
            onAddClick: s,
          })
      : e.jsx(kn, {
          connector: c,
          onBackClick: () => m(),
          onConnectClick: h,
          isConnecting: a,
        });
  },
  Md = ({ connectorId: t, onAddClick: s }) =>
    t === Se
      ? e.jsx(xd, { onAddClick: s })
      : e.jsx(Cd, { connectorId: t, onAddOauthLinkClick: s }),
  ze = D({
    backButton: { id: "2XH9oW", defaultMessage: "Back" },
    addButton: { id: "lkrz+6", defaultMessage: "Add" },
    sync: { id: "21x0oN", defaultMessage: "Sync" },
    fileUploads: { id: "gFheug", defaultMessage: "File uploads" },
    deepResearch: { id: "EnDZig", defaultMessage: "Deep Research" },
    disconnectError: {
      id: "DqZbNO",
      defaultMessage: "Error disconnecting your account.",
    },
  }),
  bd = ({ connector: t }) => {
    const s = Gt();
    return e.jsxs(N, {
      color: "secondary",
      className: "rounded-lg border p-3 pb-[10px]",
      contentWrapperClassName: "flex-col gap-2 truncate items-start flex-1",
      onClick: () => s(t.id),
      children: [
        e.jsx(Ze, { connector: t, className: "max-h-[24px] max-w-[24px]" }),
        e.jsx("span", {
          className: "max-w-full truncate text-sm font-normal",
          children: t.name,
        }),
      ],
    });
  },
  jd = ({ connectors: t }) =>
    e.jsx(e.Fragment, {
      children: e.jsx("div", {
        className: "grid grid-cols-3 gap-2 sm:grid-cols-4",
        children: t.map((s) => e.jsx(bd, { connector: s }, s.id)),
      }),
    }),
  Nn = ({ connector: t, numLinks: s }) => {
    const a = Gt();
    return e.jsx(_, {
      children: e.jsx("button", {
        className: "w-full",
        onClick: () => a(t.id),
        children: e.jsx("div", {
          className: "px-3 pt-3 pb-1",
          children: e.jsx(Ye, {
            icon: e.jsx(Ze, { connector: t, className: "h-6 w-6" }),
            title: t.name,
            description:
              s > 1
                ? e.jsx(r, { ...vd.enabledConnectorsTitle, values: { num: s } })
                : void 0,
            statusIndicator: e.jsx(Et, { className: "icon-md" }),
          }),
        }),
      }),
    });
  },
  yd = ({ connectorLinks: t, platformConnectors: s }) =>
    e.jsx(e.Fragment, {
      children: Array.from(t.entries()).map(([a, n]) => {
        const o = s.get(a),
          i = n.length;
        return o ? e.jsx(Nn, { connector: o, numLinks: i }, a) : null;
      }),
    }),
  vd = D({
    enabledConnectorsTitle: {
      id: "4uPNOa",
      defaultMessage: "{num} connections",
    },
  }),
  Sd = (t) => {
    "use forget";
    const s = ht.c(26),
      { onCreateCustomConnectorClick: a } = t,
      n = Ft(),
      o = nt();
    let i, c;
    s[0] !== o.connectorLinks
      ? ((c = new Map(o.connectorLinks)),
        c.delete(Se),
        (s[0] = o.connectorLinks),
        (s[1] = c))
      : (c = s[1]),
      (i = c);
    const l = i,
      { fileUploadConfig: u, internalKnowledgeConfigs: m } = bs();
    let h;
    h = m?.filter(kd).length ?? 0;
    const g = h,
      f =
        (u?.access_token ? 1 : 0) + g + (o.connectorLinks.get(Se)?.length ?? 0);
    let p;
    s[2] !== n.platformConnectors
      ? ((p = n.platformConnectors.get(Se)),
        (s[2] = n.platformConnectors),
        (s[3] = p))
      : (p = s[3]);
    const y = p;
    let M, j;
    s[4] !== n.platformConnectors || s[5] !== o.connectorLinks || s[6] !== f
      ? ((j = Array.from(n.platformConnectors.values()).filter((G) =>
          G.id === Se ? f === 0 : !o.connectorLinks.has(G.id),
        )),
        (s[4] = n.platformConnectors),
        (s[5] = o.connectorLinks),
        (s[6] = f),
        (s[7] = j))
      : (j = s[7]),
      (M = j);
    const w = M;
    if (n.isFetching || o.isLoading) {
      let G;
      return (
        s[8] === Symbol.for("react.memo_cache_sentinel")
          ? ((G = e.jsx("div", {
              className: "flex justify-center",
              children: e.jsx(te, {}),
            })),
            (s[8] = G))
          : (G = s[8]),
        G
      );
    }
    if (n.error || o.error || !n.platformConnectors.size) {
      let G;
      return (
        s[9] === Symbol.for("react.memo_cache_sentinel")
          ? ((G = e.jsx("div", {
              className: "flex justify-center",
              children: e.jsx(xt, {
                type: "danger",
                children: e.jsx(r, { ...vt.error }),
              }),
            })),
            (s[9] = G))
          : (G = s[9]),
        G
      );
    }
    const x = l.size + f > 0;
    let v;
    s[10] !== l ||
    s[11] !== n.platformConnectors ||
    s[12] !== y ||
    s[13] !== x ||
    s[14] !== f
      ? ((v =
          x &&
          e.jsxs("div", {
            className: "pb-6",
            children: [
              e.jsx("div", {
                className: "pb-2 text-lg font-semibold",
                children: e.jsx(r, { ...vt.enabledConnectorsTitle }),
              }),
              e.jsxs("div", {
                className: "flex flex-col gap-2",
                children: [
                  e.jsx(yd, {
                    connectorLinks: l,
                    platformConnectors: n.platformConnectors,
                  }),
                  f > 0 && y && e.jsx(Nn, { connector: y, numLinks: f }),
                ],
              }),
            ],
          })),
        (s[10] = l),
        (s[11] = n.platformConnectors),
        (s[12] = y),
        (s[13] = x),
        (s[14] = f),
        (s[15] = v))
      : (v = s[15]);
    let S;
    s[16] === Symbol.for("react.memo_cache_sentinel")
      ? ((S = e.jsx(r, { ...vt.allConnectorsTitle })), (s[16] = S))
      : (S = s[16]);
    let L;
    s[17] === Symbol.for("react.memo_cache_sentinel")
      ? ((L = e.jsx(r, { ...vt.createCustomConnectorButton })), (s[17] = L))
      : (L = s[17]);
    let P;
    s[18] !== a
      ? ((P = e.jsxs("div", {
          className:
            "flex items-center justify-between pb-4 text-lg font-semibold",
          children: [
            S,
            e.jsx(N, {
              onClick: a,
              color: "secondary",
              size: "small",
              children: L,
            }),
          ],
        })),
        (s[18] = a),
        (s[19] = P))
      : (P = s[19]);
    let I;
    s[20] !== w
      ? ((I = e.jsx(jd, { connectors: w })), (s[20] = w), (s[21] = I))
      : (I = s[21]);
    let ie;
    return (
      s[22] !== I || s[23] !== v || s[24] !== P
        ? ((ie = e.jsxs("div", { children: [v, P, I] })),
          (s[22] = I),
          (s[23] = v),
          (s[24] = P),
          (s[25] = ie))
        : (ie = s[25]),
      ie
    );
  },
  vt = D({
    enabledConnectorsTitle: {
      id: "Ew4Xpl",
      defaultMessage: "Enabled connectors",
    },
    allConnectorsTitle: {
      id: "l9kHAj",
      defaultMessage: "Browse all connectors",
    },
    error: { id: "F+mY2E", defaultMessage: "Error fetching connectors" },
    createCustomConnectorButton: { id: "oiYvuQ", defaultMessage: "Custom" },
  });
function kd(t) {
  return t.user_connection_details.auth_status !== "not_connected";
}
const wd = (t) => {
    "use forget";
    const s = ht.c(9),
      { onAddOauthLinkClick: a, onCreateCustomConnectorClick: n } = t,
      o = hn();
    if (o) {
      let m;
      return (
        s[0] !== o || s[1] !== a
          ? ((m = e.jsx(Md, { connectorId: o, onAddClick: a })),
            (s[0] = o),
            (s[1] = a),
            (s[2] = m))
          : (m = s[2]),
        m
      );
    }
    let i;
    s[3] !== n
      ? ((i = e.jsx(Sd, { onCreateCustomConnectorClick: n })),
        (s[3] = n),
        (s[4] = i))
      : (i = s[4]);
    let c, l;
    s[5] === Symbol.for("react.memo_cache_sentinel")
      ? ((c = e.jsx("div", { className: "mt-8" })),
        (l = e.jsx(Sn, {})),
        (s[5] = c),
        (s[6] = l))
      : ((c = s[5]), (l = s[6]));
    let u;
    return (
      s[7] !== i
        ? ((u = e.jsxs(e.Fragment, { children: [i, c, l] })),
          (s[7] = i),
          (s[8] = u))
        : (u = s[8]),
      u
    );
  },
  Nd = () => {
    const [t, s] = d.useState(!1),
      a = at();
    return !a?.data.profilePictureUrl || t
      ? e.jsx("span", {
          className: "bg-tertiary rounded-xl border-[0.5px] p-2 shadow-sm",
          children: e.jsx(wa, { className: "h-8 w-8" }),
        })
      : e.jsx("span", {
          className: "h-12 w-12 rounded-xl border-[0.5px] bg-black shadow-sm",
          children: e.jsx("img", {
            src: a.data.profilePictureUrl,
            alt: a.data.name ?? "",
            onError: () => s(!0),
          }),
        });
  },
  ws = ({ title: t, connector: s, onClose: a }) =>
    e.jsxs(e.Fragment, {
      children: [
        e.jsx("div", {
          className: "flex justify-end pb-6",
          children: e.jsx(va, { onClick: a }),
        }),
        e.jsxs("div", {
          className: "flex flex-col items-center",
          children: [
            e.jsxs("div", {
              className: "flex items-center gap-2.5",
              children: [
                e.jsx(Nd, {}),
                e.jsxs("div", {
                  className: "flex gap-1",
                  children: [
                    e.jsx("span", {
                      className: "h-1.5 w-1.5 rounded-full bg-gray-200",
                    }),
                    e.jsx("span", {
                      className: "h-1.5 w-1.5 rounded-full bg-gray-200",
                    }),
                    e.jsx("span", {
                      className: "h-1.5 w-1.5 rounded-full bg-gray-200",
                    }),
                  ],
                }),
                e.jsx("span", {
                  className: "rounded-xl border-[0.5px] p-2 shadow-sm",
                  children: e.jsx(Ze, { connector: s, className: "h-8 w-8" }),
                }),
              ],
            }),
            e.jsx("div", {
              className: "pt-4 text-center text-2xl font-semibold",
              children: t,
            }),
          ],
        }),
      ],
    }),
  _n = ({ onContinue: t, options: s }) => {
    const [a, n] = d.useState(void 0);
    return e.jsxs(e.Fragment, {
      children: [
        e.jsx($i, {
          value: a,
          onValueChange: (o) => n(o),
          className: "flex flex-col gap-2 pt-8 pb-6",
          children: s.map(({ value: o, label: i, description: c, Icon: l }) =>
            e.jsxs(
              Qi,
              {
                value: o,
                className:
                  "flex items-center gap-4 rounded-2xl border p-4 text-sm",
                children: [
                  l &&
                    e.jsx("span", {
                      children: e.jsx(l, { className: "h-6 w-6" }),
                    }),
                  e.jsxs("div", {
                    className: "flex-1 text-start",
                    children: [
                      e.jsx("div", {
                        className: "pb-0.5",
                        children: typeof i == "string" ? i : e.jsx(r, { ...i }),
                      }),
                      e.jsx("div", {
                        className: "text-token-text-secondary",
                        children: typeof c == "string" ? c : e.jsx(r, { ...c }),
                      }),
                    ],
                  }),
                  e.jsx("div", {
                    className:
                      "border-token-border-secondary flex h-5 flex-shrink-0 basis-5 items-center justify-center overflow-hidden rounded-full border",
                    children: e.jsx(Xi, {
                      className:
                        "bg-gray-950 p-0.5 text-white dark:bg-white dark:text-gray-950",
                      children: e.jsx(Ji, { className: "h-4 w-4" }),
                    }),
                  }),
                ],
              },
              o,
            ),
          ),
        }),
        e.jsx(N, {
          className: "w-full",
          size: "large",
          disabled: !a,
          onClick: () => {
            a && t(a);
          },
          children: e.jsx(r, { ..._d.nextStepButton }),
        }),
      ],
    });
  },
  _d = D({
    nextStepButton: {
      id: "addConnectorLinkModal.nextStepButton",
      defaultMessage: "Continue",
    },
  }),
  Ld = ({
    connector: t,
    onClose: s,
    onContinue: a,
    canAddFileUpload: n,
    canAddInternalKnowledge: o,
  }) => {
    const i = d.useMemo(
      () => [...(n ? [Pd] : []), Ed, ...(o ? [Td] : [])],
      [n, o],
    );
    return e.jsxs(e.Fragment, {
      children: [
        e.jsx(ws, {
          title: e.jsx(r, { ...$e.selectProductTitle }),
          connector: t,
          onClose: s,
        }),
        e.jsx(_n, { onContinue: a, options: i }),
      ],
    });
  },
  $e = D({
    selectProductTitle: {
      id: "r2npOY",
      defaultMessage: "Select a connection type",
    },
    fileUploadsTitle: { id: "GNJePY", defaultMessage: "File Uploads" },
    fileUploadsDescription: {
      id: "i4Ln1d",
      defaultMessage: "Upload files as messages",
    },
    deepResearchTitle: { id: "8qeb9e", defaultMessage: "Deep Research" },
    deepResearchDescription: {
      id: "fBhPam",
      defaultMessage: "ChatGPT can read files for Deep Research",
    },
    internalKnowledgeTitle: {
      id: "QGCBeD",
      defaultMessage: "Internal Knowledge",
    },
    internalKnowledgeDescription: {
      id: "OpAZp/",
      defaultMessage:
        "ChatGPT can read files when using Internal Knowledge only",
    },
  }),
  Pd = {
    value: "fileUploads",
    label: $e.fileUploadsTitle,
    description: $e.fileUploadsDescription,
    Icon: fs,
  },
  Ed = {
    value: "deepResearch",
    label: $e.deepResearchTitle,
    description: $e.deepResearchDescription,
    Icon: er,
  },
  Td = {
    value: "internalKnowledge",
    label: $e.internalKnowledgeTitle,
    description: $e.internalKnowledgeDescription,
    Icon: tr,
  },
  Ad = (t) =>
    d.createElement(
      "svg",
      {
        width: 24,
        height: 24,
        viewBox: "0 0 24 24",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        ...t,
      },
      d.createElement("path", {
        d: "M7.75 9.5C8.57843 9.5 9.25 8.82843 9.25 8C9.25 7.17157 8.57843 6.5 7.75 6.5C6.92157 6.5 6.25 7.17157 6.25 8C6.25 8.82843 6.92157 9.5 7.75 9.5Z",
        fill: "currentColor",
      }),
      d.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M7.75 3C4.43629 3 1.75 5.68629 1.75 9C1.75 11.0087 2.73751 12.7858 4.25 13.8738V18.1716C4.25 18.9672 4.56607 19.7303 5.12868 20.2929L6.68934 21.8536C7.27513 22.4393 8.22487 22.4393 8.81066 21.8536L10.3713 20.2929C10.9339 19.7303 11.25 18.9672 11.25 18.1716V17.5C11.25 17.3026 11.1916 17.1096 11.0821 16.9453L10.4519 16L11.0821 15.0547C11.1916 14.8904 11.25 14.6974 11.25 14.5V13.8738C11.3027 13.8359 11.3548 13.7972 11.4062 13.7576C12.1611 14.5074 13.0998 15.0388 14.1164 15.3059L15.6565 19.318C15.9416 20.0608 16.5101 20.6599 17.237 20.9835L19.2533 21.8813C20.0101 22.2182 20.8968 21.8779 21.2337 21.121L22.1314 19.1047C22.4551 18.3779 22.4767 17.5522 22.1915 16.8094L21.9509 16.1825C21.8801 15.9982 21.7564 15.8389 21.5953 15.7248L20.6682 15.0681L20.9178 13.9598C20.9611 13.7672 20.9465 13.566 20.8758 13.3817L20.6513 12.7969C21.6732 11.2391 21.9582 9.22632 21.2384 7.35114C20.0509 4.25753 16.5803 2.71234 13.4867 3.89987C12.9331 4.11237 12.428 4.39873 11.979 4.74373C10.8943 3.66595 9.39991 3 7.75 3ZM3.75 9C3.75 6.79086 5.54086 5 7.75 5C9.95914 5 11.75 6.79086 11.75 9C11.75 10.4793 10.9475 11.7724 9.74927 12.4655C9.44028 12.6442 9.25 12.9741 9.25 13.3311V14.1972L8.41795 15.4453C8.19402 15.7812 8.19402 16.2188 8.41795 16.5547L9.25 17.8028V18.1716C9.25 18.4368 9.14464 18.6911 8.95711 18.8787L7.75 20.0858L6.54289 18.8787C6.35536 18.6911 6.25 18.4368 6.25 18.1716V13.3311C6.25 12.9741 6.05972 12.6442 5.75073 12.4655C4.55251 11.7724 3.75 10.4793 3.75 9ZM15.0126 13.4532C14.1627 13.3179 13.3714 12.9105 12.7679 12.2904C13.3885 11.3459 13.75 10.2154 13.75 9C13.75 8.05699 13.5325 7.16479 13.1448 6.37086C13.456 6.12332 13.8103 5.91795 14.2035 5.76703C16.2659 4.97534 18.5796 6.00547 19.3713 8.06788C19.9014 9.44884 19.6156 10.9435 18.7455 12.02C18.5211 12.2976 18.4617 12.6737 18.5896 13.007L18.9001 13.8158L18.5706 15.2792C18.4819 15.673 18.6387 16.0815 18.9682 16.3149L20.1922 17.1819L20.3244 17.5262C20.4194 17.7738 20.4122 18.049 20.3043 18.2913L19.61 19.8508L18.0505 19.1564C17.8082 19.0486 17.6187 18.8489 17.5236 18.6013L15.789 14.0824C15.6611 13.7491 15.3652 13.5093 15.0126 13.4532Z",
        fill: "currentColor",
      }),
    ),
  as = ({ connector: t, onClose: s, isConnecting: a, onContinue: n }) =>
    e.jsxs(e.Fragment, {
      children: [
        e.jsx(ws, {
          onClose: s,
          connector: t,
          title: e.jsx(r, {
            ...Fe.addConnectorLinkModalTitle,
            values: { connectorName: t.name },
          }),
        }),
        e.jsx("div", {
          className: "my-8 rounded-2xl border px-4",
          children: Dd.map(({ Icon: o, title: i, description: c }) =>
            e.jsxs(
              "div",
              {
                className:
                  "flex items-center gap-4 border-b py-4 text-sm last-of-type:border-none",
                children: [
                  e.jsx("span", {
                    children: e.jsx(o, { className: "h-6 w-6" }),
                  }),
                  e.jsxs("div", {
                    children: [
                      e.jsx("div", {
                        className: "pb-0.5",
                        children: e.jsx(r, {
                          ...i,
                          values: { connectorName: t.name },
                        }),
                      }),
                      e.jsx("div", {
                        className: "text-token-text-secondary",
                        children: e.jsx(r, {
                          ...c,
                          values: { connectorName: t.name },
                        }),
                      }),
                    ],
                  }),
                ],
              },
              i.id,
            ),
          ),
        }),
        e.jsx(N, {
          className: "w-full",
          size: "large",
          onClick: n,
          loading: a,
          children: e.jsx(r, {
            ...Fe.continueButton,
            values: { connectorName: t.name },
          }),
        }),
      ],
    }),
  Fe = D({
    addConnectorLinkModalTitle: {
      id: "addConnectorLinkModal.title",
      defaultMessage: "Connect {connectorName}",
    },
    redirectTitle: {
      id: "addConnectorLinkModal.redirectTitle",
      defaultMessage: "The page will redirect to {connectorName}",
    },
    redirectDescription: {
      id: "addConnectorLinkModal.redirectDescription",
      defaultMessage:
        "You'll sign in and confirm permissions on {connectorName}'s page.",
    },
    permissionsTitle: {
      id: "addConnectorLinkModal.permissionsTitle",
      defaultMessage: "Permissions always respected",
    },
    permissionsDescription: {
      id: "addConnectorLinkModal.permissionsDescription",
      defaultMessage:
        "ChatGPT is strictly limited to permissions you've explicitly set.",
    },
    privacyTitle: {
      id: "addConnectorLinkModal.privacyTitle",
      defaultMessage: "Private and secure",
    },
    privacyDescription: {
      id: "addConnectorLinkModal.privacyDescription",
      defaultMessage: "Your data is never used for training.",
    },
    continueButton: {
      id: "addConnectorLinkModal.continueButton",
      defaultMessage: "Continue to {connectorName}",
    },
  }),
  Dd = [
    { Icon: ds, title: Fe.redirectTitle, description: Fe.redirectDescription },
    {
      Icon: Ad,
      title: Fe.permissionsTitle,
      description: Fe.permissionsDescription,
    },
    { Icon: $a, title: Fe.privacyTitle, description: Fe.privacyDescription },
  ],
  Id = ({
    connector: t,
    internalKnowledgeConfigs: s,
    onClose: a,
    onContinue: n,
  }) => {
    const o = d.useMemo(
      () =>
        s
          .filter(
            (i) => i.user_connection_details.auth_status === "not_connected",
          )
          .map((i) => ({
            value: i.user_connection_details.connection_instance_id,
            label: i.connection_display_info.display_name,
            description: i.connection_display_info.description,
          })),
      [s],
    );
    return e.jsxs(e.Fragment, {
      children: [
        e.jsx(ws, {
          title: e.jsx(r, { ...Od.selectConnectionTitle }),
          connector: t,
          onClose: a,
        }),
        e.jsx(_n, { onContinue: n, options: o }),
      ],
    });
  },
  Od = D({
    selectConnectionTitle: {
      id: "2rQetR",
      defaultMessage: "Select a connection",
    },
  }),
  Rd = ({ onClose: t, connector: s }) => {
    const a = Pe(),
      { isLoading: n, fileUploadConfig: o, internalKnowledgeConfigs: i } = bs(),
      c = d.useMemo(
        () =>
          i?.filter(
            (x) => x.user_connection_details.auth_status === "not_connected",
          ).length ?? 0,
        [i],
      ),
      [l, u] = d.useState(null),
      [m, h] = d.useState(null),
      g = d.useMemo(
        () =>
          c === 1
            ? i?.[0]
            : m
              ? i?.find(
                  (x) => x.user_connection_details.connection_instance_id === m,
                )
              : void 0,
        [c, i, m],
      ),
      [f, p] = d.useState(!1),
      { refetch: y } = nt(),
      { refetch: M } = sr({ skip: !0 }),
      j = d.useCallback(async () => {
        try {
          p(!0), await pn(s, a), y();
        } catch {
          p(!1);
        }
      }, [s, y, a]),
      w = d.useCallback(async () => {
        if (o?.id)
          try {
            p(!0),
              await Va(
                { id: o.id },
                "settings_connected_apps",
                `${window.location.origin}/ccc/${s.id}/oauth/callback`,
                "#settings/ConnectorSettings",
              ),
              y();
          } catch {
            p(!1);
          }
      }, [s, o, y]);
    return n
      ? e.jsx("div", {
          className: "flex justify-center",
          children: e.jsx(te, {}),
        })
      : e.jsxs(e.Fragment, {
          children: [
            (!l || (l === "internalKnowledge" && c === 1)) &&
              e.jsx(Ld, {
                onClose: t,
                connector: s,
                onContinue: u,
                canAddFileUpload: !!o,
                canAddInternalKnowledge: c > 0,
              }),
            l === "fileUploads" &&
              e.jsx(as, {
                connector: s,
                onClose: t,
                isConnecting: f,
                onContinue: w,
              }),
            l === "deepResearch" &&
              e.jsx(as, {
                connector: s,
                onClose: t,
                isConnecting: f,
                onContinue: j,
              }),
            l === "internalKnowledge" &&
              c > 1 &&
              !m &&
              e.jsx(Id, {
                internalKnowledgeConfigs: i ?? [],
                onClose: t,
                connector: s,
                onContinue: h,
              }),
            l === "internalKnowledge" &&
              g &&
              e.jsx(Da, {
                isAdminFlow: !1,
                onClose: () => {
                  u(null), h(null);
                },
                connectionId: g.user_connection_details.connection_instance_id,
                location: "user_settings",
                onSuccess: M,
              }),
          ],
        });
  },
  Bd = ({ onClose: t, connector: s }) => {
    const [a, n] = d.useState(!1),
      o = Pe(),
      { refetch: i } = nt(),
      c = async () => {
        try {
          n(!0), await pn(s, o), i(), t();
        } catch {
          n(!1);
        }
      };
    return e.jsx(as, {
      connector: s,
      onClose: t,
      isConnecting: a,
      onContinue: c,
    });
  },
  Fd = ({ onClose: t }) => {
    const s = hn(),
      { platformConnectors: a, isLoading: n } = Ft(),
      o = s ? a.get(s) : void 0;
    if (n)
      return e.jsx("div", {
        className: "flex justify-center",
        children: e.jsx(te, {}),
      });
    if (!o) return t(), null;
    const i = o.id === Se;
    return e.jsx(B, {
      testId: "modal-add-connector-link",
      type: "success",
      isOpen: !0,
      onClose: t,
      size: "custom",
      className: "max-w-[380px]",
      children: i
        ? e.jsx(Rd, { onClose: t, connector: o })
        : e.jsx(Bd, { onClose: t, connector: o }),
    });
  },
  Gd = 1024 * 1024 * 4,
  ga = () => {
    "use forget";
    const t = ht.c(1);
    let s;
    return (
      t[0] === Symbol.for("react.memo_cache_sentinel")
        ? ((s = e.jsx("span", {
            className: "text-token-text-tertiary font-normal",
            children: e.jsx(r, { ...z.optionalText }),
          })),
          (t[0] = s))
        : (s = t[0]),
      s
    );
  },
  Ud = (t) => {
    "use forget";
    const s = ht.c(6),
      { previewUrl: a } = t,
      n = k();
    if (!a) {
      let c;
      return (
        s[0] === Symbol.for("react.memo_cache_sentinel")
          ? ((c = e.jsx("span", {
              className:
                "bg-token-bg-tertiary text-token-text-tertiary rounded-xl border p-4",
              children: e.jsx(fs, { className: "h-6 w-6" }),
            })),
            (s[0] = c))
          : (c = s[0]),
        c
      );
    }
    let o;
    s[1] !== n
      ? ((o = n.formatMessage(z.iconPreviewAlt)), (s[1] = n), (s[2] = o))
      : (o = s[2]);
    let i;
    return (
      s[3] !== a || s[4] !== o
        ? ((i = e.jsx("span", {
            className: "bg-token-bg-tertiary overflow-hidden rounded-xl border",
            children: e.jsx("img", {
              src: a,
              alt: o,
              className: "h-14 w-14 object-cover",
            }),
          })),
          (s[3] = a),
          (s[4] = o),
          (s[5] = i))
        : (i = s[5]),
      i
    );
  },
  Wd = (t) =>
    new Promise((s, a) => {
      const n = new FileReader();
      (n.onloadend = () => s(n.result)),
        (n.onerror = () => a()),
        n.readAsDataURL(t);
    }),
  Hd = (t) => {
    "use forget";
    const s = ht.c(52),
      { onClose: a } = t,
      n = R();
    let o;
    s[0] !== a
      ? ((o = {
          onSuccess: () => {
            a();
          },
        }),
        (s[0] = a),
        (s[1] = o))
      : (o = s[1]);
    const { mutate: i, isPending: c } = Ol(o),
      l = k(),
      [u, m] = d.useState(!1);
    let h;
    s[2] !== l
      ? ((h = (W) => {
          const { value: V } = W,
            he = {};
          return (
            V.name.trim() ||
              (he.name = l.formatMessage({
                id: "vtyh9X",
                defaultMessage: "Name is required",
              })),
            V.url.trim()
              ? V.url.trim().match(/^https?:\/\//) ||
                (he.url = l.formatMessage({
                  id: "7hn6Jq",
                  defaultMessage: "URL is invalid",
                }))
              : (he.url = l.formatMessage({
                  id: "7WV2q4",
                  defaultMessage: "URL is required",
                })),
            { fields: he }
          );
        }),
        (s[2] = l),
        (s[3] = h))
      : (h = s[3]);
    const g = Rl({
        defaultValues: { name: "", url: "", description: "" },
        onSubmit: async (W) => {
          const { value: V } = W,
            he = y ? await Wd(y) : null;
          i({
            name: V.name.trim(),
            mcp_url: V.url.trim(),
            description: V.description.trim(),
            logo_url: he,
          });
        },
        validators: { onSubmit: h },
      }),
      [f, p] = d.useState(null),
      y = f,
      [M, j] = d.useState(null);
    let w;
    s[4] !== g
      ? ((w = (W) => {
          W.preventDefault(), m(!0), g.handleSubmit();
        }),
        (s[4] = g),
        (s[5] = w))
      : (w = s[5]);
    const x = w;
    let v;
    s[6] !== l
      ? ((v = l.formatMessage(z.createCustomConnectorModalTitle)),
        (s[6] = l),
        (s[7] = v))
      : (v = s[7]);
    let S;
    s[8] !== M
      ? ((S = e.jsx(Ud, { previewUrl: M })), (s[8] = M), (s[9] = S))
      : (S = s[9]);
    let L;
    s[10] === Symbol.for("react.memo_cache_sentinel")
      ? ((L = e.jsx("span", {
          className: "text-sm font-medium",
          children: e.jsx(r, {
            ...z.iconTitle,
            values: { optionalText: e.jsx(ga, {}) },
          }),
        })),
        (s[10] = L))
      : (L = s[10]);
    let P;
    s[11] === Symbol.for("react.memo_cache_sentinel")
      ? ((P = e.jsxs("span", {
          className: "flex flex-col gap-1",
          children: [
            L,
            e.jsx("span", {
              className: "text-token-text-tertiary text-xs",
              children: e.jsx(r, { ...z.iconDescription }),
            }),
          ],
        })),
        (s[11] = P))
      : (P = s[11]);
    let I;
    s[12] !== M || s[13] !== l || s[14] !== p || s[15] !== n
      ? ((I = e.jsx("input", {
          type: "file",
          accept: "image/*",
          onChange: (W) => {
            if (!W.target.files) return;
            M && URL.revokeObjectURL(M);
            const V = W.target.files[0];
            if (V.size > Gd) {
              n.danger(l.formatMessage(z.iconTooLarge));
              return;
            }
            p(V);
            const he = URL.createObjectURL(V);
            j(he);
          },
          className: "hidden",
        })),
        (s[12] = M),
        (s[13] = l),
        (s[14] = p),
        (s[15] = n),
        (s[16] = I))
      : (I = s[16]);
    let ie;
    s[17] !== I || s[18] !== S
      ? ((ie = e.jsxs("label", {
          className: "flex cursor-pointer items-center gap-2.5",
          children: [S, P, I],
        })),
        (s[17] = I),
        (s[18] = S),
        (s[19] = ie))
      : (ie = s[19]);
    let G;
    s[20] !== l || s[21] !== u
      ? ((G = (W) =>
          e.jsxs("div", {
            children: [
              e.jsx("label", {
                htmlFor: "custom-connector-name",
                className: "mb-1 block text-sm font-medium",
                children: e.jsx(r, { ...z.nameTitle }),
              }),
              e.jsx(ea, {
                name: "custom-connector-name",
                value: W.state.value,
                onChange: (V) => {
                  W.handleChange(V.target.value), u && m(!1);
                },
                ariaLabel: l.formatMessage(z.nameTitle),
                placeholder: l.formatMessage(z.namePlaceholder),
                error: u ? W.state.meta.errors[0] : void 0,
              }),
            ],
          })),
        (s[20] = l),
        (s[21] = u),
        (s[22] = G))
      : (G = s[22]);
    let Ae;
    s[23] !== g.Field || s[24] !== G
      ? ((Ae = e.jsx(g.Field, { name: "name", children: G })),
        (s[23] = g.Field),
        (s[24] = G),
        (s[25] = Ae))
      : (Ae = s[25]);
    let ye;
    s[26] !== l || s[27] !== u
      ? ((ye = (W) =>
          e.jsxs("div", {
            children: [
              e.jsx("label", {
                htmlFor: "custom-connector-url",
                className: "mb-1 block text-sm font-medium",
                children: e.jsx(r, { ...z.urlTitle }),
              }),
              e.jsx(ea, {
                name: "custom-connector-url",
                value: W.state.value,
                onChange: (V) => {
                  W.handleChange(V.target.value), u && m(!1);
                },
                ariaLabel: l.formatMessage(z.urlTitle),
                placeholder: l.formatMessage(z.urlPlaceholder),
                error: u ? W.state.meta.errors[0] : void 0,
              }),
            ],
          })),
        (s[26] = l),
        (s[27] = u),
        (s[28] = ye))
      : (ye = s[28]);
    let De;
    s[29] !== g.Field || s[30] !== ye
      ? ((De = e.jsx(g.Field, { name: "url", children: ye })),
        (s[29] = g.Field),
        (s[30] = ye),
        (s[31] = De))
      : (De = s[31]);
    let ve;
    s[32] !== l
      ? ((ve = (W) =>
          e.jsxs("div", {
            children: [
              e.jsx("label", {
                htmlFor: "custom-connector-description",
                className: "mb-1 block text-sm font-medium",
                children: e.jsx(r, {
                  ...z.descriptionTitle,
                  values: { optionalText: e.jsx(ga, {}) },
                }),
              }),
              e.jsx(Lt, {
                name: "custom-connector-description",
                value: W.state.value,
                onChange: (V) => W.handleChange(V.target.value),
                ariaLabel: l.formatMessage(z.descriptionTitle, {
                  optionalText: l.formatMessage(z.optionalText),
                }),
                placeholder: l.formatMessage(z.descriptionPlaceholder),
              }),
            ],
          })),
        (s[32] = l),
        (s[33] = ve))
      : (ve = s[33]);
    let Ie;
    s[34] !== g.Field || s[35] !== ve
      ? ((Ie = e.jsx(g.Field, { name: "description", children: ve })),
        (s[34] = g.Field),
        (s[35] = ve),
        (s[36] = Ie))
      : (Ie = s[36]);
    let ae;
    s[37] === Symbol.for("react.memo_cache_sentinel")
      ? ((ae = e.jsxs(Ge, {
          to: "#",
          className: "text-token-text-tertiary text-sm",
          children: [
            e.jsx(ar, { className: "me-1.5 inline h-4.5 w-4.5" }),
            e.jsx(r, { ...z.readTheGuideLink }),
          ],
        })),
        (s[37] = ae))
      : (ae = s[37]);
    let He;
    s[38] === Symbol.for("react.memo_cache_sentinel")
      ? ((He = e.jsx(r, { ...z.createButton })), (s[38] = He))
      : (He = s[38]);
    let Oe;
    s[39] !== c
      ? ((Oe = e.jsxs("div", {
          className: "flex w-full items-center justify-between",
          children: [
            ae,
            e.jsx(N, { type: "submit", loading: c, children: He }),
          ],
        })),
        (s[39] = c),
        (s[40] = Oe))
      : (Oe = s[40]);
    let H;
    s[41] !== x ||
    s[42] !== ie ||
    s[43] !== Ae ||
    s[44] !== De ||
    s[45] !== Ie ||
    s[46] !== Oe
      ? ((H = e.jsxs("form", {
          onSubmit: x,
          className: "flex flex-col gap-4",
          children: [ie, Ae, De, Ie, Oe],
        })),
        (s[41] = x),
        (s[42] = ie),
        (s[43] = Ae),
        (s[44] = De),
        (s[45] = Ie),
        (s[46] = Oe),
        (s[47] = H))
      : (H = s[47]);
    let Qe;
    return (
      s[48] !== a || s[49] !== H || s[50] !== v
        ? ((Qe = e.jsx(B, {
            testId: "modal-create-custom-connector",
            title: v,
            type: "success",
            isOpen: !0,
            onClose: a,
            showCloseButton: !0,
            size: "custom",
            className: "max-w-[400px]",
            children: H,
          })),
          (s[48] = a),
          (s[49] = H),
          (s[50] = v),
          (s[51] = Qe))
        : (Qe = s[51]),
      Qe
    );
  },
  z = D({
    createCustomConnectorModalTitle: {
      id: "createCustomConnectorModal.title",
      defaultMessage: "New connector",
    },
    iconTitle: {
      id: "createCustomConnectorModal.iconTitle",
      defaultMessage: "Icon {optionalText}",
    },
    iconDescription: {
      id: "createCustomConnectorModal.iconDescription",
      defaultMessage: "Minimum size: 128 x 128 px",
    },
    nameTitle: {
      id: "createCustomConnectorModal.nameTitle",
      defaultMessage: "Name",
    },
    urlTitle: {
      id: "createCustomConnectorModal.urlTitle",
      defaultMessage: "URL",
    },
    descriptionTitle: {
      id: "createCustomConnectorModal.descriptionTitle",
      defaultMessage: "Description {optionalText}",
    },
    optionalText: {
      id: "createCustomConnectorModal.optionalText",
      defaultMessage: "(optional)",
    },
    shareWithOthersTitle: {
      id: "createCustomConnectorModal.shareWithOthersTitle",
      defaultMessage: "Share with others",
    },
    readTheGuideLink: {
      id: "createCustomConnectorModal.readTheGuideLink",
      defaultMessage: "Read the guide",
    },
    createButton: {
      id: "createCustomConnectorModal.createButton",
      defaultMessage: "Create",
    },
    iconPreviewAlt: {
      id: "createCustomConnectorModal.iconPreviewAlt",
      defaultMessage: "Icon preview",
    },
    namePlaceholder: {
      id: "createCustomConnectorModal.namePlaceholder",
      defaultMessage: "e.g., Custom Tool",
    },
    urlPlaceholder: {
      id: "createCustomConnectorModal.urlPlaceholder",
      defaultMessage: "https://example.com/sse",
    },
    descriptionPlaceholder: {
      id: "createCustomConnectorModal.descriptionPlaceholder",
      defaultMessage: "Explain what it does in a few words",
    },
    iconTooLarge: {
      id: "createCustomConnectorModal.iconTooLarge",
      defaultMessage: "Icon is too large",
    },
  }),
  fa = (t) =>
    d.createElement(
      "svg",
      {
        width: 24,
        height: 24,
        viewBox: "0 0 24 24",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        ...t,
      },
      d.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M12 3.21876L14.4631 4.93466C14.7001 5.09977 14.9701 5.21155 15.2542 5.26238L18.2093 5.79072L18.7376 8.74559C18.7884 9.02993 18.9003 9.30008 19.0656 9.53719L20.7813 12L19.0655 14.4629C18.9003 14.7 18.7884 14.9702 18.7376 15.2543L18.2093 18.2093L15.2545 18.7376C14.97 18.7884 14.7 18.9003 14.4631 19.0654L12 20.7813L9.53718 19.0656C9.30007 18.9003 9.03003 18.7884 8.74569 18.7376L5.79076 18.2093L5.26239 15.2543C5.21154 14.9699 5.09969 14.7 4.93466 14.4631L3.21875 12L4.93463 9.53696C5.09975 9.29994 5.21155 9.02999 5.26238 8.74572L5.79072 5.79072L8.7457 5.26239C9.02996 5.21156 9.29992 5.09977 9.53693 4.93466L12 3.21876ZM13.1432 1.57771C12.4562 1.0991 11.5438 1.0991 10.8568 1.57771L8.3937 3.29361L5.43872 3.82194C4.6145 3.9693 3.9693 4.6145 3.82194 5.43872L3.29361 8.39368L1.57772 10.8568C1.0991 11.5438 1.09909 12.4562 1.5777 13.1432L3.29359 15.6063L3.82194 18.5613C3.9693 19.3855 4.61449 20.0307 5.43867 20.1781L8.39364 20.7064L10.8568 22.4223C11.5438 22.9009 12.4562 22.9009 13.1432 22.4223L15.6063 20.7064L18.5613 20.1781C19.3855 20.0307 20.0307 19.3855 20.1781 18.5614L20.7064 15.6064L22.4223 13.1432C22.9009 12.4562 22.9009 11.5438 22.4223 10.8568L20.7064 8.39371L20.1781 5.43873C20.0307 4.61455 19.3855 3.96931 18.5613 3.82194L15.6064 3.29363L13.1432 1.57771Z",
        fill: "currentColor",
      }),
      d.createElement("path", {
        d: "M11.5876 8.1018C11.7862 7.81202 12.2138 7.81202 12.4124 8.1018L13.4865 9.669C13.5515 9.76387 13.6473 9.83342 13.7576 9.86594L15.58 10.4031C15.9169 10.5025 16.0491 10.9092 15.8349 11.1876L14.6763 12.6934C14.6061 12.7846 14.5696 12.8971 14.5727 13.0121L14.625 14.9113C14.6346 15.2625 14.2886 15.5138 13.9576 15.3961L12.1675 14.7596C12.0592 14.721 11.9408 14.721 11.8325 14.7596L10.0424 15.3961C9.71136 15.5138 9.36537 15.2625 9.37502 14.9113L9.42727 13.0121C9.43043 12.8971 9.39386 12.7846 9.32372 12.6934L8.16515 11.1876C7.95091 10.9092 8.08307 10.5025 8.42003 10.4031L10.2424 9.86594C10.3527 9.83342 10.4485 9.76387 10.5135 9.669L11.5876 8.1018Z",
        fill: "currentColor",
      }),
    ),
  Vd = (t) =>
    d.createElement(
      "svg",
      {
        width: 24,
        height: 24,
        viewBox: "0 0 24 24",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        ...t,
      },
      d.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M12 4C10.3431 4 9 5.34315 9 7C9 8.65685 10.3431 10 12 10C13.6569 10 15 8.65685 15 7C15 5.34315 13.6569 4 12 4ZM7 7C7 4.23858 9.23858 2 12 2C14.7614 2 17 4.23858 17 7C17 9.76142 14.7614 12 12 12C9.23858 12 7 9.76142 7 7ZM19.0277 15.6255C18.6859 15.5646 18.1941 15.6534 17.682 16.1829C17.4936 16.3777 17.2342 16.4877 16.9632 16.4877C16.6922 16.4877 16.4328 16.3777 16.2444 16.1829C15.7322 15.6534 15.2405 15.5646 14.8987 15.6255C14.5381 15.6897 14.2179 15.9384 14.0623 16.3275C13.8048 16.9713 13.9014 18.662 16.9632 20.4617C20.0249 18.662 20.1216 16.9713 19.864 16.3275C19.7084 15.9384 19.3882 15.6897 19.0277 15.6255ZM21.721 15.5847C22.5748 17.7191 21.2654 20.429 17.437 22.4892C17.1412 22.6484 16.7852 22.6484 16.4893 22.4892C12.6609 20.4291 11.3516 17.7191 12.2053 15.5847C12.6117 14.5689 13.4917 13.8446 14.5481 13.6565C15.3567 13.5125 16.2032 13.6915 16.9632 14.1924C17.7232 13.6915 18.5697 13.5125 19.3783 13.6565C20.4347 13.8446 21.3147 14.5689 21.721 15.5847ZM9.92597 14.2049C10.1345 14.7163 9.889 15.2999 9.3776 15.5084C7.06131 16.453 5.5 18.5813 5.5 20.9999C5.5 21.5522 5.05228 21.9999 4.5 21.9999C3.94772 21.9999 3.5 21.5522 3.5 20.9999C3.5 17.6777 5.641 14.8723 8.6224 13.6565C9.1338 13.448 9.71743 13.6935 9.92597 14.2049Z",
        fill: "currentColor",
      }),
    );
let Xt = 0;
const Kd = se(
  J.CheckboxItem,
)`flex flex-row justify-between h-10 mx-2 items-center`;
function zd(t, s, a, n) {
  const o = { category: t.category, [a]: s };
  n(o);
}
function qd() {
  const s = fe().getQueryData([wt]),
    [a, n] = d.useState(s),
    o = $d(n);
  return (
    nr({
      onSuccess: (i) => {
        n(i);
      },
      alwaysRefetchOnMount: !0,
    }),
    a
      ? e.jsx(e.Fragment, {
          children: e.jsx("div", {
            className: "flex flex-col flex-nowrap gap-2",
            children: a.map((i) =>
              e.jsx(
                _,
                {
                  children: e.jsx(Yd, {
                    settings: i,
                    updateSettings: o.mutate,
                  }),
                },
                i.category,
              ),
            ),
          }),
        })
      : e.jsx("div", {
          className: "flex justify-center",
          children: e.jsx(te, {}),
        })
  );
}
function Yd({ settings: t, updateSettings: s }) {
  const a = k();
  return e.jsxs("div", {
    className: "flex items-center justify-between",
    children: [
      e.jsx("div", { children: e.jsx("span", { children: t.name }) }),
      e.jsx("div", {
        children: e.jsxs(J.Root, {
          children: [
            e.jsxs(J.Trigger, {
              children: [
                e.jsx("span", { children: Zd(t, a) }),
                e.jsx(ir, { className: "icon-sm" }),
              ],
            }),
            e.jsx(J.Portal, {
              children: e.jsx(J.Content, {
                size: "medium",
                children: t.options.map((n, o) =>
                  e.jsx(
                    Kd,
                    {
                      checked: n.enabled,
                      onCheckedChange: (i) => zd(t, i, n.channel, s),
                      children: e.jsx("p", { children: n.name }),
                    },
                    o,
                  ),
                ),
              }),
            }),
          ],
        }),
      }),
    ],
  });
}
function Zd(t, s) {
  const a = t.options.some((o) => o.channel === "email" && o.enabled),
    n = t.options.some((o) => o.channel === "push" && o.enabled);
  return n && a
    ? s.formatMessage(St.pushAndEmailEnabled)
    : n
      ? s.formatMessage(St.pushEnabled)
      : a
        ? s.formatMessage(St.emailEnabled)
        : s.formatMessage(St.notificationsOff);
}
function $d(t) {
  const s = fe();
  return de({
    mutationFn: async (a) => (await or.updateSettings(a)).settings,
    onMutate: async (a) => {
      Xt += 1;
      const n = Xt;
      await s.cancelQueries({ queryKey: wt });
      const o = s.getQueryData(wt);
      return (
        t((i) => {
          if (!i) return i;
          const { category: c, ...l } = a;
          return i.map((u) => {
            if (u.category !== c) return u;
            const m = u.options.map((h) => {
              const g = l[h.channel];
              return typeof g == "boolean" ? { ...h, enabled: g } : h;
            });
            return { ...u, options: m };
          });
        }),
        { previousSettingsList: o, mutationId: n }
      );
    },
    onError: (a, n, o) => {
      o?.previousSettingsList && t(o.previousSettingsList);
    },
    onSuccess: (a, n, o) => {
      o?.mutationId === Xt && (s.setQueryData(wt, a), t(a));
    },
  });
}
const St = D({
  pushEnabled: {
    id: "notificationSettings.pushEnabled",
    defaultMessage: "Push",
  },
  emailEnabled: {
    id: "notificationSettings.emailEnabled",
    defaultMessage: "Email",
  },
  pushAndEmailEnabled: {
    id: "notificationSettings.pushAndEmailEnabled",
    defaultMessage: "Push, Email",
  },
  notificationsOff: {
    id: "notificationSettings.notificationsOff",
    defaultMessage: "Off",
  },
});
function Qd() {
  const t = k();
  return e.jsx(je, {
    value: F.Notifications,
    icon: e.jsx(rr, { className: "icon-sm" }),
    label: t.formatMessage({
      id: "settingsModal.notifications",
      defaultMessage: "Notifications",
    }),
  });
}
const Ln = (t, s) => {
  const {
    data: a,
    isLoading: n,
    error: o,
  } = Ee({
    queryKey: ["cancellationPromotion"],
    queryFn: async () =>
      O.safeGet("/promotions/cp", { parameters: { query: { account_id: t } } }),
    enabled: s,
  });
  return {
    cancellationPromoMetadata: d.useMemo(
      () =>
        !a?.metadata ||
        a.metadata.plan_name !== _o.PLUS ||
        a.metadata.duration?.period !== "month"
          ? null
          : a.metadata,
      [a],
    ),
    isCancelPromoLoading: n,
    promoError: o,
  };
};
function Xd({
  isOpen: t,
  onClose: s,
  onClaimOfferButtonClicked: a,
  currentAccount: n,
}) {
  const o = k(),
    i = R(),
    c = Pe(),
    { data: l } = lr(),
    u = cr(n.id),
    m = n.data.subscriptionStatus.planType,
    h = n.getLastActiveSubscription().subscription_id,
    g = n.data.subscriptionStatus.discount,
    f = mt(m.toLowerCase()),
    p = fe(),
    y = Lo(c, "468168202"),
    M = n.isEligibleForCancellationPromotion(),
    { cancellationPromoMetadata: j, isCancelPromoLoading: w } = Ln(n.id, M),
    { numPeriods: x, formattedDiscountedCost: v } = d.useMemo(() => {
      const P = n.mustGetSubscriptionBillingCurrency("GlobalSettingsModal");
      if (!j) return { numPeriods: 0, formattedDiscountedCost: "" };
      const I = j.duration?.num_periods ?? 1;
      return { numPeriods: I, ...hl(o, I, j.discount, P) };
    }, [n, j, o]),
    S = async () => {
      if (!n || !h)
        throw new Error("Missing current account or subscription id");
      await u.mutateAsync(n.id, {
        onError: () => {
          i.danger(o.formatMessage(ha.cancelFailure), { duration: 5 }),
            T.logEventWithStatsig(
              "Cancel Subscription Modal Cancel Failed",
              "chatgpt_cancel_subscription_modal_cancel_failed",
            );
        },
        onSuccess: async () => {
          if (
            (p.invalidateQueries({ queryKey: ["account-status"] }),
            i.info(o.formatMessage(ha.cancelSuccess), { duration: 5 }),
            T.logEventWithStatsig(
              "Cancel Subscription Modal Cancel Success",
              "chatgpt_cancel_subscription_modal_cancel_success",
            ),
            os(c, "3376055906"))
          ) {
            const I = new URL(
              "https://openai.qualtrics.com/jfe/form/SV_eW3mdeRdMrpnPLw",
            );
            I.searchParams.append("subscription_id", h),
              I.searchParams.append("plan_type", n.planType),
              n.authUserId
                ? I.searchParams.append("oai_user", n.authUserId)
                : le.addError("authUserId missing from currentAccount"),
              window.open(I.toString(), "_blank");
          }
          setTimeout(() => {
            s();
          }, 5e3);
        },
      });
    };
  d.useEffect(() => {
    u.isSuccess && s();
  }, [u.isSuccess, s]),
    d.useEffect(() => {
      T.logEventWithStatsig(
        "Cancel Subscription Modal Shown",
        "chatgpt_cancel_subscription_modal_shown",
      );
    }),
    d.useEffect(() => {
      j &&
        !w &&
        T.logEventWithStatsig(
          "Cancel Subscription Modal with Cancellation Promo Shown",
          "chatgpt_cancel_subscription_modal_with_cancellation_promo_shown",
          { promo_id: j.campaign_id },
        );
    }, [j, w]);
  const L = l?.active_until
    ? new Date(l.active_until).toLocaleDateString(o.locale, {
        year: "numeric",
        month: "short",
        day: "numeric",
      })
    : "";
  return e.jsx(B, {
    testId: "modal-cancel-subscription",
    type: "success",
    isOpen: t,
    onClose: s,
    size: "custom",
    noPadding: !0,
    className: "max-w-xl",
    showCloseButton: !0,
    title: j
      ? o.formatMessage({
          id: "cancelSubscriptionModal.promo.title",
          defaultMessage: "Are you sure you want to cancel?",
        })
      : g
        ? o.formatMessage(
            {
              id: "cancelSubscriptionModal.hasDiscount.title",
              defaultMessage: "End {planName} access on {expirationDate}?",
            },
            { planName: f, expirationDate: L },
          )
        : o.formatMessage({
            id: "cancelSubscriptionModal.title",
            defaultMessage: "Subscription Cancellation",
          }),
    removePopoverStyling: !0,
    children: w
      ? e.jsx("div", {
          className: "flex items-center justify-center p-6",
          children: e.jsx(te, {}),
        })
      : e.jsxs("div", {
          className: "p-5",
          children: [
            j
              ? e.jsxs(e.Fragment, {
                  children: [
                    e.jsx("p", {
                      className: "text-token-text-secondary",
                      children: j.summary,
                    }),
                    e.jsxs("div", {
                      className:
                        "mt-4 flex items-center justify-between rounded-xl border border-solid p-4",
                      children: [
                        e.jsxs("div", {
                          children: [
                            e.jsx("div", {
                              className: "flex items-center gap-2",
                              children: e.jsx("span", {
                                className:
                                  "text-token-text-primary text-base font-semibold",
                                children: j.title,
                              }),
                            }),
                            e.jsx("p", {
                              className:
                                "text-token-text-secondary mt-1 text-base",
                              children: e.jsx(r, {
                                id: "cancelPromoModal.regularPrice",
                                defaultMessage:
                                  "For {discountedFormattedCost}, you'll get {planName} for {numPeriods} months.",
                                values: {
                                  discountedFormattedCost: v,
                                  planName: f,
                                  numPeriods: x,
                                },
                              }),
                            }),
                          ],
                        }),
                        e.jsx("div", {
                          children: e.jsx(Je, {
                            title: o.formatMessage({
                              id: "cancelPromoModal.promo.getOffer",
                              defaultMessage: "Get offer",
                            }),
                            color: "secondary",
                            onClick: a,
                          }),
                        }),
                      ],
                    }),
                    e.jsx("p", {
                      className: "text-token-text-secondary mt-8",
                      children: e.jsx(r, {
                        id: "cancelSubscriptionModal.promo.canceledSubscriptionBottom",
                        defaultMessage:
                          "To cancel your subscription, just confirm your choice below. Your access to {planName} features will end on {expirationDate}.",
                        values: { planName: f, expirationDate: L },
                      }),
                    }),
                  ],
                })
              : e.jsx("p", {
                  className: "text-token-text-secondary",
                  children: g
                    ? e.jsx(r, {
                        id: "cancelSubscriptionModal.hasDiscount.canceledSubscription",
                        defaultMessage: `If you cancel your subscription now, your {planName} access will end on {expirationDate}. Any discounts applied will be removed, and can't be used again.
`,
                        values: { planName: f, expirationDate: L },
                      })
                    : e.jsx(r, {
                        id: "cancelSubscriptionModal.canceledSubscription",
                        defaultMessage:
                          "Your {planName} subscription will be canceled but will remain active until the end of your billing period on {expirationDate}.",
                        values: { planName: f, expirationDate: L },
                      }),
                }),
            e.jsxs("div", {
              className: "mt-8 flex justify-end gap-2",
              children: [
                e.jsx(Je, {
                  title: o.formatMessage({
                    id: "cancelSubscriptionModal.goBack",
                    defaultMessage: "Go back",
                  }),
                  color: y.get(
                    "cancellation_modal_go_back_button_color",
                    "secondary",
                  ),
                  onClick: s,
                }),
                e.jsx(Je, {
                  title: o.formatMessage({
                    id: "cancelSubscriptionModal.cancel",
                    defaultMessage: "Cancel subscription",
                  }),
                  color: y.get(
                    "cancellation_modal_cancel_button_color",
                    "danger",
                  ),
                  onClick: () => {
                    T.logEventWithStatsig(
                      "Cancel Subscription Modal Confirmation Button Clicked",
                      "chatgpt_cancel_subscription_modal_confirmation_button_clicked",
                    ),
                      S();
                  },
                  loading: u.isPending,
                }),
              ],
            }),
          ],
        }),
  });
}
const ha = D({
  cancelSuccess: {
    id: "cancelSubscriptionModal.cancelSuccess",
    defaultMessage: "Your subscription has been canceled.",
  },
  cancelFailure: {
    id: "cancelSubscriptionModal.cancelFailure",
    defaultMessage: "Something went wrong while canceling your subscription.",
  },
});
function Jd({ currentAccount: t }) {
  const s = Te(),
    a = t.data.subscriptionStatus.planType,
    n = t.willRenewSubscription(),
    o =
      a === ke.PLUS
        ? e.jsx(r, { id: "hLd2Ar", defaultMessage: "Upgrade plan" })
        : a === ke.PRO && n
          ? e.jsx(r, { id: "/4GuNx", defaultMessage: "Change plan" })
          : e.jsx(r, { id: "4Bc5M+", defaultMessage: "View plans" }),
    i = () => {
      T.logEventWithStatsig(
        "Subscription Settings Change Plan Button Clicked",
        "chatgpt_subscription_settings_change_plan_button_clicked",
      ),
        ms(s, "Subscription settings manage button");
    };
  return e.jsxs(J.Item, {
    className: "flex items-center ps-2 pe-0 font-normal",
    onClick: i,
    children: [e.jsx(hr, { className: "h-5 w-5" }), o],
  });
}
function eu({ currentAccount: t, onCancelSubscriptionClick: s }) {
  const a = t.willRenewSubscription(),
    n = t.willPlanChange(),
    { layer: o } = Eo("468168202"),
    i = k(),
    c = R();
  if (!a || n) return null;
  const l = o.get("should_cancel_button_take_user_to_stripe", !1);
  return e.jsxs(e.Fragment, {
    children: [
      e.jsx(J.Separator, { className: "px-1" }),
      e.jsxs(J.Item, {
        className:
          "text-token-text-error flex items-center ps-2 pe-3 font-normal",
        onClick: async () => {
          if (
            (T.logEventWithStatsig(
              "Subscription Settings Cancel Subscription Button Clicked",
              "chatgpt_subscription_settings_cancel_subscription_button_clicked",
            ),
            l)
          )
            try {
              const u = await It.fetchCustomerPortalUrl();
              location.href = u.url;
            } catch {
              c.warning(i.formatMessage(xe.accountErrorWarning), {
                hasCloseButton: !0,
              });
            }
          else s();
        },
        children: [
          e.jsx(To, { className: "h-5 w-5" }),
          e.jsx(r, { id: "icBiUI", defaultMessage: "Cancel Subscription" }),
        ],
      }),
    ],
  });
}
function tu(t, s) {
  return t === ke.FREE || (t === ke.PLUS && s === ke.PRO);
}
function su({ currentAccount: t, onRenewSubscriptionClick: s }) {
  const a = t.data.subscriptionStatus.planType,
    n = mt(a.toLowerCase()),
    o = t.willRenewSubscription(),
    i = t.getNextPlanType();
  if (!(!o || (i && tu(i, a)))) return null;
  const l = () => {
    T.logEventWithStatsig(
      "Subscription Settings Renew Plan Button Clicked",
      "chatgpt_subscription_settings_renew_plan_button_clicked",
    ),
      s();
  };
  return e.jsx(e.Fragment, {
    children: e.jsxs(J.Item, {
      className:
        "text-token-text-primary flex items-center ps-2 pe-3 font-normal",
      onClick: l,
      children: [
        e.jsx(pr, { className: "h-5 w-5" }),
        e.jsx(r, {
          id: "L6UCRY",
          defaultMessage: "Renew {planName} Plan",
          values: { planName: n },
        }),
      ],
    }),
  });
}
function au({
  currentAccount: t,
  onCancelSubscriptionClick: s,
  onRenewSubscriptionClick: a,
}) {
  return e.jsxs(Qa, {
    triggerButton: e.jsxs(N, {
      onClick: () => {},
      color: "secondary",
      children: [
        e.jsx(r, { id: "g3k4Zt", defaultMessage: "Manage" }),
        e.jsx(fr, { className: "ms-1 -me-1 h-4 w-4" }),
      ],
    }),
    contentAlign: "end",
    size: "auto",
    sideOffset: 2,
    contentClassName: "py-1",
    children: [
      e.jsx(Jd, { currentAccount: t }),
      e.jsx(su, { currentAccount: t, onRenewSubscriptionClick: a }),
      e.jsx(eu, { currentAccount: t, onCancelSubscriptionClick: s }),
    ],
  });
}
function nu({ currentAccount: t }) {
  const s = t.subscriptionAnalyticsParams,
    n = t.getLastActiveSubscription().purchase_origin_platform,
    o = R(),
    i = k(),
    c = async () => {
      T.logEvent("Account Portal: Click Manage My Subscription", s);
      try {
        const u = await It.fetchCustomerPortalUrl();
        T.logEvent("Account Portal: Navigating to Account Portal", s),
          (location.href = u.url);
      } catch {
        o.warning(i.formatMessage(xe.accountErrorWarning), {
          hasCloseButton: !0,
        });
      }
    },
    l = (u, m) =>
      e.jsx(Ge, {
        to: u,
        target: "_blank",
        className: "inline-block",
        children: e.jsx(N, {
          onClick: () => T.logEvent(m, s),
          color: "secondary",
          children: e.jsx(r, { id: "eQL80k", defaultMessage: "Manage" }),
        }),
      });
  switch (n) {
    case Tt.MOBILE_IOS:
      return l(Cr, "Account Portal: Click iOS Manage Subscription");
    case Tt.MOBILE_ANDROID:
      return l(xr, "Account Portal: Click Android Manage Subscription");
    default:
      if (t.hasCustomerObject())
        return e.jsx(N, {
          onClick: c,
          color: "secondary",
          children: e.jsx(r, { id: "eQL80k", defaultMessage: "Manage" }),
        });
      break;
  }
}
function ou(t, s) {
  return t == null || s == null ? !1 : Math.abs(t - s) <= 1;
}
function iu({
  currentAccount: t,
  onCancelSubscriptionClick: s,
  onRenewSubscriptionClick: a,
}) {
  const n = k(),
    o = t.data.subscriptionStatus.planType,
    i = t.willRenewSubscription(),
    c = t.willPlanChange(),
    l = t.getDaysUntilPlanChanges(),
    u = t.getDaysUntilPlanRenews(),
    m = t.getDaysUntilPlanDiscountExpires(),
    h = t.getNextPlanType(),
    g = t.data.subscriptionStatus.discount,
    f = (S) => {
      const L = gr(new Date(), S);
      return new Intl.DateTimeFormat(n.locale, {
        year: "numeric",
        month: "short",
        day: "numeric",
      }).format(L);
    },
    p = mt(o.toLowerCase()),
    y = h ? mt(h.toLowerCase()) : null,
    { value: M } = Ce("1719651090"),
    { value: j } = Ce("48719060"),
    w =
      o === ke.PRO
        ? Zs({ isOperatorEnabled: M, isCodexEnabled: j }).advertisedFeatures
        : $s().advertisedFeatures,
    { costTitle: x, currencySymbol: v } = dr(
      o === ke.PRO ? Zs({ isOperatorEnabled: M, isCodexEnabled: j }) : $s(),
      t.data.subscriptionStatus.billingCurrency ?? "USD",
    );
  return (
    d.useEffect(() => {
      T.logEventWithStatsig(
        "Subscription Settings Shown",
        "chatgpt_subscription_settings_shown",
      );
    }, []),
    e.jsxs(e.Fragment, {
      children: [
        e.jsxs(_, {
          children: [
            e.jsxs("div", {
              className: "flex items-center justify-between",
              children: [
                e.jsxs("div", {
                  children: [
                    e.jsx("div", {
                      className: "text-base font-bold",
                      children: e.jsx(r, {
                        ...xe.subscriptionTitle,
                        values: { planName: p },
                      }),
                    }),
                    e.jsxs("div", {
                      className: "text-token-text-secondary",
                      children: [
                        c &&
                          l &&
                          y &&
                          e.jsx("span", {
                            children: e.jsx(r, {
                              ...xe.planChangeMessage,
                              values: { planName: y, date: f(l) },
                            }),
                          }),
                        i &&
                          !c &&
                          u &&
                          e.jsx("span", {
                            children:
                              g &&
                              t.data.subscriptionStatus.discount
                                ?.discount_type === Po.PERCENTAGE
                                ? ou(m, u) &&
                                  x?.defaultMessage &&
                                  v?.sign?.defaultMessage
                                  ? e.jsx(r, {
                                      ...xe.discountPercentMessageWithNewPrice,
                                      values: {
                                        discountPercent:
                                          t.data.subscriptionStatus.discount
                                            .amount,
                                        planName: p,
                                        date: f(u),
                                        newPrice: x.defaultMessage.toString(),
                                        currencySymbol:
                                          v.sign.defaultMessage.toString(),
                                      },
                                    })
                                  : e.jsx(r, {
                                      ...xe.discountPercentMessage,
                                      values: {
                                        discountPercent:
                                          t.data.subscriptionStatus.discount
                                            .amount,
                                        planName: p,
                                        date: f(u),
                                      },
                                    })
                                : e.jsx(r, {
                                    ...xe.renewMessage,
                                    values: { date: f(u) },
                                  }),
                          }),
                        !i &&
                          !c &&
                          u &&
                          e.jsx("span", {
                            children: e.jsx(r, {
                              ...xe.planCanceledMessage,
                              values: { date: f(u) },
                            }),
                          }),
                      ],
                    }),
                  ],
                }),
                e.jsx(au, {
                  currentAccount: t,
                  onCancelSubscriptionClick: s,
                  onRenewSubscriptionClick: a,
                }),
              ],
            }),
            e.jsxs("div", {
              className:
                "text-token-text-secondary mt-4 rounded-lg bg-gray-50 p-4 dark:bg-gray-900",
              children: [
                e.jsx(r, { ...xe.thanksMessage, values: { planName: p } }),
                w?.map((S, L) =>
                  e.jsxs(
                    "div",
                    {
                      className: "text-l mt-2 flex justify-start gap-2",
                      children: [
                        e.jsx(ur, {
                          className:
                            "text-token-text-primary mt-0.5 h-4 w-4 shrink-0",
                        }),
                        e.jsx("span", {
                          children: e.jsx(r, {
                            ...S,
                            values: {
                              link: (P) =>
                                e.jsx(Ge, {
                                  className: "underline",
                                  target: "_blank",
                                  rel: "noreferrer",
                                  to: S.link ?? "",
                                  children: P,
                                }),
                              article: (P) =>
                                e.jsx(Ge, {
                                  className: "underline",
                                  target: "_blank",
                                  rel: "noreferrer",
                                  to: S.article ?? "",
                                  children: P,
                                }),
                              modelName: "GPT4o",
                            },
                          }),
                        }),
                      ],
                    },
                    L,
                  ),
                ),
              ],
            }),
          ],
        }),
        e.jsx(_, {
          children: e.jsxs("div", {
            className: "flex flex-col gap-6",
            children: [
              e.jsxs("div", {
                className: "flex items-center justify-between",
                children: [
                  e.jsx("div", {
                    className: "text-base",
                    children: e.jsx(r, {
                      ...xe.managePaymentTitle,
                      values: { planName: p },
                    }),
                  }),
                  e.jsx(nu, { currentAccount: t }),
                ],
              }),
              e.jsx(
                Ge,
                {
                  target: "_blank",
                  to: mr,
                  onClick: pl,
                  className: "text-token-link -mb-2 pt-3 text-sm",
                  children: e.jsx(r, { ...xe.billingHelp }),
                },
                "row-plus-plan-help-link",
              ),
            ],
          }),
        }),
      ],
    })
  );
}
const xe = D({
  subscriptionTitle: {
    id: "settingsModal.subscriptionTitle",
    defaultMessage: "ChatGPT {planName}",
  },
  managePaymentTitle: {
    id: "settingsModal.managePaymentTitle",
    defaultMessage: "Payment",
  },
  billingHelp: {
    id: "settingsModal.billingHelp",
    defaultMessage: "Need help with billing?",
  },
  accountErrorWarning: {
    id: "settingsModal.accountErrorWarning",
    defaultMessage:
      "The account management page encountered an error. Please try again. If the problem continues, please visit help.openai.com.",
  },
  planChangeMessage: {
    id: "settingsModal.planChangeMessage",
    defaultMessage: "Your plan changes to {planName} on {date}",
  },
  planCanceledMessage: {
    id: "settingsModal.planCanceledMessage",
    defaultMessage: "Your plan will be canceled on {date}",
  },
  renewMessage: {
    id: "settingsModal.renewMessage",
    defaultMessage: "Your plan auto-renews on {date}",
  },
  discountPercentMessage: {
    id: "settingsModal.discountPercentMessage",
    defaultMessage:
      "You've got {discountPercent}% off {planName}. Your discounted plan renews on {date}.",
  },
  discountPercentMessageWithNewPrice: {
    id: "settingsModal.discountPercentMessageWithNewPrice",
    defaultMessage:
      "You've got {discountPercent}% off {planName}. Your plan renews (at {currencySymbol}{newPrice}/month) on {date}.",
  },
  thanksMessage: {
    id: "settingsModal.thanksMessage",
    defaultMessage:
      "Thanks for subscribing to ChatGPT {planName}! Your {planName} plan includes:",
  },
  paymentMethodMessage: {
    id: "settingsModal.paymentMethodMessage",
    defaultMessage: "Payment method",
  },
});
function ru({ onClose: t, onBackButtonClicked: s, account: a }) {
  const n = k(),
    o = R(),
    [i, c] = d.useState(!1);
  d.useEffect(() => {
    T.logEventWithStatsig(
      "Claim Subscription Cancellation Promotion Modal Shown",
      "chatgpt_claim_subscription_cancellation_promotion_modal_shown",
    );
  }, []);
  const l = () => {
      T.logEventWithStatsig(
        "Claim Subscription Cancellation Promotion Modal Close",
        "chatgpt_claim_subscription_cancellation_promotion_modal_close",
      ),
        t();
    },
    u = () => {
      T.logEventWithStatsig(
        "Claim Subscription Cancellation Promotion Modal Back Button Clicked",
        "chatgpt_claim_subscription_cancellation_promotion_modal_back_button_clicked",
      ),
        s();
    },
    m = Mr(a.id),
    { cancellationPromoMetadata: h, isCancelPromoLoading: g } = Ln(
      a.id,
      a.isEligibleForCancellationPromotion(),
    ),
    {
      data: f,
      isError: p,
      isLoading: y,
    } = br(a.id, void 0, void 0, h?.campaign_id);
  p &&
    (o.warning(
      n.formatMessage({
        id: "cancelPromoClaimModal.errorFetchingPreview",
        defaultMessage: "There was a problem updating your subscription",
      }),
      { hasCloseButton: !0 },
    ),
    t());
  const M = fe(),
    j = async (S) => {
      T.logEventWithStatsig(
        "Claim Subscription Cancellation Promotion Pay Now Button Clicked",
        "chatgpt_claim_subscription_cancellation_promotion_modal_pay_now_button_clicked",
      ),
        c(!0);
      try {
        await m.mutateAsync({ accountId: a.id, updatedPromoId: S.campaign_id }),
          o.success(
            n.formatMessage({
              id: "cancelPromoClaimModal.successfullyClaimedPromotion",
              defaultMessage: "You've successfully claimed your promotion",
            }),
            { hasCloseButton: !0 },
          ),
          T.logEventWithStatsig(
            "Claim Subscription Cancellation Promotion Success",
            "chatgpt_claim_subscription_cancellation_promotion_success",
            { promo_id: S.campaign_id },
          ),
          M.invalidateQueries({ queryKey: ["account-status"] }),
          M.invalidateQueries({ queryKey: ["cancellationPromotion"] }),
          t();
      } catch (L) {
        T.logEventWithStatsig(
          "Claim Subscription Cancellation Promotion Error",
          "chatgpt_claim_subscription_cancellation_promotion_error",
          { promo_id: S.campaign_id },
        ),
          L?.detail?.error_type === "card_declined"
            ? o.warning(
                n.formatMessage({
                  id: "cancelPromoClaimModal.cardDeclinedError",
                  defaultMessage:
                    "Payment error. Your card may be invalid or authentication may be needed.",
                }),
                { hasCloseButton: !0 },
              )
            : o.warning(
                n.formatMessage({
                  id: "cancelPromoClaimModal.errorUpdatingSubscription",
                  defaultMessage:
                    "There was a problem updating your subscription",
                }),
                { hasCloseButton: !0 },
              ),
          le.addError(L),
          t();
      } finally {
        c(!1);
      }
    },
    [w, x, v] = xl(a.mustGetSubscriptionBillingCurrency("GlobalSettingsModal"));
  return e.jsx(B, {
    testId: "modal-subscription-claim-cancel-promo",
    type: "success",
    isOpen: !0,
    onClose: l,
    size: "custom",
    noPadding: !0,
    className: "max-w-xl",
    showCloseButton: !0,
    title: n.formatMessage({
      id: "cancelPromoClaimModal.title",
      defaultMessage: "Confirm changes",
    }),
    removePopoverStyling: !0,
    children:
      y || g
        ? e.jsx(lu, {})
        : h?.campaign_id && f
          ? e.jsx(uu, {
              account: a,
              promoData: h,
              previewData: f,
              plusCost: w,
              proCost: x,
              currencySymbol: v,
              onBack: u,
              handleUpdate: () => j(h),
              isUpdating: i,
            })
          : null,
  });
}
function lu() {
  return e.jsx("div", {
    className: "flex items-center justify-center p-6",
    children: e.jsx(te, {}),
  });
}
function cu({
  subscriptionPreviewdata: t,
  promoData: s,
  intl: a,
  planName: n,
  currencySymbol: o,
}) {
  const i = s.duration?.num_periods ?? 1;
  return [
    {
      adjustmentMessage: e.jsx(r, {
        id: "cancelPromoClaimModal.adjustment",
        defaultMessage: "Adjustment",
      }),
      proratedCreditMessage: e.jsx(r, {
        id: "cancelPromoClaimModal.proratedCredit",
        defaultMessage: "-{currencySign}{adjustment}",
        values: {
          currencySign: a.formatMessage(o.sign),
          adjustment: (-t.negative_line_item_total / 100).toFixed(2),
        },
      }),
      proratedCreditInfoMessage: e.jsx(r, {
        id: "cancelPromoClaimModal.proratedCreditInfo",
        defaultMessage:
          "Prorated credit for the remainder of your {planName} subscription",
        values: { planName: n },
      }),
      value: t.negative_line_item_total,
    },
    {
      adjustmentMessage: e.jsx(r, {
        id: "cancelPromoClaimModal.discount",
        defaultMessage: "Discount",
      }),
      proratedCreditMessage: e.jsx(r, {
        id: "cancelPromoClaimModal.discountAmount",
        defaultMessage: "-{currencySign}{discount}",
        values: {
          currencySign: a.formatMessage(o.sign),
          discount: (-t.discount_amount / 100).toFixed(2),
        },
      }),
      proratedCreditInfoMessage:
        "percentage" in s.discount
          ? e.jsx(r, {
              id: "cancelPromoClaimModal.percentageDiscountInfo",
              defaultMessage:
                "{discountPercentage}% off for {numPeriods, plural, one {1 month} other {{numPeriods} months}}",
              values: {
                discountPercentage: s.discount.percentage,
                numPeriods: i,
              },
            })
          : e.jsx(r, {
              id: "cancelPromoClaimModal.valueDiscountInfo",
              defaultMessage:
                "{valueOff} off for {numPeriods, plural, one {1 month} other {{numPeriods} months}}",
              values: {
                valueOff: a.formatNumber(s.discount.value, {
                  style: "currency",
                  currency: s.discount.currency_code,
                  minimumFractionDigits: 0,
                  maximumFractionDigits: 2,
                }),
                numPeriods: i,
              },
            }),
      value: t.discount_amount,
    },
  ];
}
function du({
  subscriptionPreviewData: t,
  promoData: s,
  planName: a,
  planCost: n,
  currencySymbol: o,
}) {
  const i = k(),
    c = s.duration?.num_periods ?? 1;
  return e.jsxs(e.Fragment, {
    children: [
      e.jsxs("div", {
        className: "flex justify-between",
        children: [
          e.jsx("span", {
            className: "font-semibold",
            children: e.jsx(r, {
              id: "cancelPromoClaimModal.subscription",
              defaultMessage:
                "ChatGPT {planName} for {numPeriods, plural, one {1 month} other {{numPeriods} months}}",
              values: { planName: a, numPeriods: c },
            }),
          }),
          e.jsx("span", {
            className: "font-semibold",
            children: e.jsx(r, {
              id: "cancelPromoClaimModal.subscriptionCost",
              defaultMessage: "{currencySign}{totalCost}",
              values: {
                currencySign: i.formatMessage(o.sign),
                totalCost: (
                  t.positive_line_item_total_excluding_tax / 100
                ).toFixed(2),
              },
            }),
          }),
        ],
      }),
      e.jsx("span", {
        className: "text-token-text-secondary text-sm",
        children: e.jsx(r, {
          id: "cancelPromoClaimModal.billingCycle",
          defaultMessage:
            "One-time payment, then {currencySign}{planCost}/month after {numPeriods, plural, one {1 month} other {{numPeriods} months}}",
          values: {
            currencySign: i.formatMessage(o.sign),
            planCost: i.formatMessage(n),
            numPeriods: c,
          },
        }),
      }),
    ],
  });
}
function uu({
  account: t,
  promoData: s,
  previewData: a,
  plusCost: n,
  proCost: o,
  currencySymbol: i,
  onBack: c,
  handleUpdate: l,
  isUpdating: u,
}) {
  const m = k(),
    h = t.data.subscriptionStatus.planType,
    g = mt(h.toLowerCase()),
    f = h === ke.PRO ? o : n,
    p = cu({
      subscriptionPreviewdata: a,
      promoData: s,
      intl: m,
      planName: g,
      currencySymbol: i,
    });
  return e.jsxs("div", {
    className: "p-6",
    children: [
      e.jsx(du, {
        subscriptionPreviewData: a,
        promoData: s,
        planName: g,
        planCost: f,
        currencySymbol: i,
      }),
      p
        .filter((y) => y.value !== 0)
        .map((y, M) =>
          e.jsx(
            Cl,
            {
              adjustmentMessage: y.adjustmentMessage,
              proratedCreditMessage: y.proratedCreditMessage,
              proratedCreditInfoMessage: y.proratedCreditInfoMessage,
            },
            M,
          ),
        ),
      e.jsx("hr", { className: "mt-4 mb-4" }),
      e.jsx(Ml, { data: a, currencySymbol: i }),
      a.default_payment_method &&
        e.jsxs(e.Fragment, {
          children: [
            e.jsx("hr", { className: "mt-4 mb-4" }),
            e.jsx(bl, { defaultPaymentMethod: a.default_payment_method }),
          ],
        }),
      e.jsxs("div", {
        className: "mt-8 flex justify-end gap-2",
        children: [
          e.jsx(Je, {
            title: m.formatMessage({
              id: "cancelPromoClaimModal.cancel",
              defaultMessage: "Cancel",
            }),
            color: "secondary",
            onClick: c,
          }),
          e.jsx(Je, {
            title: m.formatMessage({
              id: "cancelPromoClaimModal.payNow",
              defaultMessage: "Pay now",
            }),
            color: "primary",
            onClick: l,
            loading: u,
          }),
        ],
      }),
    ],
  });
}
function mu() {
  const t = fn(),
    s = Ao(),
    a = k(),
    n = R();
  return d.useCallback(async () => {
    try {
      await Ba(s ?? [], a, n, t.billingDetails, t.plusAnalyticsParams);
    } catch {}
  }, [s, a, n, t]);
}
function gu({ eligibleProgramName: t }) {
  const { data: s } = Ee({
      queryKey: ["referrals-enrollment-details"],
      queryFn: () => We.getEnrollmentDetails(),
    }),
    a = s?.enrollment_details;
  return a
    ? e.jsx(fu, { enrollmentDetails: a })
    : e.jsx(hu, { eligibleProgramName: t });
}
function fu({ enrollmentDetails: t }) {
  const s = st(),
    a = k(),
    n = R(),
    o = mu(),
    i = s?.hasPaidSubscription(),
    c = ts(t.referral_code),
    { discount: l } = t.referral_metadata,
    u = gs(a, l.value || 0, l.currency_code),
    m = t.earned_amount.split(".")[0],
    h = t.remaining_amount.split(".")[0];
  return e.jsxs("div", {
    className: "mt-2 flex flex-col gap-4",
    children: [
      e.jsxs("div", {
        children: [
          e.jsx("div", {
            className: "text-sm font-medium",
            children: e.jsx(r, { id: "OR4iav", defaultMessage: "Referrals" }),
          }),
          e.jsxs("div", {
            className: "flex items-center gap-2",
            children: [
              e.jsx("button", {
                onClick: () => {
                  cs(c, n).then(() => {
                    n.success(
                      a.formatMessage({
                        id: "1TiBkD",
                        defaultMessage: "Copied referral link to clipboard",
                      }),
                    );
                  });
                },
                children: e.jsxs("div", {
                  className: "flex items-center gap-1",
                  children: [
                    e.jsx("div", { className: "text-sm", children: c }),
                    e.jsx(jr, { className: "icon-sm" }),
                  ],
                }),
              }),
              !i && t.is_eligible_to_redeem
                ? e.jsx("div", {
                    className: "flex flex-1 justify-end",
                    children: e.jsx(N, {
                      onClick: () => {
                        o();
                      },
                      children: e.jsx(r, {
                        id: "u1eO00",
                        defaultMessage: "Get free Plus",
                      }),
                    }),
                  })
                : null,
            ],
          }),
        ],
      }),
      e.jsxs("div", {
        className:
          "border-token-border-default flex rounded-md border bg-gray-50 px-3 py-4 dark:bg-gray-900",
        children: [
          e.jsx(Jt, {
            className: "border-token-border-default flex-1 border-e",
            info: t.num_referred,
            label: e.jsx(r, {
              id: "i/bF9u",
              defaultMessage: "Friends referred",
            }),
          }),
          e.jsx(Jt, {
            className: "flex-1",
            info: m,
            label: e.jsx(r, { id: "iA319g", defaultMessage: "Earned" }),
          }),
          e.jsx(Jt, {
            className: "border-token-border-default flex-1 border-s",
            info: h,
            label: e.jsx(r, { id: "wY0EA3", defaultMessage: "Remaining" }),
          }),
        ],
      }),
      e.jsx("div", {
        className: "text-token-text-secondary text-xs",
        children: e.jsx(r, {
          ...Ke.referralLinkModalDisclaimer,
          values: { discount: u },
        }),
      }),
    ],
  });
}
function Jt({ className: t, info: s, label: a }) {
  return e.jsxs("div", {
    className: qe("flex flex-col items-center gap-0.5", t),
    children: [
      e.jsx("div", { className: "text-base font-medium", children: s }),
      e.jsx("div", {
        className: "text-token-text-secondary text-xs",
        children: a,
      }),
    ],
  });
}
function hu({ eligibleProgramName: t }) {
  const s = Te();
  return t
    ? e.jsxs("div", {
        className: "mt-2 flex flex-col gap-4",
        children: [
          e.jsx("div", {
            className: "text-sm font-medium",
            children: e.jsx(r, { id: "OR4iav", defaultMessage: "Referrals" }),
          }),
          e.jsx("div", {
            children: e.jsx(N, {
              onClick: () => {
                s(yr(t));
              },
              children: e.jsx(r, {
                id: "LZKJO9",
                defaultMessage: "Get my referral link",
              }),
            }),
          }),
        ],
      })
    : null;
}
function pu({ eligibleProgramName: t }) {
  return e.jsx(_, { children: e.jsx(gu, { eligibleProgramName: t }) });
}
function xu() {
  return new URL(window.location.href).searchParams.get("disable_mfa") != null;
}
function Cu({ onClose: t, onConfirm: s }) {
  const a = k();
  return e.jsx(Xa, {
    isOpen: !0,
    title: a.formatMessage(pa.disableConfimationTitle),
    confirmText: a.formatMessage(pa.disable),
    onConfirm: s,
    onClose: t,
    primaryButtonColor: "danger",
    children: e.jsx("div", {
      children: e.jsx(r, {
        id: "postSigninDisableConfimationModal.description.1",
        defaultMessage:
          "Are you sure you want to disable multi-factor authentication? You will no longer need to provide a verification code when you log into your account.",
      }),
    }),
  });
}
function Mu(t) {
  const s = t.map((a) => ps[a]).filter((a) => a !== void 0);
  return s.length === 1
    ? s[0]
    : e.jsx(r, {
        id: "confirmEnableMfaForByPassModal.otherAccount",
        defaultMessage: "another account",
      });
}
function bu({ mfaInfo: t, onEnableMFA: s, onCancel: a }) {
  const n = k(),
    { session: o } = is(),
    c = o?.user?.idp,
    l =
      (c ? ps[c] : void 0) ??
      e.jsx(r, {
        id: "confirmEnableMfaForByPassModal.yourAccount",
        defaultMessage: "your current account",
      }),
    u = Mu(t.otherProvidersWithoutMfa ?? []);
  return e.jsx(Xa, {
    isOpen: !0,
    title: n.formatMessage({
      id: "confirmEnableMfaForByPassModal.title",
      defaultMessage: "Enable multi-factor authentication (MFA)",
    }),
    confirmText: n.formatMessage({
      id: "confirmEnableMfaForByPassModal.enableMfa",
      defaultMessage: "Enable MFA",
    }),
    onConfirm: s,
    onClose: a,
    primaryButtonColor: "primary",
    children: e.jsxs("div", {
      children: [
        e.jsx("p", {
          className: "mb-6",
          children: e.jsx(r, {
            id: "confirmEnableMfaForByPassModal.description0",
            defaultMessage:
              "You'll only be able to log in using {currentIdp} while MFA is on.",
            values: { currentIdp: l },
          }),
        }),
        e.jsx("p", {
          children: e.jsx(r, {
            id: "confirmEnableMfaForByPassModal.description1",
            defaultMessage:
              "If you prefer to have MFA enabled for your account when logging in with {otherNonMfaIdp}, please sign out and log in again through that method before enabling.",
            values: { otherNonMfaIdp: u },
          }),
        }),
      ],
    }),
  });
}
const pa = D({
  disableConfimationTitle: {
    id: "mfaDisableConfirmationModal.title.0",
    defaultMessage: "Disable multi-factor authentication (MFA)",
  },
  disable: {
    id: "mfaDisableConfirmationModal.button",
    defaultMessage: "Disable MFA",
  },
});
function Pn() {
  const [t, s] = Do(),
    a = k();
  return e.jsxs("div", {
    className: "flex items-center justify-between",
    children: [
      e.jsx("div", { children: e.jsx(r, { ...kt.theme }) }),
      e.jsx(vr, {
        value: t,
        onValueChange: s,
        options: [
          { label: a.formatMessage(kt.system), value: "system" },
          { label: a.formatMessage(kt.dark), value: "dark" },
          { label: a.formatMessage(kt.light), value: "light" },
        ],
      }),
    ],
  });
}
const kt = D({
  theme: { id: "settingsModal.theme", defaultMessage: "Theme" },
  system: { id: "settingsModal.system", defaultMessage: "System" },
  dark: { id: "settingsModal.dark", defaultMessage: "Dark" },
  light: { id: "settingsModal.light", defaultMessage: "Light" },
});
async function ju() {
  let t;
  "keyboard" in navigator && (t = navigator.keyboard);
  const s = (await t?.getLayoutMap()) ?? new Map();
  return (
    t?.lock && (await t?.lock()),
    new Promise((a) => {
      const n = new Set(),
        o = new Set();
      let i = !0;
      const c = (f) => {
          const p = xa(f, s);
          p && !n.has(p) && (n.add(p), o.add(p));
        },
        l = (f) => {
          const p = xa(f, s);
          p && n.delete(p), n.size === 0 && i && h();
        },
        u = (f) => {
          i && (m(), a(void 0));
        },
        m = () => {
          window.removeEventListener("keydown", c),
            window.removeEventListener("keyup", l),
            window.removeEventListener("mousedown", u),
            window.removeEventListener("click", u),
            window.removeEventListener("blur", u),
            clearTimeout(g),
            t?.unlock && t?.unlock(),
            (i = !1);
        },
        h = () => {
          m();
          const f = yu(Array.from(o));
          a(En({ webKeys: f }));
        };
      window.addEventListener("keydown", c),
        window.addEventListener("keyup", l),
        window.addEventListener("mousedown", u),
        window.addEventListener("click", u),
        window.addEventListener("blur", u);
      const g = setTimeout(() => {
        i && (m(), a(void 0));
      }, 1e4);
    })
  );
}
function yu(t) {
  return t.toSorted((s, a) => {
    const n = Object.values(At).indexOf(s),
      o = n === -1 ? Number.MAX_SAFE_INTEGER : n,
      i = Object.values(At).indexOf(a),
      c = i === -1 ? Number.MAX_SAFE_INTEGER : i;
    return o === c ? s.charCodeAt(0) - a.charCodeAt(0) : o - c;
  });
}
const vu = (t) => /^[a-zA-Z]$/.test(t);
function xa(t, s) {
  const a = s.get(t.code) ?? t.key;
  let n;
  return b[t.key] ? (n = b[t.key]) : vu(a) ? (n = a.toUpperCase()) : (n = a), n;
}
function En(t) {
  return (
    t.webKeys
      ? ((t.electronAcceleratorKeys = t.webKeys.map(ku)),
        (t.electronAcceleratorString = Ca(t.electronAcceleratorKeys)))
      : t.electronAcceleratorKeys
        ? ((t.webKeys = t.electronAcceleratorKeys.map(Su)),
          (t.electronAcceleratorString = Ca(t.electronAcceleratorKeys)))
        : (t = {
            webKeys: [],
            electronAcceleratorKeys: [],
            electronAcceleratorString: void 0,
          }),
    t
  );
}
function Su(t) {
  return At[t] ?? t;
}
function ku(t) {
  return Nu[t] ?? t;
}
function Tn(t) {
  const s = new Set(Object.keys(An)),
    a = t.filter((o) => !s.has(o)).length,
    n = t.length - a;
  return a === 1 && n > 0;
}
const wu = (t) => {
    const s = t.split("+");
    return Tn(s) ? s : void 0;
  },
  Ca = (t) => (Tn(t) ? t.join("+") : void 0),
  An = {
    Meta: b.Meta,
    CmdOrCtrl: b.Mod,
    CommandOrControl: b.Mod,
    Ctrl: b.Control,
    Control: b.Control,
    Cmd: b.Mod,
    Command: b.Mod,
    Alt: b.Alt,
    Option: b.Alt,
    AltGr: b.AltGraph,
    Shift: b.Shift,
    Super: b.Super,
  },
  At = {
    ...An,
    Capslock: b.CapsLock,
    Space: b.Space,
    Tab: b.Tab,
    Numlock: b.NumLock,
    Scrolllock: b.ScrollLock,
    Backspace: b.Backspace,
    Delete: b.Delete,
    Insert: b.Insert,
    Return: b.Enter,
    Enter: b.Enter,
    Home: b.Home,
    End: b.End,
    PageUp: b.PageUp,
    PageDown: b.PageDown,
    Up: b.ArrowUp,
    Down: b.ArrowDown,
    Left: b.ArrowLeft,
    Right: b.ArrowRight,
    Esc: b.Escape,
    Escape: b.Escape,
    VolumeUp: b.AudioVolumeUp,
    VolumeDown: b.AudioVolumeDown,
    VolumeMute: b.AudioVolumeMute,
    MediaNextTrack: b.MediaTrackNext,
    MediaPreviousTrack: b.MediaTrackPrevious,
    MediaStop: b.MediaStop,
    MediaPlayPause: b.MediaPlayPause,
    PrintScreen: b.PrintScreen,
    numadd: b.Add,
    numsub: b.Subtract,
    nummult: b.Multiply,
    numdiv: b.Divide,
    numdec: b.Decimal,
    F1: b.F1,
    F2: b.F2,
    F3: b.F3,
    F4: b.F4,
    F5: b.F5,
    F6: b.F6,
    F7: b.F7,
    F8: b.F8,
    F9: b.F9,
    F10: b.F10,
    F11: b.F11,
    F12: b.F12,
    F13: b.F13,
    F14: b.F14,
    F15: b.F15,
    F16: b.F16,
    F17: b.F17,
    F18: b.F18,
    F19: b.F19,
    F20: b.F20,
  },
  Nu = Object.fromEntries(Object.entries(At).map(([t, s]) => [s, t]));
function _u() {
  return e.jsxs(e.Fragment, {
    children: [
      e.jsx(Pu, {}),
      e.jsx(Tu, {}),
      e.jsx(Du, {}),
      e.jsx(Au, {}),
      e.jsx(Bu, {}),
    ],
  });
}
async function Lu() {
  await tt?.checkForUpdates();
}
function Pu() {
  const [t, s] = d.useState(!1);
  return e.jsx(e.Fragment, {
    children: e.jsx(_, {
      children: e.jsx(me, {
        label: e.jsx(r, { ...re.updatesSettingLabel }),
        disabled: t,
        buttonLabel: t
          ? e.jsx(r, { ...re.updateInProgressButtonLabel })
          : e.jsx(r, { ...re.updateButtonLabel }),
        onClick: async () => {
          try {
            s(!0), await Lu();
          } catch (a) {
            le.addError(
              new Error("Sidetron Settings: Error checking for updates"),
              { cause: a },
            );
          } finally {
            s(!1);
          }
        },
        description: e.jsx(r, {
          ...re.updateSettingDescription,
          values: { version: Io(Fo()) ?? "Unknown" },
        }),
      }),
    }),
  });
}
const Eu = async () => {
  let t = "";
  const s = await tt?.getSettingValue("companionWindowShortcut");
  typeof s == "string"
    ? (t = s)
    : le.addError(
        new Error("Sidetron Settings: No companion chat hotkey found over IPC"),
      );
  const a = wu(t);
  return Promise.resolve(En({ electronAcceleratorKeys: a }));
};
function Tu() {
  const [t, s] = d.useState(!1),
    [a, n] = d.useState(void 0);
  return (
    d.useEffect(() => {
      (async () => {
        const i = await Eu();
        n(i);
      })();
    }, []),
    d.useEffect(() => {
      tt?.publish(Ws.HOTKEY_RECORDING_STATE, { inProgress: t });
    }, [t]),
    e.jsx(e.Fragment, {
      children: e.jsx(_, {
        children: e.jsx(me, {
          label: e.jsx(r, { ...re.companionChatHotkeyLabel }),
          disabled: a === void 0 || t,
          buttonLabel: t
            ? e.jsx(r, { ...re.companionChatHotkeyRecordingLabel })
            : a
              ? e.jsx(Iu, { keyboardBinding: a.webKeys })
              : e.jsx(r, { ...re.companionChatHotkeyLoadingLabel }),
          onClick: async () => {
            s(!0);
            const o = await ju();
            o
              ? o.electronAcceleratorString
                ? (n(o),
                  tt &&
                    (tt.publish(Ws.DESKTOP_SETTING_CHANGED, {
                      setting: "companionWindowShortcut",
                      value: o.electronAcceleratorString,
                    }),
                    le.addAction(
                      `Sidetron Settings: User recorded a new hotkey: ${o.electronAcceleratorString}`,
                    )))
                : le.addError(
                    new Error(
                      `Sidetron Settings: Invalid companion chat hotkey registered: ${o}`,
                    ),
                  )
              : le.addAction("Sidetron Settings: User did not record a hotkey"),
              s(!1);
          },
        }),
      }),
    })
  );
}
function Au() {
  return e.jsx(e.Fragment, { children: e.jsx(_, { children: e.jsx(Pn, {}) }) });
}
function Du() {
  return e.jsx(e.Fragment, {
    children: e.jsx(_, {
      children: e.jsxs("div", {
        className: "flex items-center justify-between",
        children: [
          e.jsx("div", { children: e.jsx(r, { ...re.textSizeLabel }) }),
          e.jsxs("div", {
            className: "flex shrink-0 gap-2",
            children: [
              e.jsx(N, {
                color: "secondary",
                onClick: Oo,
                "data-testid": "text-size-decrease",
                icon: Sr,
                className: "aspect-square p-0",
              }),
              e.jsx(N, {
                color: "secondary",
                onClick: Ro,
                "data-testid": "text-size-increase",
                icon: kr,
                className: "aspect-square p-0",
              }),
              e.jsx(N, {
                color: "secondary",
                onClick: Bo,
                "data-testid": "text-size-reset",
                children: e.jsx(r, { ...re.textSizeResetButtonLabel }),
              }),
            ],
          }),
        ],
      }),
    }),
  });
}
function Iu({ keyboardBinding: t }) {
  return e.jsx(e.Fragment, {
    children: Gl(t).map((s, a) =>
      e.jsxs(
        "span",
        {
          className: "text-xs",
          children: [s, a < t.length - 1 && e.jsx(Ou, {})],
        },
        a,
      ),
    ),
  });
}
function Ou() {
  return e.jsx("span", {
    className: "mx-1",
    children: e.jsx(r, { ...re.hotkeySeparator }),
  });
}
function Ru({ href: t, label: s, stateLabel: a, testId: n }) {
  return e.jsx("a", {
    className: "w-full",
    "data-testid": n,
    href: t,
    target: "_blank",
    rel: "noreferrer",
    children: e.jsxs("div", {
      className: "flex items-center justify-between",
      children: [
        e.jsx("div", { children: s }),
        e.jsxs("div", {
          className: "me-3 -mb-1 flex items-center",
          children: [
            a && e.jsx("div", { className: "me-2 -mt-0.5", children: a }),
            e.jsx(ds, { className: "icon-sm" }),
          ],
        }),
      ],
    }),
  });
}
function Bu() {
  const [t, s] = d.useState(!1),
    a = k(),
    n = async () => {
      const o = await tt?.getSettingValue("autoLaunch");
      s(!!o);
    };
  return (
    d.useEffect(() => {
      n();
      const o = () => {
        n();
      };
      return (
        window.addEventListener("focus", o),
        () => {
          window.removeEventListener("focus", o);
        }
      );
    }, []),
    e.jsx(e.Fragment, {
      children: e.jsx(_, {
        children: e.jsx(Ru, {
          href: "ms-settings:startupapps",
          label: e.jsx(r, { ...re.autoLaunchLabel }),
          stateLabel: t
            ? a.formatMessage(re.autoLaunchOnLabel)
            : a.formatMessage(re.autoLaunchOffLabel),
        }),
      }),
    })
  );
}
const re = D({
    autoLaunchLabel: {
      id: "desktopAppSettingsModal.autoLaunchLabel",
      defaultMessage: "Launch at Login",
    },
    autoLaunchOnLabel: {
      id: "desktopAppSettingsModal.autoLaunchOnLabel",
      defaultMessage: "On",
    },
    autoLaunchOffLabel: {
      id: "desktopAppSettingsModal.autoLaunchOffLabel",
      defaultMessage: "Off",
    },
    updatesSettingLabel: {
      id: "desktopAppSettingsModal.updatesSettingLabel",
      defaultMessage: "App updates",
    },
    updateButtonLabel: {
      id: "desktopAppSettingsModal.updateButtonLabel",
      defaultMessage: "Check for updates",
    },
    updateInProgressButtonLabel: {
      id: "desktopAppSettingsModal.updateInProgressButtonLabel",
      defaultMessage: "Checking for updates...",
    },
    updateSettingDescription: {
      id: "desktopAppSettingsModal.updateSettingDescription",
      defaultMessage: "Current version: {version}",
    },
    companionChatHotkeyLabel: {
      id: "desktopAppSettingsModal.companionChatHotkeyLabel",
      defaultMessage: "Companion window hotkey",
    },
    companionChatHotkeyLoadingLabel: {
      id: "desktopAppSettingsModal.companionChatHotkeyLoadingLabel",
      defaultMessage: "Loading...",
    },
    companionChatHotkeyRecordingLabel: {
      id: "desktopAppSettingsModal.companionChatHotkeyRecordingLabel",
      defaultMessage: "Recording...",
    },
    hotkeySeparator: {
      id: "desktopAppSettingsModal.hotkeySeparator",
      defaultMessage: "+",
    },
    textSizeLabel: {
      id: "desktopAppSettingsModal.textSizeLabel",
      defaultMessage: "Text size",
    },
    textSizeResetButtonLabel: {
      id: "desktopAppSettingsModal.textSizeResetButtonLabel",
      defaultMessage: "Reset",
    },
  }),
  Fu = () => {
    const { openSettings: t } = Ct();
    return e.jsx("button", {
      onClick: () => t(F.BuilderProfile),
      children: e.jsx(Ja, { className: "icon-sm" }),
    });
  };
function Gu({
  gizmoId: t,
  gizmoName: s,
  gizmoAvatar: a,
  canEdit: n,
  socials: o,
}) {
  const { data: i, isLoading: c } = xs();
  return c
    ? null
    : i
      ? e.jsxs(e.Fragment, {
          children: [
            n &&
              t &&
              e.jsx("span", {
                className: "absolute end-2 top-2",
                children: e.jsx(Fu, {}),
              }),
            e.jsx(Wl, { src: a, isFirstParty: !1, className: "h-8 w-8" }),
            e.jsx("div", {
              className:
                "text-token-text-primary mt-1 text-center text-sm font-semibold",
              children: s,
            }),
            e.jsx(wr, {
              builderName: i.display_name,
              builderUrl: i.website_url,
              socials: o,
              className: "text-xs",
            }),
          ],
        })
      : e.jsx(xt, {
          type: "info",
          children: e.jsx(r, {
            id: "gizmo.builderProfile.unableToLoadProfile",
            defaultMessage: "Unable to load your builder profile",
          }),
        });
}
function Uu() {
  const { data: t, isLoading: s } = xs(),
    a = st();
  return s
    ? e.jsx("div", {
        className: "flex justify-center",
        children: e.jsx(te, {}),
      })
    : t === void 0 || a == null
      ? e.jsx(xt, {
          type: "info",
          children: e.jsx(r, { ...Y.noCreatorProfile }),
        })
      : e.jsx(Vu, { data: t });
}
function Wu({ gizmoName: t, canEdit: s, gizmoAvatar: a }) {
  const n = k(),
    { openSettings: o } = Ct(),
    { data: i } = xs();
  return i
    ? e.jsxs("div", {
        className:
          "bg-token-main-surface-primary relative flex w-full flex-col items-center justify-stretch rounded-lg p-4",
        children: [
          e.jsx(Gu, {
            gizmoAvatar: a,
            gizmoName: t ?? n.formatMessage(Y.placeholderGPT),
            canEdit: s,
            socials: [i.socials.linkedin, i.socials.github, i.socials.twitter],
          }),
          e.jsx("div", {
            className: "text-token-text-tertiary absolute end-4 top-3 text-xs",
            children: s
              ? e.jsx("button", {
                  onClick: () => {
                    o(F.BuilderProfile);
                  },
                  children: e.jsx(Ja, { className: "icon-sm" }),
                })
              : e.jsx(r, { ...Y.preview }),
          }),
        ],
      })
    : null;
}
function Hu(t, s) {
  if (t.website_url && s.length > 0) {
    const a = s.find((n) => n.url === t.website_url);
    return a ? a.hostname : s[0].hostname;
  } else {
    if (s.length > 0) return s[0].hostname;
    if (t.website_url) return;
  }
}
function Vu({ data: t }) {
  const s = k(),
    a = Nr(),
    n = st()?.isEnterprisey(),
    o = st()?.isWorkspaceAccount(),
    i = pt(),
    c = t.domains.reduce(
      (g, f) =>
        f.status === "verified"
          ? [...g, { id: f.id, hostname: f.hostname, url: f.hostname }]
          : g,
      [],
    ),
    l = Hu(t, c),
    { value: u } = Ce("2256850471"),
    m = t.name == null || a.isPending,
    h = e.jsx(es, {
      size: "small",
      onChange: (g) => {
        a.mutateAsync({ hideName: !g });
      },
      disabled: m,
      enabled: !t.hide_name,
      label: t.hide_name
        ? s.formatMessage(Y.showNameToggle)
        : s.formatMessage(Y.hideNameToggle),
    });
  return e.jsxs("div", {
    className: "flex flex-col items-stretch",
    children: [
      e.jsx("div", {
        className: "mb-2",
        children: e.jsx(r, { ...Y.creatorProfileDescription }),
      }),
      e.jsx(Wu, { canEdit: !1 }),
      e.jsx(_, {
        children: e.jsxs("div", {
          className: "flex flex-col",
          children: [
            !t.is_verified &&
              e.jsxs(xt, {
                type: "info",
                children: [
                  e.jsx("div", {
                    children: e.jsx(r, {
                      ...Y.creatorProfileUnverifiedDisclaimer,
                    }),
                  }),
                  e.jsx("div", {
                    children: o
                      ? e.jsx(r, {
                          ...Y.creatorProfileBusinessUnverifiedDisclaimer,
                        })
                      : e.jsx(r, {
                          ...Y.creatorProfilePersonalUnverifiedDisclaimer,
                        }),
                  }),
                ],
              }),
            t.name &&
              e.jsxs("div", {
                className: "mt-4 flex flex-col gap-2",
                children: [
                  e.jsxs("div", {
                    className: "flex flex-row justify-between",
                    children: [
                      e.jsx("b", {
                        children: e.jsx(r, { ...Y.creatorProfileNameLabel }),
                      }),
                      m
                        ? e.jsx(we, {
                            side: "left",
                            label: s.formatMessage(Y.linkDisabledTooltip),
                            children: h,
                          })
                        : h,
                    ],
                  }),
                  e.jsxs("div", {
                    className: "flex flex-row items-center space-x-2",
                    children: [
                      e.jsx("span", { children: t.name }),
                      e.jsx(we, {
                        side: "top",
                        className: "ms-auto",
                        label: s.formatMessage(Y.nameSourceReason),
                        children: e.jsx(Oa, {
                          className: "icon-sm text-token-text-tertiary",
                        }),
                      }),
                    ],
                  }),
                ],
              }),
            !n &&
              e.jsxs("div", {
                className: "flex flex-col justify-center gap-2",
                children: [
                  e.jsx("hr", {
                    className: "border-token-border-default my-3",
                  }),
                  e.jsx("div", {
                    className: "flex flex-row justify-between",
                    children: e.jsx("b", {
                      children: e.jsx(r, { ...Y.creatorProfileLinkHeader }),
                    }),
                  }),
                  e.jsxs("div", {
                    className:
                      "flex flex-row items-center justify-between space-x-2",
                    children: [
                      e.jsx(_r, { className: "icon-sm" }),
                      e.jsx("div", {
                        children: e.jsx(Lr, {
                          selectedDomain: l,
                          domains: t.domains,
                          verifiedDomains: c,
                          onChangeDomain: (g) => {
                            a.mutateAsync({ websiteUrl: g });
                          },
                        }),
                      }),
                    ],
                  }),
                  u &&
                    e.jsxs(e.Fragment, {
                      children: [
                        e.jsx(Yt, { socialData: t.socials.linkedin, icon: Pr }),
                        e.jsx(Yt, { socialData: t.socials.github, icon: Er }),
                        e.jsx(Yt, { socialData: t.socials.twitter, icon: Tr }),
                      ],
                    }),
                ],
              }),
            !n &&
              i &&
              i.email &&
              e.jsxs("div", {
                className: "flex flex-col justify-center gap-2",
                children: [
                  e.jsx("hr", {
                    className: "border-token-border-default my-3",
                  }),
                  e.jsx("div", {
                    className: "flex flex-row justify-between",
                    children: e.jsx("b", {
                      children: e.jsx(r, { ...Y.creatorProfileEmailHeader }),
                    }),
                  }),
                  e.jsxs("div", {
                    className: "my-1 flex flex-row items-center space-x-2",
                    children: [
                      e.jsx(Cn, { className: "icon-sm" }),
                      e.jsx("span", { children: i.email }),
                    ],
                  }),
                  e.jsx(we, {
                    label: s.formatMessage(Y.feedbackEmailTooltip),
                    children: e.jsx(Ar, {
                      className: "rounded-xl",
                      id: "receive-support-emails",
                      onChange: (g) => {
                        a.mutateAsync({
                          willReceiveSupportEmails: g.currentTarget.checked,
                        });
                      },
                      checked: t.will_receive_support_emails,
                      label: s.formatMessage(Y.receiveFeedbackEmails),
                    }),
                  }),
                ],
              }),
          ],
        }),
      }),
    ],
  });
}
const Y = D({
  gizmoTab: { id: "settingsModal.gizmoTab", defaultMessage: "Builder profile" },
  creatorProfileDescription: {
    id: "settingsModal.creatorProfileDescription",
    defaultMessage:
      "Personalize your builder profile to connect with users of your GPTs. These settings apply to publicly shared GPTs.",
  },
  creatorProfileUnverifiedDisclaimer: {
    id: "settingsModal.createrProfileUnverifiedDisclaimer",
    defaultMessage: "Complete verification to publish GPTs to everyone.",
  },
  creatorProfilePersonalUnverifiedDisclaimer: {
    id: "settingsModal.creatorProfilePersonalUnverifiedDisclaimer",
    defaultMessage:
      "Verify your identity by adding billing details or verifying ownership of a public domain name.",
  },
  creatorProfileBusinessUnverifiedDisclaimer: {
    id: "settingsModal.creatorProfileBusinessUnverifiedDisclaimer",
    defaultMessage:
      "Contact your workspace administrator to set up a builder profile",
  },
  creatorProfileNameLabel: {
    id: "settingsModal.creatorProfileNameLabel",
    defaultMessage: "Name",
  },
  placeholderGPT: {
    id: "settingsModal.placeholderGPT",
    defaultMessage: "PlaceholderGPT",
  },
  byName: { id: "settingsModal.byName", defaultMessage: "by {name}" },
  preview: { id: "settingsModal.preview", defaultMessage: "Preview" },
  noCreatorProfile: {
    id: "settingsModal.noCreatorProfile",
    defaultMessage: "Unable to retrieve builder profile",
  },
  creatorProfileLinkHeader: {
    id: "settingsModal.creatorProfileLinkHeader.1",
    defaultMessage: "Links",
  },
  creatorProfileEmailHeader: {
    id: "settingsModal.creatorProfileEmailHeader.0",
    defaultMessage: "Email",
  },
  nameDisabledTooltip: {
    id: "settingsModal.nameDisabledTooltip",
    defaultMessage: "You must have a verified name to enable displaying a name",
  },
  linkDisabledTooltip: {
    id: "settingsModal.linkDisabledTooltip",
    defaultMessage:
      "You must have a verified domain to enable displaying a link",
  },
  addDomain: {
    id: "settingsModal.addDomain",
    defaultMessage: "Verify new domain",
  },
  nameSourceReason: {
    id: "settingsModal.nameSourceReason",
    defaultMessage: "Name is populated from your billing details",
  },
  hideNameToggle: {
    id: "settingsModal.hideNameToggle",
    defaultMessage: "Hide your name in your builder profile",
  },
  showNameToggle: {
    id: "settingsModal.showNameToggle",
    defaultMessage: "Show your name in your builder profile",
  },
  hideWebsiteToggle: {
    id: "settingsModal.hideWebsiteToggle",
    defaultMessage: "Hide your website in your builder profile",
  },
  showWebsiteToggle: {
    id: "settingsModal.showWebsiteToggle",
    defaultMessage: "Show your website in your builder profile",
  },
  feedbackEmailTooltip: {
    id: "settingsModal.feedbackEmailTooltip",
    defaultMessage:
      "Allow users of your GPTs to send feedback to your ChatGPT login email. Your email will never be shared publicly.",
  },
  receiveFeedbackEmails: {
    id: "settingsModal.receiveFeedbackEmails.1",
    defaultMessage: "Receive feedback emails",
  },
});
function Ku() {
  return e.jsx(r, { ...Y.gizmoTab });
}
const Dn = ["archivedConversations"],
  zu = 30,
  qu = 3;
function Yu({ conversation: t, elementRef: s, closeParentModal: a }) {
  const n = k(),
    o = R(),
    i = fe(),
    { mutate: c, isPending: l } = de({
      mutationFn: async ({ conversationId: g, ...f }) =>
        It.patchConversation(g, f),
      onSettled: () => {
        i.invalidateQueries({ queryKey: [Dn] }), ss(i, t.gizmo_id);
      },
      onError: () => {
        o.danger(n.formatMessage(ge.deleteFailed));
      },
    }),
    [u, m] = d.useState(!1),
    h = `/c/${t.id}`;
  return e.jsxs(e.Fragment, {
    children: [
      e.jsxs(A.Row, {
        disabled: l,
        children: [
          e.jsx(A.Cell, {
            children: e.jsxs("a", {
              href: h,
              rel: "noreferrer",
              className:
                "inline-flex items-center gap-2 align-top text-blue-500 dark:text-blue-400",
              ref: s,
              children: [e.jsx(en, { className: "icon-md shrink-0" }), t.title],
            }),
          }),
          e.jsx(A.Cell, {
            children:
              t.create_time != null
                ? e.jsx(Ot, {
                    value: t.create_time,
                    month: "long",
                    year: "numeric",
                    day: "numeric",
                  })
                : null,
          }),
          e.jsx(A.Cell, {
            textAlign: "right",
            children: e.jsxs(A.Actions, {
              children: [
                e.jsx(we, {
                  label: n.formatMessage(ge.unarchiveConversation),
                  side: "top",
                  children: e.jsx("button", {
                    "aria-label": n.formatMessage(ge.unarchiveConversation),
                    className:
                      "text-token-text-tertiary hover:text-token-text-secondary cursor-pointer text-[18px]",
                    onClick: () => {
                      c({ conversationId: t.id, is_archived: !1 });
                    },
                    children: e.jsx(Dr, { className: "icon-sm" }),
                  }),
                }),
                e.jsx(we, {
                  label: n.formatMessage(ge.deleteConversation),
                  side: "top",
                  children: e.jsx("button", {
                    onClick: () => m(!0),
                    "aria-label": n.formatMessage(ge.deleteConversation),
                    className:
                      "text-token-text-tertiary hover:text-token-text-secondary",
                    children: e.jsx(tn, { className: "icon-sm" }),
                  }),
                }),
              ],
            }),
          }),
        ],
      }),
      u &&
        e.jsx(Ir, {
          title: t.title,
          handleDelete: () => {
            c({ conversationId: t.id, is_visible: !1 });
          },
          onClose: (g) => {
            m(!1), g?.closeParentModal && a();
          },
        }),
    ],
  });
}
function Zu({ onClose: t }) {
  const {
      data: s,
      isLoading: a,
      isError: n,
      refetch: o,
      fetchNextPage: i,
      hasNextPage: c,
    } = Yo({
      queryKey: [Dn],
      queryFn: ({ pageParam: f }) =>
        It.getConversations({ offset: f, limit: zu, isArchived: !0 }),
      initialPageParam: 0,
      getNextPageParam: (f) => {
        const p = f.offset + f.limit;
        return p < f.total ? p : void 0;
      },
      refetchOnMount: "always",
    }),
    l = d.useRef(null),
    u = d.useCallback(
      (f) => {
        a ||
          f == null ||
          (l.current?.disconnect(),
          (l.current = new IntersectionObserver((p) => {
            p[0].isIntersecting && c && i();
          })),
          l.current.observe(f));
      },
      [a, c, i],
    );
  d.useEffect(
    () => () => {
      l.current?.disconnect();
    },
    [],
  );
  const m = d.useMemo(() => s?.pages.flatMap((f) => f.items) ?? [], [s]),
    h = k();
  let g;
  return (
    a
      ? (g = e.jsx("div", {
          className: "text-token-text-secondary pb-8",
          children: e.jsx(r, { ...ge.loading }),
        }))
      : n
        ? (g = e.jsxs("div", {
            children: [
              e.jsx("div", {
                className: "mb-4 text-red-500",
                children: e.jsx(r, { ...ge.somethingWentWrong }),
              }),
              e.jsx("div", {
                children: e.jsx(N, {
                  color: "secondary",
                  onClick: () => {
                    o();
                  },
                  children: e.jsx(r, { ...ge.retry }),
                }),
              }),
            ],
          }))
        : m.length === 0
          ? (g = e.jsx("div", {
              className: "text-token-text-tertiary pb-8",
              children: e.jsx(r, { ...ge.noArchivedConversations }),
            }))
          : (g = e.jsxs(A.Root, {
              className: "max-h-[28rem]",
              size: "compact",
              children: [
                e.jsxs(A.Header, {
                  children: [
                    e.jsx(A.HeaderCell, { children: e.jsx(r, { ...ge.name }) }),
                    e.jsx(A.HeaderCell, {
                      children: e.jsx(r, { ...ge.dateCreated }),
                    }),
                    e.jsx(A.HeaderCell, {}),
                  ],
                }),
                e.jsx(A.Body, {
                  children: m.map((f, p) =>
                    e.jsx(
                      Yu,
                      {
                        conversation: f,
                        elementRef: p === m.length - qu ? u : void 0,
                        closeParentModal: t,
                      },
                      f.id,
                    ),
                  ),
                }),
              ],
            })),
    e.jsx(B, {
      testId: "modal-archived-conversations",
      isOpen: !0,
      onClose: t,
      size: "custom",
      className: "max-w-5xl",
      type: "success",
      title: h.formatMessage(ge.title),
      showCloseButton: !0,
      children: g,
    })
  );
}
const ge = D({
  name: { id: "archivedConversationsModal.name", defaultMessage: "Name" },
  dateCreated: {
    id: "archivedConversationsModal.dateCreated",
    defaultMessage: "Date created",
  },
  loading: {
    id: "archivedConversationsModal.loading",
    defaultMessage: "Loading...",
  },
  somethingWentWrong: {
    id: "archivedConversationsModal.somethingWentWrong",
    defaultMessage: "Something went wrong...",
  },
  retry: { id: "archivedConversationsModal.retry", defaultMessage: "Retry" },
  noArchivedConversations: {
    id: "archivedConversationsModal.noArchivedConversations",
    defaultMessage: "You have no archived conversations.",
  },
  title: {
    id: "archivedConversationsModal.title",
    defaultMessage: "Archived Chats",
  },
  unarchiveConversation: {
    id: "archivedConversationsModal.unarchiveConversation",
    defaultMessage: "Unarchive conversation",
  },
  deleteConversation: {
    id: "archivedConversationsModal.deleteConversation",
    defaultMessage: "Delete conversation",
  },
  deleteFailed: {
    id: "archivedConversationsModal.deleteFailed",
    defaultMessage: "Deleting failed",
  },
});
function Ma({
  label: t,
  enabled: s,
  onChange: a,
  description: n,
  disabled: o = !1,
  compactDescription: i,
  centerToggleVertically: c,
  showAlphaPill: l,
  highlight: u,
}) {
  return e.jsx("div", {
    className: `mb-1 rounded-xl ${u ? "dark:bg-token-main-surface-secondary bg-[#F9F9F9] px-4 py-3" : ""}`,
    children: e.jsx(Ue, {
      label: t,
      enabled: s,
      onChange: a,
      disabled: o,
      description: n,
      compactDescription: i,
      centerToggleVertically: c,
      showAlphaPill: l,
    }),
  });
}
function $u() {
  const [t, s] = d.useState(!1),
    [a, n] = d.useState(!1),
    o = Te(),
    i = k(),
    c = Or(),
    { isLoading: l, data: u } = Rr(!0),
    m = Cs(),
    { data: h } = Br(void 0, !1, c),
    g = Hl(h?.memoryFullPct),
    f = Pe(),
    p = Fr(),
    y = sn(),
    M = an(),
    j = Gr(),
    w = Ur(),
    x = nn(),
    v = on(f);
  return (
    os(f, "1900515849"),
    l
      ? e.jsx("div", {
          className: "flex justify-center",
          children: e.jsx(te, {}),
        })
      : e.jsxs(e.Fragment, {
          children: [
            e.jsx(_, {
              children: e.jsx("div", {
                className: "text-base font-semibold",
                children: e.jsx(r, { ...Re.customizeTitle }),
              }),
            }),
            e.jsx("div", { className: "-mb-5" }),
            e.jsx(rn, {
              label: e.jsx(r, { ...Re.customInstructions }),
              stateLabel: u?.enabled
                ? i.formatMessage(Re.on)
                : i.formatMessage(Re.off),
              onClick: () => {
                T.logEventWithStatsig(
                  "User Context Custom Instructions Modal Opened",
                  "chatgpt_user_context_custom_instructions_modal_opened",
                  { location: "personalization_settings" },
                ),
                  oe.openModal(ce.UserContext);
              },
            }),
            e.jsx(_, {
              children: e.jsxs("div", {
                className:
                  "mt-4 flex items-center justify-between text-base font-semibold",
                children: [
                  e.jsx(r, { ...Re.memoryTitle }),
                  e.jsxs("a", {
                    href: "https://help.openai.com/en/articles/8590148-memory-faq",
                    target: "_blank",
                    rel: "noopener noreferrer",
                    className:
                      "text-token-text-secondary mt-1 flex items-center gap-1 text-sm font-normal",
                    children: [
                      e.jsx(r, { id: "WbGW2C", defaultMessage: "Learn more" }),
                      e.jsx(Wr, {
                        className:
                          "icon-md text-token-text-secondary inline-block",
                      }),
                    ],
                  }),
                ],
              }),
            }),
            e.jsxs(_, {
              children: [
                e.jsx(Ma, {
                  label: i.formatMessage(Re.toggleLabel),
                  enabled: c,
                  onChange: (S) => {
                    m.mutate(
                      { setting: ne.Sunshine, value: S },
                      {
                        onSuccess: () => {
                          !S && c
                            ? (j &&
                                w &&
                                m.mutate({ setting: ne.Moonshine, value: !1 }),
                              M &&
                                y &&
                                m.mutate({
                                  setting: ne.MemoryInSearch,
                                  value: !1,
                                }))
                            : S &&
                              j &&
                              m.mutate({ setting: ne.Moonshine, value: !0 });
                        },
                      },
                    );
                  },
                  description: e.jsx(e.Fragment, {
                    children: e.jsxs("p", {
                      children: [
                        e.jsx(r, { ...Re.exampleDescription }),
                        e.jsx("br", {}),
                        e.jsx(r, {
                          ...Re.manageMemoriesLink,
                          values: {
                            link: (S) =>
                              e.jsx("a", {
                                href: "#",
                                target: "_blank",
                                className: "underline",
                                rel: "noreferrer",
                                onClick: (L) => {
                                  L.preventDefault(), s(!0);
                                },
                                children: S,
                              }),
                          },
                        }),
                      ],
                    }),
                  }),
                }),
                e.jsx("div", {
                  children: e.jsx(Vl, {
                    className: "mt-3 mb-1",
                    memoryFullPct: h?.memoryFullPct,
                    showInfoLabel: !0,
                    onManageMemories: () => {
                      s(!0);
                    },
                  }),
                }),
              ],
            }),
            g &&
              p &&
              e.jsxs("div", {
                className: "mt-4 flex items-center gap-2",
                children: [
                  (T.logEventWithStatsig(
                    "Memory Full Warning Upsell Shown",
                    "chatgpt_memory_full_warning_upsell_shown_settings",
                  ),
                  null),
                  e.jsx(N, {
                    onClick: () => {
                      T.logEventWithStatsig(
                        "Memory Full Warning Upsell Clicked",
                        "chatgpt_memory_full_warning_upsell_clicked_settings",
                      ),
                        ms(o, "MemoryUsageWarning Settings Upsell");
                    },
                    color: "secondary",
                    children: e.jsx(r, {
                      id: "MemoryUsageWarningLarge.upgradeButton",
                      defaultMessage: "Get more space",
                    }),
                  }),
                ],
              }),
            t && e.jsx(Kl, { onClose: () => s(!1) }),
            !1,
            c &&
              j &&
              e.jsx(_, {
                children: e.jsx(Ma, {
                  label: i.formatMessage({
                    id: "2qTSAN",
                    defaultMessage: "Reference chat history",
                  }),
                  enabled: w,
                  onChange: (S) => {
                    m.mutate({ setting: ne.Moonshine, value: S });
                  },
                  disabled: !j,
                  description: e.jsx(r, {
                    id: "poYymi",
                    defaultMessage:
                      "Let ChatGPT reference all previous conversations when responding.",
                  }),
                }),
              }),
            x &&
              !v &&
              e.jsx(_, {
                children: e.jsx("div", {
                  className: "text-token-text-secondary pe-12 text-xs",
                  children: e.jsx(r, {
                    id: "iCZODP",
                    defaultMessage:
                      "ChatGPT may use Memory to personalize queries to search providers, such as Bing. {learnMoreLink}",
                    values: {
                      learnMoreLink: e.jsx(Hr, {
                        href: "https://help.openai.com/en/articles/9237897-chatgpt-search",
                        className: "underline",
                        children: e.jsx(r, {
                          id: "0M5wS5",
                          defaultMessage: "Learn more",
                        }),
                      }),
                    },
                  }),
                }),
              }),
            !1,
          ],
        })
  );
}
const Re = D({
  customizeTitle: {
    id: "personalizationSettings.customizeTitle",
    defaultMessage: "Customization",
  },
  memoryTitle: {
    id: "personalizationSettings.memoryTitle",
    defaultMessage: "Memory",
  },
  toggleLabel: {
    id: "settingsModal.myChagtGptToggleLabel.2",
    defaultMessage: "Reference saved memories",
  },
  exampleDescription: {
    id: "settingsModal.exampleDescription",
    defaultMessage: "Let ChatGPT save and use memories when responding.",
  },
  manageMemoriesLink: {
    id: "settingsModal.manageMemoriesLink",
    defaultMessage: "<link>Manage memories</link>",
  },
  exampleDescription1: {
    id: "settingsModal.exampleDescription1.1",
    defaultMessage:
      "ChatGPT will become more helpful as you chat, picking up on details and preferences to tailor its responses to you. <link>Learn more</link>",
  },
  exampleDescription2: {
    id: "settingsModal.exampleDescription2.2",
    defaultMessage:
      "To understand what ChatGPT remembers or teach it something new, just chat with it:",
  },
  exampleMessage1: {
    id: "settingsModal.exampleMessage1.1",
    defaultMessage: "Remember that I like concise responses.",
  },
  exampleMessage2: {
    id: "settingsModal.exampleMessage2.1",
    defaultMessage: "I just got a puppy!",
  },
  exampleMessage3: {
    id: "settingsModal.exampleMessage3.2",
    defaultMessage: "What do you remember about me?",
  },
  exampleMessage4: {
    id: "settingsModal.exampleMessage4",
    defaultMessage: "Where did we leave off on my last project?",
  },
  reset: { id: "settingsModal.reset", defaultMessage: "Reset memories" },
  resetModalTitle: {
    id: "settingsModal.resetModalTitle",
    defaultMessage: "Are you sure?",
  },
  resetModalDescription: {
    id: "settingsModal.resetModalDescription",
    defaultMessage:
      "Your GPT will forget what it has learned from your previous chats. This can't be undone.",
  },
  resetModalConfirm: {
    id: "settingsModal.resetModalConfirm",
    defaultMessage: "Confirm reset",
  },
  resetModalCancel: {
    id: "settingsModal.resetModalCancel",
    defaultMessage: "Cancel",
  },
  resetSuccessful: {
    id: "settingsModal.resetSuccessful",
    defaultMessage: "Your GPT's memory has been reset.",
  },
  resetFailed: {
    id: "settingsModal.resetFailed",
    defaultMessage: "Failed to reset your GPT's memory.",
  },
  on: { id: "personalizationSettings.on", defaultMessage: "On" },
  off: { id: "personalizationSettings.off", defaultMessage: "Off" },
  customInstructions: {
    id: "personalizationSettings.customInstructions",
    defaultMessage: "Custom instructions",
  },
  manageMemoriesButton: {
    id: "personalizationSettings.manageMemoriesButton",
    defaultMessage: "Manage memories",
  },
});
function Qu(t) {
  return O.safeDelete("/share/post/{post_id}", {
    parameters: { path: { post_id: t } },
  });
}
function Xu() {
  return O.safeDelete("/share/posts/mine");
}
function Ju({ limit: t }) {
  return O.safeGet("/share/posts/mine", {
    parameters: { query: { limit: t } },
  });
}
const Ne = {
    sharedConversations: ["sharedConversations"],
    sharedTextdocs: ["sharedTextdocs"],
    sharedPosts: ["sharedPosts"],
  },
  U = D({
    name: { id: "sharedConversationModal.name", defaultMessage: "Name" },
    dateShared: {
      id: "sharedConversationModal.dateShared",
      defaultMessage: "Date shared",
    },
    type: { id: "YiHQp6", defaultMessage: "Type" },
    chatType: { id: "0BR1NF", defaultMessage: "Chat" },
    canvasType: { id: "AalPA+", defaultMessage: "Canvas" },
    postType: { id: "UXpwgD", defaultMessage: "Post" },
    imageType: { id: "i6Dtp1", defaultMessage: "Image" },
    loading: {
      id: "sharedConversationModal.loading",
      defaultMessage: "Loading...",
    },
    somethingWentWrong: {
      id: "sharedConversationModal.somethingWentWrong",
      defaultMessage: "Something went wrong...",
    },
    retry: { id: "sharedConversationModal.retry", defaultMessage: "Retry" },
    noSharedConversations: {
      id: "sharedConversationModal.noSharedConversations",
      defaultMessage: "You have no shared links.",
    },
    title: {
      id: "sharedConversationModal.title",
      defaultMessage: "Shared Links",
    },
    goToOriginConversation: {
      id: "sharedConversationModal.goToOriginConversation",
      defaultMessage: "View source chat",
    },
    deleteSharedLink: {
      id: "sharedConversationModal.deleteSharedLink",
      defaultMessage: "Delete shared link",
    },
    deleteSharedLinkFailed: {
      id: "sharedConversationModal.deleteSharedLinkFailed",
      defaultMessage: "Deleting shared link failed",
    },
    deleteAllSharedLinks: {
      id: "sharedConversationModal.deleteSharedAllConversations",
      defaultMessage: "Delete all shared links",
    },
    deleteAllSharedLinksConfirm: {
      id: "sharedConversationModal.deleteSharedAllConversationsConfirm",
      defaultMessage: "Are you sure you want to delete all your shared links?",
    },
    deleteAllSharedLinksFailed: {
      id: "sharedConversationModal.deleteSharedAllConversationsFailed",
      defaultMessage: "Deleting shared links failed",
    },
  });
function e1() {
  const t = fe(),
    s = k(),
    a = R(),
    n = ln(!0),
    { mutate: o } = de({
      mutationFn: () =>
        Promise.allSettled([
          O.safeDelete("/share/all", { requestBody: { confirm: !0 } }),
          O.safeDelete("/shared_textdocs", {}),
          n() ? Xu() : Promise.resolve(),
        ]),
      onSettled: () => {
        t.invalidateQueries({ queryKey: Ne.sharedConversations }),
          t.invalidateQueries({ queryKey: Ne.sharedTextdocs }),
          t.invalidateQueries({ queryKey: Ne.sharedPosts });
      },
      onError: () => {
        a.danger(s.formatMessage(U.deleteAllSharedLinksFailed));
      },
    });
  return e.jsx(Qa, {
    side: "bottom",
    sideOffset: 4,
    triggerButton: e.jsx("button", {
      className:
        "text-token-text-tertiary hover:text-token-text-secondary radix-state-open:text-token-text-tertiary dark:radix-state-open:text-gray-400",
      children: e.jsx(Vr, { className: "icon-sm" }),
    }),
    children: e.jsx(J.Item, {
      onClick: () => {
        window.confirm(s.formatMessage(U.deleteAllSharedLinksConfirm)) && o();
      },
      color: "danger",
      children: e.jsx(r, { ...U.deleteAllSharedLinks }),
    }),
  });
}
function t1() {
  return O.safeGet("/shared_conversations", {
    parameters: { query: { order: "created" } },
  });
}
function s1() {
  return Ee({
    queryKey: Ne.sharedConversations,
    queryFn: t1,
    refetchOnMount: "always",
  });
}
function a1() {
  return Ee({
    queryKey: Ne.sharedTextdocs,
    queryFn: () => O.safeGet("/shared_textdocs", {}),
    refetchOnMount: "always",
  });
}
function n1() {
  const s = ln(!0)();
  return Ee({
    queryKey: Ne.sharedPosts,
    queryFn: () => Ju({ limit: 1e4 }),
    refetchOnMount: "always",
    enabled: s,
    initialData: s ? { items: [], cursor: null } : void 0,
  });
}
const Ns = ({ conversationId: t, onClickDelete: s }) => {
  const a = k();
  return e.jsx(A.Cell, {
    textAlign: "right",
    children: e.jsxs(A.Actions, {
      children: [
        t &&
          e.jsx(we, {
            label: a.formatMessage(U.goToOriginConversation),
            side: "top",
            children: e.jsx("a", {
              href: zr(t),
              target: "_blank",
              rel: "noreferrer",
              "aria-label": a.formatMessage(U.goToOriginConversation),
              className:
                "text-token-text-tertiary hover:text-token-text-secondary cursor-pointer",
              children: e.jsx(en, { className: "icon-sm" }),
            }),
          }),
        e.jsx(we, {
          label: a.formatMessage(U.deleteSharedLink),
          side: "top",
          className: "flex h-fit",
          children: e.jsx("button", {
            onClick: s,
            "aria-label": a.formatMessage(U.deleteSharedLink),
            className:
              "text-token-text-tertiary hover:text-token-text-secondary",
            children: e.jsx(tn, { className: "icon-sm" }),
          }),
        }),
      ],
    }),
  });
};
function o1({ sharedConversation: t }) {
  const s = k(),
    a = R(),
    n = fe(),
    { mutate: o, isPending: i } = de({
      mutationFn: ({ sharedConversationId: l }) =>
        O.safeDelete("/share/{shared_conversation_id}", {
          parameters: { path: { shared_conversation_id: l } },
        }),
      onSettled: () => {
        n.invalidateQueries({ queryKey: Ne.sharedConversations });
      },
      onError: () => {
        a.danger(s.formatMessage(U.deleteSharedLinkFailed));
      },
    }),
    c = t.workspace_id != null ? `/share/e/${t.id}` : `/share/${t.id}`;
  return e.jsxs(A.Row, {
    disabled: i,
    children: [
      e.jsx(A.Cell, {
        children: e.jsxs("a", {
          href: c,
          target: "_blank",
          rel: "noreferrer",
          className:
            "inline-flex items-center gap-2 align-top text-blue-500 dark:text-blue-400",
          children: [e.jsx(dt, { className: "icon-sm shrink-0" }), t.title],
        }),
      }),
      e.jsx(A.Cell, { children: e.jsx(r, { ...U.chatType }) }),
      e.jsx(A.Cell, {
        children:
          t.create_time != null
            ? e.jsx(Ot, {
                value: t.create_time,
                month: "long",
                year: "numeric",
                day: "numeric",
              })
            : null,
      }),
      e.jsx(Ns, {
        conversationId: t.conversation_id,
        onClickDelete: () => o({ sharedConversationId: t.id }),
      }),
    ],
  });
}
function i1({ sharedTextdoc: t }) {
  const { conversation_id: s, shared_textdoc_id: a } = t,
    n = k(),
    o = R(),
    i = fe(),
    { mutate: c, isPending: l } = de({
      mutationFn: async ({ sharedTextdocId: u }) =>
        O.safeDelete("/textdoc/shared/{shared_textdoc_id}", {
          parameters: { path: { shared_textdoc_id: u } },
        }),
      onSettled: () => {
        i.invalidateQueries({ queryKey: Ne.sharedTextdocs });
      },
      onError: () => {
        o.danger(n.formatMessage(U.deleteSharedLinkFailed));
      },
    });
  return e.jsxs(A.Row, {
    disabled: l,
    children: [
      e.jsx(A.Cell, {
        children: e.jsxs("a", {
          href: zl(a),
          target: "_blank",
          rel: "noreferrer",
          className:
            "inline-flex items-center gap-2 align-top text-blue-500 dark:text-blue-400",
          children: [e.jsx(dt, { className: "icon-sm shrink-0" }), t.name],
        }),
      }),
      e.jsx(A.Cell, { children: e.jsx(r, { ...U.canvasType }) }),
      e.jsx(A.Cell, {
        children:
          t.created_at != null
            ? e.jsx(Ot, {
                value: t.created_at,
                month: "long",
                year: "numeric",
                day: "numeric",
              })
            : null,
      }),
      e.jsx(Ns, {
        conversationId: s,
        onClickDelete: () => c({ sharedTextdocId: a }),
      }),
    ],
  });
}
function r1({ sharedPost: t }) {
  const s = k(),
    a = R(),
    n = fe(),
    { mutate: o, isPending: i } = de({
      mutationFn: async ({ postId: l }) => Qu(l),
      onSettled: () => {
        n.invalidateQueries({ queryKey: Ne.sharedPosts });
      },
      onError: () => {
        a.danger(s.formatMessage(U.deleteSharedLinkFailed));
      },
    }),
    c =
      t.attachments?.[0]?.kind === "media_generation"
        ? U.imageType
        : U.postType;
  return e.jsxs(A.Row, {
    disabled: i,
    children: [
      e.jsx(A.Cell, {
        children: e.jsxs("a", {
          href: Kr(t.id),
          target: "_blank",
          rel: "noreferrer",
          className:
            "inline-flex items-center gap-2 align-top text-blue-500 dark:text-blue-400",
          children: [e.jsx(dt, { className: "icon-sm shrink-0" }), t.text],
        }),
      }),
      e.jsx(A.Cell, { children: e.jsx(r, { ...c }) }),
      e.jsx(A.Cell, {
        children:
          t.posted_at != null
            ? e.jsx(Ot, {
                value: t.posted_at * 1e3,
                month: "long",
                year: "numeric",
                day: "numeric",
              })
            : null,
      }),
      e.jsx(Ns, {
        conversationId: void 0,
        onClickDelete: () => o({ postId: t.id }),
      }),
    ],
  });
}
function l1({ onClose: t }) {
  const { data: s, isLoading: a, isError: n, refetch: o } = s1(),
    { data: i, isLoading: c, isError: l, refetch: u } = a1(),
    { data: m, isLoading: h, isError: g, refetch: f } = n1(),
    p = k();
  let y;
  return (
    a || c || h
      ? (y = e.jsx("div", {
          className: "text-token-text-secondary pb-8",
          children: e.jsx(r, { ...U.loading }),
        }))
      : l || n || g
        ? (y = e.jsxs("div", {
            children: [
              e.jsx("div", {
                className: "mb-4 text-red-500",
                children: e.jsx(r, { ...U.somethingWentWrong }),
              }),
              e.jsx("div", {
                children: e.jsx(N, {
                  color: "secondary",
                  onClick: () => {
                    o(), u(), f();
                  },
                  children: e.jsx(r, { ...U.retry }),
                }),
              }),
            ],
          }))
        : s?.total === 0 &&
            i?.shared_textdocs.length === 0 &&
            m?.items.length === 0
          ? (y = e.jsx("div", {
              className: "text-token-text-tertiary pb-8",
              children: e.jsx(r, { ...U.noSharedConversations }),
            }))
          : (y = e.jsxs(A.Root, {
              className: "max-h-[28rem]",
              size: "compact",
              children: [
                e.jsxs(A.Header, {
                  children: [
                    e.jsx(A.HeaderCell, { children: e.jsx(r, { ...U.name }) }),
                    e.jsx(A.HeaderCell, { children: e.jsx(r, { ...U.type }) }),
                    e.jsx(A.HeaderCell, {
                      children: e.jsx(r, { ...U.dateShared }),
                    }),
                    e.jsx(A.HeaderCell, {
                      textAlign: "right",
                      children: e.jsx(e1, {}),
                    }),
                  ],
                }),
                e.jsxs(A.Body, {
                  children: [
                    s?.items.map((M) =>
                      e.jsx(o1, { sharedConversation: M }, M.id),
                    ),
                    i?.shared_textdocs.map((M) =>
                      e.jsx(i1, { sharedTextdoc: M }, M.shared_textdoc_id),
                    ),
                    m?.items.map((M) => e.jsx(r1, { sharedPost: M }, M.id)),
                  ],
                }),
              ],
            })),
    e.jsx(B, {
      isOpen: !0,
      onClose: t,
      size: "custom",
      className: "max-w-5xl",
      type: "success",
      title: p.formatMessage(U.title),
      testId: "modal-shared-conversations",
      showCloseButton: !0,
      children: y,
    })
  );
}
const In = "https://help.openai.com/en/articles/5722486",
  c1 =
    "https://help.openai.com/en/articles/8400625-voice-mode-faq#h_3839e62d6a";
function d1(t) {
  const s = La(t),
    { data: a } = Ee({
      queryKey: ["data-usage-for-training", s?.accountUserId],
      queryFn: () => O.safeGet("/accounts/data_usage_for_training"),
      enabled: s != null,
    });
  return a?.data_usage_for_training;
}
function u1() {
  const { data: t } = ns(),
    s = k(),
    a = lt(Nt.isBusinessWorkspace),
    [n, o] = d.useState(!1),
    i = lt(Nt.isTeamPlan),
    c = lt(Nt.isEduPlan),
    { data: l } = _t(ne.TrainingAllowed),
    { data: u } = _t(ne.VoiceTrainingAllowed),
    { data: m } = _t(ne.VideoTrainingAllowed),
    h = Cs(),
    g = d1(t),
    f = g === "disallowed" ? !1 : !!l;
  return e.jsxs(_, {
    children: [
      e.jsx(rn, {
        onClick: () => o(!0),
        label: s.formatMessage(C.chatTrainingAllowedToggleLabel),
        stateLabel: f
          ? s.formatMessage({
              id: "settingsModal.trainingEnabled",
              defaultMessage: "On",
            })
          : s.formatMessage({
              id: "settingsModal.trainingDisabled",
              defaultMessage: "Off",
            }),
        testId: "improve-model-open-modal-button",
      }),
      n &&
        e.jsxs(B, {
          testId: "modal-training-toggle",
          isOpen: !0,
          onClose: () => o(!1),
          title: s.formatMessage({
            id: "settingsModal.trainingToggleModalTitle",
            defaultMessage: "Model improvement",
          }),
          type: "success",
          secondaryButton: e.jsx(N, {
            color: "secondary",
            onClick: () => o(!1),
            "data-testid": "improve-model-done-button",
            children: e.jsx(r, {
              id: "settingsModal.trainingToggleModalDoneButton",
              defaultMessage: "Done",
            }),
          }),
          children: [
            e.jsx("div", {
              className: "pb-8",
              children: e.jsx(Ue, {
                label: s.formatMessage(C.chatTrainingAllowedToggleLabel),
                disabled: g === "disallowed",
                enabled: f,
                onChange: (p) => {
                  h.mutate({ setting: ne.TrainingAllowed, value: p });
                },
                toggleTooltip: a
                  ? e.jsx(r, {
                      ...(i
                        ? C.chatTrainingTeamsTooltip
                        : c
                          ? C.chatTrainingEduTooltip
                          : C.chatTrainingEnterpriseTooltip),
                    })
                  : null,
                description: e.jsx(r, {
                  ...C.trainingAllowedDescription,
                  values: {
                    link: (p) =>
                      e.jsx("a", {
                        href: In,
                        target: "_blank",
                        className: "underline",
                        rel: "noreferrer",
                        children: p,
                      }),
                  },
                }),
                testId: "improve-model-toggle",
              }),
            }),
            !a &&
              e.jsxs("div", {
                className: "flex flex-col",
                children: [
                  e.jsx("p", {
                    className:
                      "text-token-text-secondary mb-2 text-lg leading-7 font-semibold",
                    children: e.jsx(r, {
                      id: "settingsModal.trainingToggleModalVoiceAndVideoTitle",
                      defaultMessage: "Voice mode",
                    }),
                  }),
                  e.jsx("div", {
                    className: "pb-2",
                    children: e.jsx(Ue, {
                      label: s.formatMessage(C.voiceTrainingAllowedLabel),
                      enabled: f ? !!u : !1,
                      disabled: !f,
                      onChange: (p) => {
                        f &&
                          h.mutate({
                            setting: ne.VoiceTrainingAllowed,
                            value: p,
                          });
                      },
                    }),
                  }),
                  e.jsx(Ue, {
                    label: s.formatMessage(C.videoTrainingAllowedLabel),
                    enabled: f ? !!m : !1,
                    disabled: !f,
                    onChange: (p) => {
                      f &&
                        h.mutate({
                          setting: ne.VideoTrainingAllowed,
                          value: p,
                        });
                    },
                    description: e.jsx(r, {
                      ...C.voiceAndVideoTrainingDescription,
                      values: {
                        link: (p) =>
                          e.jsx("a", {
                            href: c1,
                            target: "_blank",
                            className: "underline",
                            rel: "noreferrer",
                            children: p,
                          }),
                      },
                    }),
                  }),
                ],
              }),
          ],
        }),
    ],
  });
}
const m1 = () => {
  const t = k(),
    s = R(),
    a = qr(),
    { pathname: n } = ft(),
    o = Te(),
    { closeSettings: i, currentTab: c, openSettings: l } = Ct(),
    [u, m] = d.useState(!1),
    [h, g] = d.useState(!1),
    [f, p] = d.useState(!1),
    [y, M] = d.useState(!1),
    [j, w] = d.useState(!1),
    [x, v] = d.useState(!1),
    [S, L] = d.useState(!1),
    [P, I] = d.useState(!1),
    [ie, G] = d.useState(!1),
    [Ae, ye] = d.useState(!1),
    [De, ve] = d.useState(!1),
    Ie = xu(),
    ae = Yr(),
    { setupMfa: He, removeMfa: Oe } = Zr({
      useNativeProvider: ae.use_native_mfa,
      auth0UserExists: ae.auth0_user_exists,
    }),
    H = ae.status,
    Qe = ae.otherProvidersWithoutMfa && ae.otherProvidersWithoutMfa.length > 0,
    { session: W } = is(),
    V = W?.user,
    he = V?.idp,
    On =
      (he ? ps[he] : void 0) ??
      e.jsx(r, {
        id: "confirmEnableMfaForByPassModal.yourAccount",
        defaultMessage: "your current account",
      }),
    { data: _s } = ns(),
    $ = La(_s),
    Rn = $?.features,
    Ls = lt(Nt.isBusinessWorkspace),
    Bn = $r(),
    Fn = Qs.useStore(),
    Gn = Qs.useDisabledGlobally(),
    Un = us(),
    { hasContextConnectorEnabled: Wn } = Bt(),
    { clientApplications: Ps } = Ya(),
    Es = (Ps != null && Ps.length > 0) || Wn || Un,
    Hn = Pe(),
    Ts = os(Hn, "2509278897"),
    Vn = Qr(ya.WorkspaceShareLinks),
    Kn = Pt(ce.CookieManagement),
    { data: ot } = _t(ne.ShowExpandedCodeView),
    As = ot === void 0,
    [zn, Ds] = d.useState(As ? !1 : ot),
    Is = Cs(),
    Os = cn(),
    qn = $?.isTeam(),
    Yn = _s?.accountItems.some((q) => q.isPersonalAccount()),
    Zn = Pe(),
    $n = sn(),
    Qn = an(),
    Xn = nn(),
    Jn = on(Zn),
    eo =
      (V?.email && Rn?.includes(Wo) && (H === X.LOADING || H === X.DISABLED)) ||
      H === X.ENABLED,
    Ht = Bn,
    Rs = $ && $.hasPaidSubscription() && !$.isWorkspacePlan(),
    { data: to } = Ee({
      queryKey: ["is-eligible-for-referrals"],
      queryFn: () => We.getIsEligibleForReferrals(),
    }),
    { value: so } = Ce("550432558"),
    Vt = so ? to?.eligible_program_name : null,
    [Kt, Ve] = d.useState(null);
  d.useEffect(() => {
    ot !== void 0 && Ds(ot);
  }, [ot]);
  const ao = d.useCallback(() => {
      m(!1);
    }, []),
    no = d.useCallback(() => {
      g(!1);
    }, []),
    oo = d.useCallback(() => {
      M(!1);
    }, []),
    io = d.useCallback(() => {
      m(!0);
    }, []),
    ro = d.useCallback(() => {
      g(!0);
    }, []),
    lo = d.useCallback(() => {
      p(!0);
    }, []),
    co = d.useCallback(() => {
      M(!0);
    }, []),
    uo = d.useCallback(() => {
      G(!0);
    }, []),
    mo = d.useCallback(async () => {
      Ve("cancel");
    }, []),
    go = d.useCallback(() => {
      Ve("renew");
    }, []),
    fo = d.useCallback(() => {
      I(!0),
        O.safePost("/accounts/logout_all")
          .then(() => {
            s.success(t.formatMessage(C.logoutAllSuccess), {
              testId: "logout-all-success-toaster",
            }),
              ct();
          })
          .catch((q) => {
            le.addError(
              new Error("Failed logging out all accounts: ", { cause: q }),
            ),
              s.danger(t.formatMessage(C.logoutAllFailed), {
                hasCloseButton: !0,
              }),
              I(!1);
          });
    }, [t, s]),
    zt = fe(),
    ho = () => {
      O.safePatch("/conversations", {
        requestBody: { is_visible: !1 },
        intercomEventOnError: "fetch-error:conversations:delete",
      }).then(() => {
        ss(zt);
      }),
        n !== "/" && o("/", { replace: !0 });
    },
    po = () => {
      O.safePatch("/conversations", { requestBody: { is_archived: !0 } }).then(
        () => {
          s.info(t.formatMessage(C.archiveHistorySuccess)), ss(zt);
        },
      ),
        n !== "/" && o("/", { replace: !0 });
    },
    xo = ae.status !== X.LOADING,
    { native_default_factor_id: Bs, use_native_mfa: Co } = ae,
    Mo = () => {
      if (ae.status !== X.ENABLED) throw new Error("MFA is not enabled");
      if (Co) {
        if (!Bs) throw new Error("No factor ID found");
        return O.safePost("/accounts/mfa/user/disable_in_house", {
          requestBody: { factor_id: Bs },
        });
      } else return O.safePost("/accounts/disable_mfa");
    },
    bo = () => {
      Mo()
        .then(() => {
          zt.invalidateQueries({ queryKey: ["mfaInfo"] }),
            o(Hs(Vs.DISABLE_MFA_SUCCESS, "/#settings/Security"));
        })
        .catch(() => {
          o(Hs(Vs.DISABLE_MFA_TIMEOUT, "/#settings/Security"));
        });
    },
    { value: Fs } = Ce("3325813340");
  if (u) return e.jsx(b1, { onClose: ao });
  if (h) return e.jsx(C1, { onClose: no, onDeleteHistory: ho });
  if (f) return e.jsx(M1, { onClose: () => p(!1), onArchiveHistory: po });
  if (y) return e.jsx(j1, { onClose: oo });
  if (j)
    return e.jsx(l1, {
      onClose: () => {
        w(!1);
      },
    });
  if (ie)
    return e.jsx(bu, {
      mfaInfo: ae,
      onCancel: () => {
        G(!1);
      },
      onEnableMFA: He,
    });
  if (Ie)
    return xo
      ? e.jsx(Cu, { onClose: () => o("/", { replace: !0 }), onConfirm: bo })
      : null;
  if (x)
    return e.jsx(Xr, {
      onClose: () => {
        v(!1);
      },
      fromSettings: !0,
    });
  if (S)
    return e.jsx(Zu, {
      onClose: () => {
        L(!1);
      },
    });
  if (Kn) return null;
  if (Kt === "cancel" && $)
    return e.jsx(Xd, {
      isOpen: !0,
      onClose: () => {
        T.logEventWithStatsig(
          "Cancel Subscription Modal Dismissed",
          "chatgpt_cancel_subscription_modal_dismissed",
        ),
          Ve(null);
      },
      onClaimOfferButtonClicked: () => {
        T.logEventWithStatsig(
          "Cancel Subscription Modal Claim Offer Button Clicked",
          "chatgpt_cancel_subscription_modal_claim_offer_offer_button_clicked",
        ),
          Ve("claim_cancellation_promo");
      },
      currentAccount: $,
    });
  if (Kt === "claim_cancellation_promo" && $)
    return e.jsx(ru, {
      onClose: () => {
        Ve(null);
      },
      onBackButtonClicked: () => {
        Ve("cancel");
      },
      account: $,
    });
  if (Kt === "renew" && $) {
    const q = $.mustGetSubscriptionBillingCurrency("GlobalSettingsModal");
    return e.jsx(jl, {
      isOpen: !0,
      onClose: () => Ve(null),
      accountId: $.id,
      initialPlanType: $.data.subscriptionStatus.planType,
      updatedPlanType: $.data.subscriptionStatus.planType,
      billingDetails: { currency: q },
    });
  } else
    return Ae
      ? e.jsx(Fd, { onClose: () => ye(!1) })
      : De
        ? e.jsx(Hd, { onClose: () => ve(!1) })
        : e.jsx(B, {
            testId: "modal-settings",
            isOpen: !0,
            onClose: i,
            size: "custom",
            className:
              "h-[100%] md:max-h-[625px] md:min-h-[625px] md:max-w-[680px]",
            type: "success",
            title: t.formatMessage(C.settings),
            showCloseButton: !0,
            noPadding: !0,
            children: e.jsxs(Jr, {
              className: "flex h-[100%] flex-col gap-6 md:flex-row",
              defaultValue: c,
              orientation: a ? "vertical" : void 0,
              onValueChange: (q) => {
                l(q);
              },
              children: [
                e.jsxs(el, {
                  className: qe(
                    "m-2 md:m-0 md:px-4 md:ps-6 md:pt-4",
                    "flex shrink-0 flex-wrap md:ms-[-8px] md:min-w-[180px]",
                    a
                      ? "max-w-[200px] flex-col gap-2"
                      : "bg-token-main-surface-secondary flex-row overflow-x-auto rounded-lg",
                  ),
                  children: [
                    e.jsx(je, {
                      value: F.General,
                      icon: e.jsx(tl, { className: "icon-sm" }),
                      label: e.jsx(r, { ...C.generalTab }),
                    }),
                    Fs && e.jsx(Qd, {}),
                    Ht &&
                      e.jsx(je, {
                        value: F.DesktopApp,
                        icon: e.jsx(sl, { className: "icon-sm" }),
                        label: e.jsx(r, { ...C.desktopAppTab }),
                        testId: "desktop-app-tab",
                      }),
                    Os &&
                      e.jsx(je, {
                        value: F.Personalization,
                        icon: e.jsx(Vd, { className: "icon-sm" }),
                        label: e.jsx(r, { ...C.personalizationTab }),
                        testId: "personalization-tab",
                      }),
                    e.jsx(ta.Trigger, {}),
                    e.jsx(je, {
                      value: F.DataControls,
                      icon: e.jsx(al, { className: "icon-sm" }),
                      label: e.jsx(r, { ...C.dataControlsTab }),
                      testId: "data-controls-tab",
                    }),
                    $ &&
                      e.jsx(je, {
                        value: F.BuilderProfile,
                        icon: e.jsx(Bl, { className: "icon-sm" }),
                        label: e.jsx(Ku, {}),
                      }),
                    Es &&
                      e.jsx(je, {
                        value: F.ConnectorSettings,
                        icon: e.jsx(hs, { className: "icon-sm" }),
                        label: Ts
                          ? e.jsx(r, { ...C.connectorsTabRevamp })
                          : e.jsx(r, { ...C.connectorsTab }),
                      }),
                    e.jsx(je, {
                      value: F.Security,
                      icon: e.jsx(Fl, { className: "icon-sm" }),
                      label: e.jsx(r, { ...C.securityTab }),
                      testId: "security-tab",
                    }),
                    Rs &&
                      e.jsx(je, {
                        value: F.Subscription,
                        icon: e.jsx(fa, { className: "icon-sm" }),
                        label: e.jsx(r, { ...C.subscriptionTab }),
                        testId: "subscription-tab",
                      }),
                    Vt &&
                      e.jsx(je, {
                        value: F.Referrals,
                        icon: e.jsx(fa, { className: "icon-sm" }),
                        label: e.jsx(r, {
                          id: "aafU3E",
                          defaultMessage: "Referrals",
                        }),
                      }),
                    !1,
                  ],
                }),
                e.jsxs(pe, {
                  value: F.General,
                  children: [
                    !Ht && e.jsx(_, { children: e.jsx(Pn, {}) }),
                    e.jsx(_, {
                      children: e.jsx(Ue, {
                        label: t.formatMessage(C.alwaysExpandCodeOutput),
                        enabled: zn,
                        isLoading: As,
                        onChange: (q) => {
                          Is.mutate({
                            setting: ne.ShowExpandedCodeView,
                            value: q,
                          }),
                            Ds(q);
                        },
                      }),
                    }),
                    e.jsx(_, {
                      children: e.jsx(Ue, {
                        label: t.formatMessage(C.showFollowupsLabel),
                        enabled: !Gn,
                        onChange: (q) => {
                          Fn.setDisabledGlobally(!q),
                            T.logEventWithStatsig(
                              "chatgpt_message_followup_setting",
                              "chatgpt_message_followup_setting",
                              {
                                action: q
                                  ? "enable_globally"
                                  : "disable_globally",
                              },
                            );
                        },
                      }),
                    }),
                    e.jsx(_, { children: e.jsx(p1, {}) }),
                    e.jsx(_, {
                      children: e.jsx(me, {
                        label: t.formatMessage(C.archivedConversations),
                        buttonLabel: t.formatMessage(C.manageButton),
                        onClick: () => {
                          L(!0);
                        },
                        testId: "manage-archived-conversations-button",
                      }),
                    }),
                    e.jsx(_, {
                      children: e.jsx(me, {
                        label: t.formatMessage(C.archiveChatsLabel),
                        buttonLabel: t.formatMessage(C.archiveChatsButton),
                        onClick: lo,
                        testId: "archive-all-chats-button",
                      }),
                    }),
                    e.jsx(_, {
                      children: e.jsx(me, {
                        color: "danger",
                        label: t.formatMessage(C.deleteChatLabel),
                        buttonLabel: t.formatMessage(C.deleteChatButton),
                        onClick: ro,
                        testId: "delete-all-chats-button",
                      }),
                    }),
                    e.jsx(_, {
                      children: e.jsx(me, {
                        label: t.formatMessage(C.logOutLabel),
                        buttonLabel: t.formatMessage(C.logOutButton),
                        onClick: () => ct(),
                        testId: "logout-button",
                      }),
                    }),
                  ],
                }),
                Fs &&
                  e.jsx(pe, {
                    value: F.Notifications,
                    children: e.jsx(qd, {}),
                  }),
                Ht &&
                  e.jsx(pe, { value: F.DesktopApp, children: e.jsx(_u, {}) }),
                !Ls &&
                  e.jsx(pe, { value: F.BetaFeatures, children: e.jsx(g1, {}) }),
                e.jsxs(pe, {
                  value: F.DataControls,
                  children: [
                    e.jsx(u1, {}),
                    Xn &&
                      Jn &&
                      e.jsx(_, {
                        children: e.jsx(Ue, {
                          label: t.formatMessage({
                            id: "APWP2z",
                            defaultMessage: "Enable memory in search",
                          }),
                          enabled: $n,
                          onChange: (q) => {
                            Is.mutate({ setting: ne.MemoryInSearch, value: q });
                          },
                          disabled: !Qn,
                          description: e.jsx(r, {
                            id: "nQ+QoN",
                            defaultMessage:
                              "To be more helpful in getting you more relevant responses, ChatGPT may share disassociated search queries based on past memories with third-party search providers. <link>Learn more</link>",
                            values: {
                              link: (q) =>
                                e.jsx("a", {
                                  href: "https://help.openai.com/en/articles/9237897-chatgpt-search",
                                  target: "_blank",
                                  className: "underline",
                                  rel: "noreferrer",
                                  children: q,
                                }),
                            },
                          }),
                        }),
                      }),
                    Vn &&
                      e.jsx(_, {
                        children: e.jsx(me, {
                          label: t.formatMessage(C.sharedConversations),
                          buttonLabel: t.formatMessage(C.manageButton),
                          onClick: () => {
                            w(!0);
                          },
                          testId: "manage-shared-conversations-button",
                        }),
                      }),
                    qn &&
                      Yn &&
                      e.jsx(_, {
                        children: e.jsx(me, {
                          label: t.formatMessage(C.mergePersonalData),
                          buttonLabel: t.formatMessage(C.mergeButton),
                          onClick: () => {
                            v(!0);
                          },
                        }),
                      }),
                    !Ls &&
                      e.jsxs(e.Fragment, {
                        children: [
                          e.jsx(_, {
                            children: e.jsx(me, {
                              label: t.formatMessage(C.exportData),
                              buttonLabel: t.formatMessage(C.exportButton),
                              onClick: io,
                              testId: "export-data-button",
                            }),
                          }),
                          e.jsx(_, {
                            children: e.jsx(me, {
                              label: t.formatMessage(C.deleteAccount),
                              buttonLabel: t.formatMessage(
                                C.deleteAccountButton,
                              ),
                              color: "danger",
                              onClick: co,
                              testId: "delete-account-button",
                            }),
                          }),
                        ],
                      }),
                  ],
                }),
                Os &&
                  e.jsx(pe, {
                    value: F.Personalization,
                    children: e.jsx($u, {}),
                  }),
                e.jsx(pe, { value: F.BuilderProfile, children: e.jsx(Uu, {}) }),
                Es &&
                  e.jsx(pe, {
                    value: F.ConnectorSettings,
                    children: Ts
                      ? e.jsx(wd, {
                          onAddOauthLinkClick: () => ye(!0),
                          onCreateCustomConnectorClick: () => ve(!0),
                        })
                      : e.jsx(Sn, {}),
                  }),
                e.jsx(ta.Content, {}),
                e.jsxs(pe, {
                  value: F.Security,
                  children: [
                    eo &&
                      e.jsx(_, {
                        children: e.jsx(me, {
                          label: e.jsxs(e.Fragment, {
                            children: [
                              e.jsx(r, {
                                id: "settingsModal.toggleMfa",
                                defaultMessage: "Multi-factor authentication",
                              }),
                              H === X.ENABLED &&
                                e.jsx("span", {
                                  className:
                                    "mx-1.5 rounded-sm bg-green-50 px-1 py-0.5 text-xs font-semibold text-green-700",
                                  children: e.jsx(r, {
                                    id: "settingsModal.mfaEnabled",
                                    defaultMessage: "Enabled",
                                  }),
                                }),
                            ],
                          }),
                          disabled: H === X.LOADING,
                          buttonLabel: e.jsxs(e.Fragment, {
                            children: [
                              H === X.LOADING &&
                                e.jsx(r, {
                                  id: "settingsModal.loadingMfa",
                                  defaultMessage: "Loading...",
                                }),
                              H === X.ENABLED &&
                                e.jsx(r, {
                                  id: "settingsModal.disable",
                                  defaultMessage: "Disable",
                                }),
                              H === X.DISABLED &&
                                e.jsx(r, {
                                  id: "settingsModal.enable",
                                  defaultMessage: "Enable",
                                }),
                            ],
                          }),
                          onClick: () => {
                            H === X.ENABLED
                              ? Oe()
                              : H === X.DISABLED && Qe
                                ? uo()
                                : H === X.DISABLED && He();
                          },
                          description: e.jsxs(e.Fragment, {
                            children: [
                              H === X.DISABLED &&
                                e.jsx(r, {
                                  id: "settingsModal.toggleMfaDescriptionDisabled",
                                  defaultMessage:
                                    "Require an extra security challenge when logging in. If you are unable to pass this challenge, you will have the option to recover your account via email.",
                                }),
                              H === X.ENABLED &&
                                e.jsxs(e.Fragment, {
                                  children: [
                                    e.jsx(r, {
                                      id: "settingsModal.toggleMfaDescriptionEnabled",
                                      defaultMessage:
                                        "You'll only be able to log in using {currentIdp} while this is on.",
                                      values: { currentIdp: On },
                                    }),
                                    "",
                                    e.jsx("a", {
                                      className: "underline",
                                      target: "_blank",
                                      rel: "noreferrer",
                                      href: Ul,
                                      children: e.jsx(r, {
                                        id: "settingsModal.toggleMfaDescriptionLearnMore",
                                        defaultMessage: "Learn more",
                                      }),
                                    }),
                                    ".",
                                  ],
                                }),
                            ],
                          }),
                        }),
                      }),
                    e.jsx(_, {
                      children: e.jsx(me, {
                        label: e.jsx(r, {
                          id: "settingsModal.logoutAllLabel",
                          defaultMessage: "Log out of all devices",
                        }),
                        buttonLabel: e.jsx("div", {
                          style: { whiteSpace: "nowrap" },
                          children: e.jsx(r, {
                            id: "settingsModal.logoutAllButton",
                            defaultMessage: "Log out all",
                          }),
                        }),
                        description: e.jsx(r, {
                          id: "settingsModal.logoutAllDescription",
                          defaultMessage:
                            "Log out of all active sessions across all devices, including your current session. It may take up to 30 minutes for other devices to be logged out.",
                        }),
                        onClick: () => {
                          T.logLogOutButtonClicked({
                            location: "settings_modal_log_out_all",
                          }),
                            fo();
                        },
                        disabled: P,
                        testId: "logout-all-button",
                      }),
                    }),
                  ],
                }),
                Rs &&
                  e.jsx(pe, {
                    value: F.Subscription,
                    children: e.jsx(iu, {
                      currentAccount: $,
                      onCancelSubscriptionClick: mo,
                      onRenewSubscriptionClick: go,
                    }),
                  }),
                Vt &&
                  e.jsx(pe, {
                    value: F.Referrals,
                    children: e.jsx(pu, { eligibleProgramName: Vt }),
                  }),
                !1,
              ],
            }),
          });
};
function g1() {
  return e.jsx(e.Fragment, {
    children: e.jsx(_, {
      children: e.jsx("p", { children: e.jsx(r, { ...C.betaIntro }) }),
    }),
  });
}
const f1 = () => {
    const t = _e.getCookie(Le.PreferredLocale);
    return t != null ? Pa(t) : null;
  },
  h1 = 365 * 24 * 60 * 60;
function ba(t) {
  t == null
    ? _e.deleteCookie(Le.PreferredLocale)
    : _e.setCookie(Le.PreferredLocale, t, { maxAge: h1 }),
    window.location.reload();
}
function p1() {
  const t = Vo().locale,
    s = Ko,
    a = Ks(() => f1()) ?? null,
    n = Ks(() => navigator.language),
    o = n == null ? null : Pa(n),
    i = [...new Set([a, o])].filter((l) => l != null),
    c = s.filter((l) => !i.includes(l));
  return e.jsxs("div", {
    className: "flex items-center justify-between",
    children: [
      e.jsx("div", { children: e.jsx(r, { ...C.locale }) }),
      e.jsxs(Me.Root, {
        value: a ?? "auto",
        onValueChange: (l) => {
          T.logEvent("Locale Updated by User", {
            from_locale: t,
            to_locale: l,
            raw_browser_locale: n ?? "",
            suggested_locale: o ?? "",
          }),
            Dt.logEvent("chatgpt_locale_updated_by_user", l, {
              from_locale: t,
              to_locale: l,
              raw_browser_locale: n ?? "",
              suggested_locale: o ?? "",
            }),
            ba(l === "auto" ? null : l);
        },
        children: [
          e.jsxs(Me.Trigger, {
            children: [e.jsx(Me.Value, {}), e.jsx(Me.Icon, {})],
          }),
          e.jsx(Me.Portal, {
            children: e.jsxs(Me.Content, {
              side: void 0,
              sideOffset: void 0,
              position: "item-aligned",
              children: [
                e.jsx(Me.Item, {
                  value: "auto",
                  children: e.jsx(r, { ...C.localeAuto }),
                }),
                i.map((l) =>
                  e.jsx(Me.Item, { value: l, children: zs[l] ?? l }, l),
                ),
                e.jsx(Me.Separator, {}),
                c.map((l) =>
                  e.jsx(Me.Item, { value: l, children: zs[l] ?? l }, l),
                ),
              ],
            }),
          }),
        ],
      }),
    ],
  });
}
function x1() {
  const t = k(),
    s = Go(),
    { closeSettings: a } = Ct();
  return (
    d.useEffect(() => {
      Dt.logEvent("chatgpt_unauthenticated_settings_modal_shown"),
        T.logEvent("Unauthenticated Settings Modal Shown");
    }, []),
    e.jsx(B, {
      testId: "modal-settings-unauth",
      isOpen: !0,
      onClose: a,
      type: "success",
      showCloseButton: !0,
      title: t.formatMessage(C.settings),
      children: e.jsx(_, {
        children: e.jsx(Ue, {
          label: t.formatMessage({
            id: "settingsModal.unauthChatTrainingToggleLabel",
            defaultMessage: "Improve the model for everyone",
          }),
          enabled: s,
          onChange: (n) => {
            Uo.setIsNoAuthChatTrainingEnabled(n),
              T.logEvent("No Auth Chat Training Toggled", { isEnabled: n });
          },
          description: e.jsx(r, {
            id: "rtxsI1",
            defaultMessage:
              "Allow your content to be used to train our models, which makes ChatGPT better for you and everyone who uses it. We take steps to protect your privacy. <link>Learn more</link>.",
            values: {
              link: (n) =>
                e.jsx("a", {
                  href: In,
                  target: "_blank",
                  className: "underline",
                  rel: "noreferrer",
                  children: n,
                }),
            },
          }),
        }),
      }),
    })
  );
}
function C1({ onClose: t, onDeleteHistory: s }) {
  const a = k(),
    n = cn();
  return e.jsx(B, {
    testId: "modal-confirm-delete-history",
    isOpen: !0,
    onClose: t,
    type: "success",
    title: a.formatMessage(C.deleteHistoryModalTitle),
    description:
      n &&
      e.jsx(r, {
        id: "settingsModal.deleteHistoryModalMemoryDisclaimer",
        defaultMessage:
          "To clear any memories from your chats, visit your <link>settings</link>.",
        values: {
          link: (o) =>
            e.jsx(Ge, {
              onClick: () => t(),
              to: "#settings/Personalization",
              className: "underline",
              children: o,
            }),
        },
      }),
    primaryButton: e.jsx(ee.Button, {
      title: a.formatMessage(C.deleteHistoryModalConfirm),
      color: "danger",
      onClick: () => {
        s(), t();
      },
      "data-testid": "confirm-delete-all-chats-button",
    }),
    secondaryButton: e.jsx(ee.Button, {
      title: a.formatMessage(C.deleteHistoryModalCancel),
      color: "secondary",
      onClick: t,
    }),
  });
}
function M1({ onClose: t, onArchiveHistory: s }) {
  const a = k();
  return e.jsx(B, {
    isOpen: !0,
    testId: "modal-confirm-archive-history",
    onClose: t,
    type: "success",
    title: a.formatMessage(C.archiveHistoryModalTitle),
    primaryButton: e.jsx(ee.Button, {
      title: a.formatMessage(C.archiveHistoryModalConfirm),
      color: "primary",
      onClick: () => {
        s(), t();
      },
    }),
    secondaryButton: e.jsx(ee.Button, {
      title: a.formatMessage(C.archiveHistoryModalCancel),
      color: "secondary",
      onClick: t,
    }),
  });
}
function b1({ onClose: t }) {
  const s = k(),
    a = R(),
    n = d.useCallback(() => {
      try {
        O.safePost("/accounts/data_export").then(() => {
          a.success(s.formatMessage(C.dataExportRequested), {
            testId: "data-export-success-toaster",
          }),
            t();
        });
      } catch {
        a.warning(s.formatMessage(C.dataExportFailed), { hasCloseButton: !0 });
      }
    }, [s, a, t]);
  return e.jsx(B, {
    testId: "modal-confirm-export-data",
    isOpen: !0,
    onClose: t,
    type: "success",
    title: s.formatMessage(C.dataExportModalTitle),
    primaryButton: e.jsx(ee.Button, {
      title: s.formatMessage(C.dataExportModalConfirm),
      color: "primary",
      onClick: n,
      "data-testid": "confirm-data-export-button",
    }),
    secondaryButton: e.jsx(ee.Button, {
      title: s.formatMessage(C.dataExportModalCancel),
      color: "secondary",
      onClick: t,
    }),
    children: e.jsxs("div", {
      className: "text-sm",
      children: [
        e.jsxs("ul", {
          className: "my-3 flex list-disc flex-col gap-1 ps-3",
          children: [
            e.jsx("li", {
              children: e.jsx(r, { ...C.dataExportModalDescription1 }),
            }),
            e.jsx("li", {
              children: e.jsx(r, { ...C.dataExportModalDescription2 }),
            }),
            e.jsx("li", {
              children: e.jsx(r, { ...C.dataExportModalDescription3 }),
            }),
            e.jsx("li", {
              children: e.jsx(r, { ...C.dataExportModalDescription4 }),
            }),
          ],
        }),
        e.jsx("div", {
          children: e.jsx(r, { ...C.dataExportModalDescription5 }),
        }),
      ],
    }),
  });
}
function j1({ onClose: t }) {
  const s = k(),
    a = R(),
    { session: n } = is(),
    o = pt(),
    i = o?.email,
    c = o?.phone_number,
    l = i || c || void 0,
    u = c ? C.typePhoneNumberLabel : C.typeEmailLabel,
    [m, h] = d.useState(""),
    [g, f] = d.useState(""),
    p = d.useCallback(() => {
      const S = n?.user?.iat;
      return S === void 0 || Date.now() / 1e3 - S < 600;
    }, [n]),
    y = d.useCallback(() => {
      try {
        p()
          ? O.safePost("/accounts/deactivate").then(() => {
              ct();
            })
          : a.warning(s.formatMessage(C.deleteAccountSessionTooOld), {
              hasCloseButton: !0,
            });
      } catch {
        a.warning(s.formatMessage(C.deleteAccountFailed), {
          hasCloseButton: !0,
        });
      }
    }, [s, a, p]),
    M = d.useCallback(() => {
      ct();
    }, []),
    j = g === "DELETE" && (l === void 0 || m.toLowerCase() === l.toLowerCase()),
    [w] = d.useState(() => p()),
    x = nl();
  return e.jsx(B, {
    testId: "modal-confirm-delete-account",
    isOpen: !0,
    onClose: t,
    type: "success",
    title: s.formatMessage(C.deleteAccountTitle),
    showCloseButton: !0,
    children: e.jsxs("div", {
      className: "text-sm",
      children: [
        e.jsxs("ul", {
          className: "mt-4 mb-6 flex list-disc flex-col gap-1 ps-3",
          children: [
            e.jsx("li", { children: e.jsx(r, { ...C.deleteAccountWarning }) }),
            e.jsx("li", {
              children: e.jsx(r, { ...C.apiAccessDeletionWarning }),
            }),
            e.jsx("li", {
              children: e.jsx(r, { ...C.reuseEmailPhoneWarning }),
            }),
            e.jsx("li", { children: e.jsx(r, { ...C.dataRemovalWarning }) }),
            x?.purchase_origin_platform === Tt.MOBILE_IOS &&
              e.jsx("li", {
                children: e.jsx(r, { ...C.iapSubscriptionWarning }),
              }),
            x?.purchase_origin_platform === Tt.MOBILE_ANDROID &&
              e.jsx("li", {
                children: e.jsx(r, { ...C.playStoreSubscriptionWarning }),
              }),
            e.jsx("li", {
              children: e.jsx(r, {
                ...C.deleteHelpCenter,
                values: {
                  article: (v) =>
                    e.jsx("a", {
                      href: "https://help.openai.com/en/articles/6378407-how-to-delete-your-account",
                      target: "_blank",
                      className: "underline",
                      rel: "noopener noreferrer",
                      children: v,
                    }),
                },
              }),
            }),
          ],
        }),
        w
          ? e.jsxs(e.Fragment, {
              children: [
                l
                  ? e.jsxs("div", {
                      className: "mb-4",
                      children: [
                        e.jsx(ja, {
                          htmlFor: "email",
                          children: e.jsx(r, { ...u }),
                        }),
                        e.jsx(Lt, {
                          ariaLabel: !1,
                          value: m,
                          placeholder: l,
                          name: "email",
                          onChange: (v) => {
                            h(v.target.value);
                          },
                        }),
                      ],
                    })
                  : null,
                e.jsxs("div", {
                  className: "mb-4",
                  children: [
                    e.jsx(ja, {
                      htmlFor: "delete",
                      children: e.jsx(r, { ...C.typeDeleteInputLabel }),
                    }),
                    e.jsx(Lt, {
                      ariaLabel: !1,
                      value: g,
                      onChange: (v) => {
                        f(v.target.value);
                      },
                      name: "delete",
                      className: "mb-4",
                    }),
                  ],
                }),
                e.jsx(N, {
                  color: j ? "danger" : "disabled",
                  onClick: y,
                  disabled: !j,
                  fullWidth: !0,
                  icon: j ? Ho : $a,
                  children: j
                    ? e.jsx(r, { ...C.deleteAccountButtonLabel })
                    : e.jsx(r, { ...C.lockedButtonLabel }),
                }),
              ],
            })
          : e.jsxs(e.Fragment, {
              children: [
                e.jsx("p", {
                  className: "text-token-text-tertiary pb-4 text-xs",
                  children: e.jsx(r, { ...C.recentLoginMessage }),
                }),
                e.jsx(N, {
                  color: "primary",
                  onClick: M,
                  fullWidth: !0,
                  children: e.jsx(r, { ...C.refreshLoginButtonLabel }),
                }),
              ],
            }),
      ],
    }),
  });
}
const ja = se.label`block text-sm font-semibold mb-1`,
  C = D({
    settings: { id: "settingsModal.settings", defaultMessage: "Settings" },
    locale: { id: "settingsModal.locale_alpha", defaultMessage: "Language" },
    localeAuto: {
      id: "settingsModal.localeAuto",
      defaultMessage: "Auto-detect",
    },
    archivedConversations: {
      id: "settingsModal.archivedConversations",
      defaultMessage: "Archived chats",
    },
    sharedConversations: {
      id: "settingsModal.sharedConversations",
      defaultMessage: "Shared links",
    },
    manageButton: {
      id: "settingsModal.manageButton",
      defaultMessage: "Manage",
    },
    mergePersonalData: {
      id: "settingsModal.mergePersonalData",
      defaultMessage: "Merge data from your personal workspace",
    },
    mergeButton: { id: "settingsModal.mergeButton", defaultMessage: "Merge" },
    cookieManagement: {
      id: "settingsModal.cookieManagement",
      defaultMessage: "Cookie preferences",
    },
    cookieManagementButton: {
      id: "settingsModal.cookieManagementButton",
      defaultMessage: "Manage",
    },
    exportData: {
      id: "settingsModal.exportData",
      defaultMessage: "Export data",
    },
    exportButton: {
      id: "settingsModal.exportButton",
      defaultMessage: "Export",
    },
    deleteAccount: {
      id: "settingsModal.deleteAccount",
      defaultMessage: "Delete account",
    },
    deleteAccountButton: {
      id: "settingsModal.deleteButton",
      defaultMessage: "Delete",
    },
    alwaysExpandCodeOutput: {
      id: "settingsModal.alwaysShowDataAnalystOutput",
      defaultMessage: "Always show code when using data analyst",
    },
    trainingAllowedDescription: {
      id: "Qalmv5",
      defaultMessage:
        "Allow your content to be used to train our models, which makes ChatGPT better for you and everyone who uses it. We take steps to protect your privacy. <link>Learn more</link>",
    },
    deleteHistoryModalTitle: {
      id: "settingsModal.deleteHistoryModalTitle",
      defaultMessage: "Clear your chat history - are you sure?",
    },
    deleteHistoryModalConfirm: {
      id: "settingsModal.deleteHistoryModalConfirm",
      defaultMessage: "Confirm deletion",
    },
    deleteHistoryModalCancel: {
      id: "settingsModal.deleteHistoryModalCancel",
      defaultMessage: "Cancel",
    },
    archiveHistoryModalTitle: {
      id: "settingsModal.archiveHistoryModalTitle",
      defaultMessage: "Archive your chat history - are you sure?",
    },
    archiveHistoryModalConfirm: {
      id: "settingsModal.archiveHistoryModalConfirm",
      defaultMessage: "Confirm archive",
    },
    archiveHistoryModalCancel: {
      id: "settingsModal.archiveHistoryModalCancel",
      defaultMessage: "Cancel",
    },
    archiveHistorySuccess: {
      id: "settingsModal.archiveHistorySuccess",
      defaultMessage:
        "Successfully archived chats. You can view your archived chats in Settings.",
    },
    dataExportRequested: {
      id: "settingsModal.dataExportRequested",
      defaultMessage:
        "Successfully exported data. You should receive an email shortly with your data.",
    },
    dataExportFailed: {
      id: "settingsModal.dataExportFailed",
      defaultMessage:
        "We were unable to process your export at this time. Please try again later.",
    },
    dataExportModalTitle: {
      id: "settingsModal.dataExportModalTitle",
      defaultMessage: "Request data export - are you sure?",
    },
    dataExportModalConfirm: {
      id: "settingsModal.dataExportModalConfirm",
      defaultMessage: "Confirm export",
    },
    dataExportModalCancel: {
      id: "settingsModal.dataExportModalCancel",
      defaultMessage: "Cancel",
    },
    dataExportModalDescription1: {
      id: "settingsModal.dataExportModalDescription1",
      defaultMessage:
        "Your account details and chats will be included in the export.",
    },
    dataExportModalDescription2: {
      id: "settingsModal.dataExportModalDescription2",
      defaultMessage:
        "The data will be sent to your registered email in a downloadable file.",
    },
    dataExportModalDescription3: {
      id: "settingsModal.dataExportModalDescription3",
      defaultMessage:
        "The download link will expire 24 hours after you receive it.",
    },
    dataExportModalDescription4: {
      id: "settingsModal.dataExportModalDescription4",
      defaultMessage:
        "Processing may take some time. You'll be notified when it's ready.",
    },
    dataExportModalDescription5: {
      id: "settingsModal.dataExportModalDescription5",
      defaultMessage: 'To proceed, click "Confirm export" below.',
    },
    deleteAccountSessionTooOld: {
      id: "settingsModal.deleteAccountSessionTooOld",
      defaultMessage:
        "Your login session is too old. Please log in again before deleting your account.",
    },
    deleteAccountFailed: {
      id: "settingsModal.deleteAccountFailed",
      defaultMessage: "Failed to delete account. Please try again later.",
    },
    deleteAccountTitle: {
      id: "settingsModal.deleteAccountTitle",
      defaultMessage: "Delete account - are you sure?",
    },
    deleteAccountWarning: {
      id: "settingsModal.deleteAccountWarning",
      defaultMessage:
        "Deleting your account is permanent and cannot be undone.",
    },
    reuseEmailPhoneWarning: {
      id: "settingsModal.reuseEmailPhoneWarning-2",
      defaultMessage:
        "You cannot create a new account using the same email address.",
    },
    dataRemovalWarning: {
      id: "settingsModal.dataRemovalWarning-2",
      defaultMessage:
        "Your data will be deleted within 30 days, except we may retain a limited set of data for longer where required or permitted by law.",
    },
    apiAccessDeletionWarning: {
      id: "settingsModal.apiAccessDeletionWarning-2",
      defaultMessage:
        "Deletion will prevent you from accessing OpenAI services, including ChatGPT, API, and DALLE.",
    },
    deleteHelpCenter: {
      id: "settingsModal.deleteHelpCenter",
      defaultMessage:
        "Read our <article>help center article</article> for more information.",
    },
    iapSubscriptionWarning: {
      id: "settingsModal.iapSubscriptionWarning",
      defaultMessage:
        "You will need to cancel your in-app purchase subscription in the Apple App Store. We cannot cancel your subscription for you.",
    },
    playStoreSubscriptionWarning: {
      id: "settingsModal.playStoreSubscriptionWarning",
      defaultMessage:
        "You will need to cancel your in-app purchase subscription in the Google Play Store. We cannot cancel your subscription for you.",
    },
    typeEmailLabel: {
      id: "settingsModal.typeEmailLabel",
      defaultMessage: "Please type your account email.",
    },
    typePhoneNumberLabel: {
      id: "settingsModal.typePhoneNumberLabel",
      defaultMessage: "Please type your account phone number.",
    },
    typeDeleteInputLabel: {
      id: "settingsModal.typeDeleteInputLabel",
      defaultMessage: 'To proceed, type "DELETE" in the input field below.',
    },
    lockedButtonLabel: {
      id: "settingsModal.lockedButtonLabel",
      defaultMessage: "Locked",
    },
    deleteAccountButtonLabel: {
      id: "settingsModal.deleteAccountButtonLabel",
      defaultMessage: "Permanently delete my account",
    },
    recentLoginMessage: {
      id: "settingsModal.recentLoginMessage",
      defaultMessage:
        "You may only delete your account if you have logged in within the last 10 minutes. Please log in again, then return here to continue.",
    },
    refreshLoginButtonLabel: {
      id: "settingsModal.refreshLoginButtonLabel",
      defaultMessage: "Refresh login",
    },
    chatTrainingAllowedToggleLabel: {
      id: "settingsModal.trainingAllowedToggleLabel",
      defaultMessage: "Improve the model for everyone",
    },
    chatTrainingEnterpriseTooltip: {
      id: "settingsModal.chatTrainingEnterpriseTooltip",
      defaultMessage: "ChatGPT Enterprise automatically disables training.",
    },
    chatTrainingEduTooltip: {
      id: "settingsModal.chatTrainingEduTooltip",
      defaultMessage: "ChatGPT Edu automatically disables training.",
    },
    chatTrainingTeamsTooltip: {
      id: "settingsModal.chatTrainingTeamsTooltip",
      defaultMessage: "ChatGPT Team automatically disables training.",
    },
    dataControlsTab: {
      id: "settingsModal.dataControls",
      defaultMessage: "Data controls",
    },
    cookiesTab: {
      id: "settingsModal.cookies",
      defaultMessage: "Cookie Preferences",
    },
    personalizationTab: {
      id: "settingsModal.personalization",
      defaultMessage: "Personalization",
    },
    betaIntro: {
      id: "settingsModal.betaIntro",
      defaultMessage:
        "As a Plus user, enjoy early access to experimental new features, which may change during development.",
    },
    betaSettingsUpdateFailed: {
      id: "settingsModal.betaSettingsUpdateFailed",
      defaultMessage: "Failed to update your beta setting",
    },
    generalTab: { id: "settingsModal.generalTab", defaultMessage: "General" },
    desktopAppTab: { id: "settingsModal.desktopAppTab", defaultMessage: "App" },
    betaTab: { id: "settingsModal.betaTab", defaultMessage: "Beta features" },
    connectorsTab: {
      id: "settingsModal.connectorsTab",
      defaultMessage: "Connected apps",
    },
    connectorsTabRevamp: {
      id: "settingsModal.connectorsTabRevamp",
      defaultMessage: "Connectors",
    },
    securityTab: {
      id: "settingsModal.securityTab",
      defaultMessage: "Security",
    },
    internalTab: {
      id: "settingsModal.internalTab",
      defaultMessage: "Employee Only",
    },
    subscriptionTab: {
      id: "settingsModal.subscriptionTab",
      defaultMessage: "Subscription",
    },
    logoutAllSuccess: {
      id: "settingsModal.logoutAllSuccess",
      defaultMessage: "Successfully logged out of all devices.",
    },
    logoutAllFailed: {
      id: "settingsModal.logoutAllFailed",
      defaultMessage:
        "We were unable to process your request at this time. Please try again later.",
    },
    deleteChatLabel: {
      id: "settingsModal.deleteChatLabel",
      defaultMessage: "Delete all chats",
    },
    deleteChatButton: {
      id: "settingsModal.deleteChatButton",
      defaultMessage: "Delete all",
    },
    logOutLabel: {
      id: "settingsModal.logOutLabel",
      defaultMessage: "Log out on this device",
    },
    logOutButton: {
      id: "settingsModal.logoutButton",
      defaultMessage: "Log out",
    },
    showFollowupsLabel: {
      id: "settingsModal.showFollowupsLabel",
      defaultMessage: "Show follow up suggestions in chats",
    },
    archiveChatsLabel: {
      id: "settingsModal.archiveChatsLabel",
      defaultMessage: "Archive all chats",
    },
    archiveChatsButton: {
      id: "settingsModal.archiveChatsButton",
      defaultMessage: "Archive all",
    },
    chatHistoryDescription: {
      id: "settingsModal.chatHistoryDescription",
      defaultMessage:
        "Save new chats on this browser to your history and allow them to be used to improve our models. Unsaved chats will be deleted from our systems within 30 days. This setting does not sync across browsers or devices. <link>Learn more</link>",
    },
    voiceTrainingAllowedLabel: {
      id: "settingsModal.voiceTrainingAllowedLabel",
      defaultMessage: "Include your audio recordings",
    },
    videoTrainingAllowedLabel: {
      id: "settingsModal.videoTrainingAllowedLabel",
      defaultMessage: "Include your video recordings",
    },
    voiceAndVideoTrainingDescription: {
      id: "settingsModal.voiceAndVideoTrainingDescription",
      defaultMessage:
        'Include your audio and video recordings from Voice Mode to train our models. Transcripts and other files are covered by "Improve the model for everyone." <link>Learn more</link>',
    },
    accountErrorWarning: {
      id: "SettingsModalImpl.accountErrorWarning",
      defaultMessage:
        "The account management page encountered an error. Please try again. If the problem continues, please visit help.openai.com.",
    },
  });
function y1() {
  const { isOpen: t } = Ct(),
    { isUnauthenticated: s } = gt();
  return t ? (s ? e.jsx(x1, {}) : e.jsx(m1, {})) : null;
}
function v1() {
  const t = k(),
    [s] = Ta(),
    a = R(),
    n = s.get(ol),
    o = d.useMemo(
      () =>
        n === "true"
          ? t.formatMessage({
              id: "ogcSBw",
              defaultMessage: "ChatGPT student offer activated",
            })
          : null,
      [n, t],
    );
  return (
    d.useEffect(() => {
      o && a.success(o, { hasCloseButton: !0 });
    }, [o, a]),
    null
  );
}
const S1 = rs(() =>
    ls(
      () => import("./cmf04dh7i1msjij3.js"),
      __vite__mapDeps([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]),
    ).then((t) => t.FannyPackModalContainer),
  ),
  k1 = rs(() =>
    ls(
      () => import("./niorjy0w991q2jfl.js"),
      __vite__mapDeps([16, 1, 2, 3, 6, 7, 17]),
    ),
  );
function w1() {
  const t = ut((s) => s.sharingModalThreadId);
  return t ? e.jsx(k1, { serverThreadId: t }) : null;
}
const N1 = rs(() =>
  ls(
    () => import("./buuh44fq2yjidyvi.js"),
    __vite__mapDeps([18, 1, 2, 3, 6, 7, 19, 20]),
  ).then((t) => t.UserContextModal),
);
function pm() {
  const t = ut((x) => x.purchaseWorkspaceData),
    s = ut((x) => x.leaveWorkspaceData),
    a = t != null,
    n = Pt(ce.UserContext),
    o = Pt(ce.GlobalMemoryOnboarding),
    i = at(),
    { shouldShowTeamSignupLanding: c, shouldShowTeamSignupDirectPurchase: l } =
      wc();
  wl(a);
  const u = Te(),
    { isOpen: m, defaultTab: h } = Ac(),
    { isFannyPackEnabled: g } = il();
  gl();
  const f = rl((x) => x.researchShareIntent),
    { isEnabled: p } = Pl(),
    [y] = Ta(),
    M = y.get(Ia),
    j = ll(M ?? ""),
    w = M && (j.promoMetadata ?? j.promoError ?? j.isPromoLoading);
  return e.jsxs(e.Fragment, {
    children: [
      e.jsx(y1, {}),
      e.jsx(_c, {}),
      e.jsx(Xc, {}),
      e.jsx(nc, {}),
      c && e.jsx(Nc, {}),
      l && e.jsx(Nl, {}),
      m && i && !w && e.jsx(yl, { currentAccount: i, defaultTab: h }),
      w && i && e.jsx(Pc, { currentAccount: i, promotionData: j }),
      e.jsx(cl, {}),
      e.jsx(oc, {}),
      a &&
        e.jsx(_l, {
          isOpen: a,
          onClose: () => {
            oe.setPurchaseWorkspaceData(null),
              u({ pathname: location.pathname, search: "", hash: "" });
          },
          ...t,
        }),
      s && e.jsx(Yl, { workspace: s }),
      n && e.jsx(N1, { isModalOpen: n }),
      o &&
        e.jsx(dl, { onClose: () => oe.closeModal(ce.GlobalMemoryOnboarding) }),
      g && e.jsx(S1, {}),
      e.jsx(w1, {}),
      f &&
        e.jsx(ac, {
          taskId: f.taskId,
          messages: f.messages,
          threadId: f.threadId,
        }),
      e.jsx(rc, {}),
      null,
      p ? e.jsx(v1, {}) : null,
    ],
  });
}
export { pm as GlobalModalsComponent };
//# sourceMappingURL=gnepbzer8xlcf1m0.js.map
